/*! Wardrobe 2013-06-05 */
(function(t,e){function i(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var t=h.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e={},i=t.createElement,r=t.createDocumentFragment,o=r();t.createElement=function(t){if(!h.shivMethods)return i(t);var n;return n=e[t]?e[t].cloneNode():u.test(t)?(e[t]=i(t)).cloneNode():i(t),n.canHaveChildren&&!c.test(t)?o.appendChild(n):n},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(t){return i(t),o.createElement(t),'c("'+t+'")'})+");return n}")(h,o)}function o(t){var e;return t.documentShived?t:(h.shivCSS&&!s&&(e=!!i(t,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),a||(e=!r(t)),e&&(t.documentShived=e),t)}var s,a,l=t.html5||{},c=/^<|^(?:button|form|map|select|textarea|object|iframe|option|optgroup)$/i,u=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i;(function(){var i=e.createElement("a");i.innerHTML="<xyz></xyz>",s="hidden"in i,s&&"function"==typeof injectElementWithStyles&&injectElementWithStyles("#modernizr{}",function(e){e.hidden=!0,s="none"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).display}),a=1==i.childNodes.length||function(){try{e.createElement("a")}catch(t){return!0}var i=e.createDocumentFragment();return i.cloneNode===void 0||i.createDocumentFragment===void 0||i.createElement===void 0}()})();var h={elements:l.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!(l.shivCSS===!1),shivMethods:!(l.shivMethods===!1),type:"default",shivDocument:o};t.html5=h,o(e)})(this,document),function(){var t=this,e=t._,i={},n=Array.prototype,r=Object.prototype,o=Function.prototype,s=n.push,a=n.slice,l=n.concat,c=r.toString,u=r.hasOwnProperty,h=n.forEach,d=n.map,f=n.reduce,p=n.reduceRight,m=n.filter,g=n.every,v=n.some,y=n.indexOf,w=n.lastIndexOf,b=Array.isArray,C=Object.keys,x=o.bind,k=function(t){return t instanceof k?t:this instanceof k?(this._wrapped=t,void 0):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.4";var _=k.each=k.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var s in t)if(k.has(t,s)&&e.call(n,t[s],s,t)===i)return};k.map=k.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(_(t,function(t,r,o){n[n.length]=e.call(i,t,r,o)}),n)};var M="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return n&&(e=k.bind(e,n)),r?t.reduce(e,i):t.reduce(e);if(_(t,function(t,o,s){r?i=e.call(n,i,t,o,s):(i=t,r=!0)}),!r)throw new TypeError(M);return i},k.reduceRight=k.foldr=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return n&&(e=k.bind(e,n)),r?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(o!==+o){var s=k.keys(t);o=s.length}if(_(t,function(a,l,c){l=s?s[--o]:--o,r?i=e.call(n,i,t[l],l,c):(i=t[l],r=!0)}),!r)throw new TypeError(M);return i},k.find=k.detect=function(t,e,i){var n;return T(t,function(t,r,o){return e.call(i,t,r,o)?(n=t,!0):void 0}),n},k.filter=k.select=function(t,e,i){var n=[];return null==t?n:m&&t.filter===m?t.filter(e,i):(_(t,function(t,r,o){e.call(i,t,r,o)&&(n[n.length]=t)}),n)},k.reject=function(t,e,i){return k.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)},k.every=k.all=function(t,e,n){e||(e=k.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,n):(_(t,function(t,o,s){return(r=r&&e.call(n,t,o,s))?void 0:i}),!!r)};var T=k.some=k.any=function(t,e,n){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,n):(_(t,function(t,o,s){return r||(r=e.call(n,t,o,s))?i:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},k.invoke=function(t,e){var i=a.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){return(n?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,i){return k.isEmpty(e)?i?null:[]:k[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return _(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;s>=n.computed&&(n={value:t,computed:s})}),n.value},k.min=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return _(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;n.computed>s&&(n={value:t,computed:s})}),n.value},k.shuffle=function(t){var e,i=0,n=[];return _(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n};var S=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,i){var n=S(e);return k.pluck(k.map(t,function(t,e,r){return{value:t,index:e,criteria:n.call(i,t,e,r)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var L=function(t,e,i,n){var r={},o=S(e||k.identity);return _(t,function(e,s){var a=o.call(i,e,s,t);n(r,a,e)}),r};k.groupBy=function(t,e,i){return L(t,e,i,function(t,e,i){(k.has(t,e)?t[e]:t[e]=[]).push(i)})},k.countBy=function(t,e,i){return L(t,e,i,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,i,n){i=null==i?k.identity:S(i);for(var r=i.call(n,e),o=0,s=t.length;s>o;){var a=o+s>>>1;r>i.call(n,t[a])?o=a+1:s=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},k.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var D=function(t,e,i){return _(t,function(t){k.isArray(t)?e?s.apply(i,t):D(t,e,i):i.push(t)}),i};k.flatten=function(t,e){return D(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,i,n){k.isFunction(e)&&(n=i,i=e,e=!1);var r=i?k.map(t,i,n):t,o=[],s=[];return _(r,function(i,n){(e?n&&s[s.length-1]===i:k.contains(s,i))||(s.push(i),o.push(t[n]))}),o},k.union=function(){return k.uniq(l.apply(n,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(n,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),i=Array(e),n=0;e>n;n++)i[n]=k.pluck(t,""+n);return i},k.object=function(t,e){if(null==t)return{};for(var i={},n=0,r=t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,r=t.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,r+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;r>n;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var r=n?i:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,i){1>=arguments.length&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=0,o=Array(n);n>r;)o[r++]=t,t+=i;return o},k.bind=function(t,e){if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));var i=a.call(arguments,2);return function(){return t.apply(e,i.concat(a.call(arguments)))}},k.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},k.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=k.functions(t)),_(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var i={};return e||(e=k.identity),function(){var n=e.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},k.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var i,n,r,o,s=0,a=function(){s=new Date,r=null,o=t.apply(i,n)};return function(){var l=new Date,c=e-(l-s);return i=this,n=arguments,0>=c?(clearTimeout(r),r=null,s=l,o=t.apply(i,n)):r||(r=setTimeout(a,c)),o}},k.debounce=function(t,e,i){var n,r;return function(){var o=this,s=arguments,a=function(){n=null,i||(r=t.apply(o,s))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,e),l&&(r=t.apply(o,s)),r}},k.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var i=[t];return s.apply(i,arguments),e.apply(this,i)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},k.keys=C||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)k.has(t,i)&&(e[e.length]=i);return e},k.values=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push(t[i]);return e},k.pairs=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push([i,t[i]]);return e},k.invert=function(t){var e={};for(var i in t)k.has(t,i)&&(e[t[i]]=i);return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(t){return _(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},k.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return _(i,function(i){i in t&&(e[i]=t[i])}),e},k.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var r in t)k.contains(i,r)||(e[r]=t[r]);return e},k.defaults=function(t){return _(a.call(arguments,1),function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var O=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;i.push(t),n.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=O(t[s],e[s],i,n)););}else{var l=t.constructor,u=e.constructor;if(l!==u&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(u)&&u instanceof u))return!1;for(var h in t)if(k.has(t,h)&&(s++,!(a=k.has(e,h)&&O(t[h],e[h],i,n))))break;if(a){for(h in e)if(k.has(e,h)&&!s--)break;a=!s}}return i.pop(),n.pop(),a};k.isEqual=function(t,e){return O(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=b||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},_(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),k.isFunction=function(t){return"function"==typeof t},k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return u.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,i){for(var n=Array(t),r=0;t>r;r++)n[r]=e.call(i,r);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};A.unescape=k.invert(A.escape);var E={escape:RegExp("["+k.keys(A.escape).join("")+"]","g"),unescape:RegExp("("+k.keys(A.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(E[t],function(e){return A[t][e]})}}),k.result=function(t,e){if(null==t)return null;var i=t[e];return k.isFunction(i)?i.call(t):i},k.mixin=function(t){_(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),$.call(this,i.apply(k,t))}})};var I=0;k.uniqueId=function(t){var e=++I+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,N={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},F=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,i){var n;i=k.defaults({},i,k.templateSettings);var r=RegExp([(i.escape||H).source,(i.interpolate||H).source,(i.evaluate||H).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,i,n,r,a){return s+=t.slice(o,a).replace(F,function(t){return"\\"+N[t]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return n(e,k);var l=function(t){return n.call(this,t,k)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},k.chain=function(t){return k(t).chain()};var $=function(t){return this._chain?k(t).chain():t};k.mixin(k),_(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],$.call(this,i)}}),_(["concat","join","slice"],function(t){var e=n[t];k.prototype[t]=function(){return $.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var Backbone,t=this,e=t.Backbone,i=[],n=i.push,r=i.slice,o=i.splice;Backbone="undefined"!=typeof exports?exports:t.Backbone={},Backbone.VERSION="1.0.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),Backbone.$=t.jQuery||t.Zepto||t.ender||t.$,Backbone.noConflict=function(){return t.Backbone=e,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var a=Backbone.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var n=this,r=s.once(function(){n.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var n,r,o,a,l,u,h,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:s.keys(this._events),l=0,u=a.length;u>l;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=n=[],e||i)for(h=0,d=o.length;d>h;h++)r=o[h],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var r=!e&&!i;"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,i,this),r&&delete this._listeners[o];return this}},l=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(l.test(i)){for(var o=i.split(l),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;r>++n;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;r>++n;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;r>++n;)(i=t[n]).callback.call(i.ctx,o,s);return;case 3:for(;r>++n;)(i=t[n]).callback.call(i.ctx,o,s,a);return;default:for(;r>++n;)(i=t[n]).callback.apply(i.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};s.each(h,function(t,e){a[e]=function(e,i,n){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=s.uniqueId("l"));return r[o]=e,"object"==typeof i&&(n=this),e[t](i,n,this),this}}),a.bind=a.on,a.unbind=a.off,s.extend(Backbone,a);var d=Backbone.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=s.uniqueId("c"),this.attributes={},s.extend(this,s.pick(e,f)),e.parse&&(n=this.parse(n,e)||{}),(i=s.result(this,"defaults"))&&(n=s.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];s.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return s.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,r,o,a,l,c,u,h;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)e=r[n],s.isEqual(h[n],e)||a.push(n),s.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,o?delete h[n]:h[n]=e;if(!l){a.length&&(this._pending=!0);for(var d=0,f=a.length;f>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,s.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,s.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s.isEmpty(this.changed):s.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?s.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var r in t)s.isEqual(n[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),e.trigger("sync",e,n,t),void 0):!1},F(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,r,o,a=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,!(!n||i&&i.wait||this.set(n,i)))return!1;if(i=s.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=s.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=s.extend(n||{},e)),s.isObject(e)&&!l.set(e,i)?!1:(c&&c(l,t,i),l.trigger("sync",l,t,i),void 0)},F(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=n),o=this.sync(r,this,i),n&&i.wait&&(this.attributes=a),o},destroy:function(t){t=t?s.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&n(),i&&i(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;F(this,t);var r=this.sync("delete",this,t);return t.wait||n(),r},url:function(){var t=s.result(this,"urlRoot")||s.result(this.collection,"url")||N();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},s.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=s.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,s.extend(e||{},{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];s.each(p,function(t){d.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),s[t].apply(s,e)}});var m=Backbone.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,merge:!1,remove:!1};s.extend(m.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,e){return this.set(t,s.defaults(e||{},v))},remove:function(t,e){t=s.isArray(t)?t.slice():[t],e||(e={});var i,n,r,o;for(i=0,n=t.length;n>i;i++)o=this.get(t[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=s.defaults(e||{},g),e.parse&&(t=this.parse(t,e)),s.isArray(t)||(t=t?[t]:[]);var i,r,a,l,c,u=e.at,h=this.comparator&&null==u&&e.sort!==!1,d=s.isString(this.comparator)?this.comparator:null,f=[],p=[],m={};for(i=0,r=t.length;r>i;i++)(a=this._prepareModel(t[i],e))&&((l=this.get(a))?(e.remove&&(m[l.cid]=!0),e.merge&&(l.set(a.attributes,e),h&&!c&&l.hasChanged(d)&&(c=!0))):e.add&&(f.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)));if(e.remove){for(i=0,r=this.length;r>i;++i)m[(a=this.models[i]).cid]||p.push(a);p.length&&this.remove(p,e)}if(f.length&&(h&&(c=!0),this.length+=f.length,null!=u?o.apply(this.models,[u,0].concat(f)):n.apply(this.models,f)),c&&this.sort({silent:!0}),e.silent)return this;for(i=0,r=f.length;r>i;i++)(a=f[i]).trigger("add",a,this,e);return c&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,s.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,s.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return s.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return t||(t={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=s.isFunction(e)?e:function(t){return t.get(e)};return s.sortedIndex(this.models,t,n,i)},pluck:function(t){return s.invoke(this.models,"get",t)},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?s.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(r){e.wait&&i.add(t,e),n&&n(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(y,function(t){m.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),s[t].apply(s,e)}});var w=["groupBy","countBy","sortBy"];s.each(w,function(t){m.prototype[t]=function(e,i){var n=s.isFunction(e)?e:function(t){return t.get(e)};return s[t](this.models,n,i)}});var b=Backbone.View=function(t){this.cid=s.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},C=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];s.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof Backbone.$?t:Backbone.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=s.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(s.isFunction(i)||(i=this[t[e]]),i){var n=e.match(C),r=n[1],o=n[2];i=s.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=s.extend({},s.result(this,"options"),t)),s.extend(this,s.pick(t,x)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t["class"]=s.result(this,"className"));var e=Backbone.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),Backbone.sync=function(t,e,i){var n=k[t];s.defaults(i||(i={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var r={type:n,dataType:"json"};if(i.url||(r.url=s.result(e,"url")||N()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",i.emulateJSON&&(r.data._method=n);var o=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",n),o?o.apply(this,arguments):void 0}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=Backbone.ajax(s.extend(r,i));return e.trigger("request",e,a,i),a};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var _=Backbone.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},M=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,S=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(_.prototype,a,{initialize:function(){},route:function(t,e,i){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(e)&&(i=e,e=""),i||(i=this[e]);var n=this;return Backbone.history.route(t,function(r){var o=n._extractParameters(t,r);i&&i.apply(n,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o),Backbone.history.trigger("route",n,e,o)}),this},navigate:function(t,e){return Backbone.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var t,e=s.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(L,"\\$&").replace(M,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(S,"(.*?)"),RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return s.map(i,function(t){return t?decodeURIComponent(t):null})}});var D=Backbone.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,E=/msie [\w.]+/,I=/\/$/;D.started=!1,s.extend(D.prototype,a,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(I,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(O,"")},start:function(t){if(D.started)throw Error("Backbone.history has already been started");D.started=!0,this.options=s.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,n=E.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(A,"/"),n&&this._wantsHashChange&&(this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;
var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(O,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),D.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!D.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),Backbone.history=new D;var H=function(t,e){var i,n=this;i=t&&s.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},s.extend(i,n,e);var r=function(){this.constructor=i};return r.prototype=n.prototype,i.prototype=new r,t&&s.extend(i.prototype,t),i.__super__=n.prototype,i};d.extend=m.extend=_.extend=b.extend=D.extend=H;var N=function(){throw Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}.call(this),Backbone.ChildViewContainer=function(Backbone,t){var e=function(t){this._views={},this._indexByModel={},this._indexByCollection={},this._indexByCustom={},this._updateLength(),this._addInitialViews(t)};t.extend(e.prototype,{add:function(t,e){var i=t.cid;this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),t.collection&&(this._indexByCollection[t.collection.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength()},findByModel:function(t){var e=this._indexByModel[t.cid];return this.findByCid(e)},findByCollection:function(t){var e=this._indexByCollection[t.cid];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(t){return this._views[t]},remove:function(t){var e=t.cid;t.model&&delete this._indexByModel[t.model.cid],t.collection&&delete this._indexByCollection[t.collection.cid];var i;for(var n in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(n)&&this._indexByCustom[n]===e){i=n;break}i&&delete this._indexByCustom[i],delete this._views[e],this._updateLength()},call:function(t,e){e=Array.prototype.slice.call(arguments,1),this.apply(t,e)},apply:function(e,i){i=i||[],t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i)})},_updateLength:function(){this.length=t.size(this._views)},_addInitialViews:function(t){if(t){var e,i,n=t.length;for(i=0;n>i;i++)e=t[i],this.add(e)}}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(i,function(i){e.prototype[i]=function(){var e=t.values(this._views),n=[e].concat(t.toArray(arguments));return t[i].apply(t,n)}}),e}(Backbone,_),Backbone.Wreqr=function(Backbone,t,e){"use strict";var i={};return i.Handlers=function(Backbone,t){var e=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return e.extend=Backbone.Model.extend,t.extend(e.prototype,Backbone.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e)throw Error("Handler not found for '"+t+"'");return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),e}(Backbone,e),i.CommandStorage=function(){var t=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(t.prototype,Backbone.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var i=this.getCommands(t);i.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),t}(),i.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,i)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,i,n){var r=this.storage.getCommands(t);e.each(r.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(i),i.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.getHandler(t).apply(this,e)}})}(i),i.EventAggregator=function(Backbone,t){var e=function(){};return e.extend=Backbone.Model.extend,t.extend(e.prototype,Backbone.Events),e}(Backbone,e),i}(Backbone,Backbone.Marionette,_);var Marionette=function(t,Backbone,e){"use strict";function i(t){return o.call(t)}function n(t,e){var i=Error(t);throw i.name=e||"Error",i}var r={};Backbone.Marionette=r,r.$=Backbone.$;var o=Array.prototype.slice;return r.extend=Backbone.Model.extend,r.getOption=function(t,e){if(t&&e){var i;return i=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},r.triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var i=/(^|:)(\w)/gi,n=function(n){var r="on"+n.replace(i,t),o=this[r];return this.trigger.apply(this,arguments),e.isFunction(o)?o.apply(this,e.tail(arguments)):void 0};return n}(),r.MonitorDOMRefresh=function(){function t(t){t._isShown=!0,n(t)}function i(t){t._isRendered=!0,n(t)}function n(t){t._isShown&&t._isRendered&&e.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}return function(e){e.listenTo(e,"show",function(){t(e)}),e.listenTo(e,"render",function(){i(e)})}}(),function(t){function i(t,i,r,o){var s=o.split(/\s+/);e.each(s,function(e){var o=t[e];o||n("Method '"+e+"' was configured as an event handler, but does not exist."),t.listenTo(i,r,o,t)})}function r(t,e,i,n){t.listenTo(e,i,n,t)}function o(t,i,n,r){var o=r.split(/\s+/);e.each(o,function(){var e=t[e];t.stopListening(i,n,e,t)})}function s(t,e,i,n){t.stopListening(e,i,n,t)}function a(t,i,n,r,o){i&&n&&(e.isFunction(n)&&(n=n.call(t)),e.each(n,function(n,s){e.isFunction(n)?r(t,i,s,n):o(t,i,s,n)}))}t.bindEntityEvents=function(t,e,n){a(t,e,n,r,i)},t.unbindEntityEvents=function(t,e,i){a(t,e,i,s,o)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},e.extend(r.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(i,n){e&&(i=e),t.call(i,n)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],e.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),r.Controller=function(t){this.triggerMethod=r.triggerMethod,this.options=t||{},e.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,e.extend(r.Controller.prototype,Backbone.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(t){if(this.options=t||{},this.el=r.getOption(this,"el"),!this.el){var e=Error("An 'el' must be specified for a region.");throw e.name="NoElError",e}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},e.extend(r.Region,{buildRegion:function(t,i){var n="string"==typeof t,r="string"==typeof t.selector,o=t.regionType===void 0,s="function"==typeof t;if(!s&&!n&&!r)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var a,l;n&&(a=t),t.selector&&(a=t.selector),s&&(l=t),!s&&o&&(l=i),t.regionType&&(l=t.regionType);var c=new l({el:a});return t.parentEl&&(c.getEl=function(i){var n=t.parentEl;return e.isFunction(n)&&(n=n()),n.find(i)}),c}}),e.extend(r.Region.prototype,Backbone.Events,{show:function(t){this.ensureEl(),t!==this.currentView?(this.close(),t.render(),this.open(t)):t.render(),r.triggerMethod.call(t,"show"),r.triggerMethod.call(this,"show",t),this.currentView=t},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return r.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),r.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(t){var i=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,i){var n={};return e.each(t,function(t,r){"string"==typeof t&&(t={selector:t}),t.selector&&(t=e.defaults({},t,i));var o=this.addRegion(r,t);n[r]=o},this),n},addRegion:function(i,n){var r,o=e.isObject(n),s=e.isString(n),a=!!n.selector;return r=s||o&&a?t.Region.buildRegion(n,t.Region):e.isFunction(n)?t.Region.buildRegion(n,t.Region):n,this._store(i,r),this.triggerMethod("region:add",i,r),r},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){e.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){e.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions();var e=Array.prototype.slice.call(arguments);t.Controller.prototype.close.apply(this,e)},_store:function(t,i){this._regions[t]=i,this.length=e.size(this._regions)},_remove:function(t,e){e.close(),delete this._regions[t],this.triggerMethod("region:remove",t,e)}}),n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._regions),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(r),r.TemplateCache=function(t){this.templateId=t},e.extend(r.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new r.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=i(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),e.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=r.$(t).html();return e&&0!==e.length||n("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return e.template(t)}}),r.Renderer={render:function(t,e){var i="function"==typeof t?t:r.TemplateCache.get(t);return i(e)}},r.View=Backbone.View.extend({constructor:function(){e.bindAll(this,"render");var t=Array.prototype.slice.apply(arguments);Backbone.View.prototype.constructor.apply(this,t),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var i=this.templateHelpers;return e.isFunction(i)&&(i=i.call(this)),e.extend(t,i)},configureTriggers:function(){if(this.triggers){var t={},i=e.result(this,"triggers");return e.each(i,function(e,i){t[i]=function(t){t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation();var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(e,i)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,e.isFunction(t)&&(t=t.call(this));var i={},n=this.configureTriggers();e.extend(i,t,n),Backbone.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);Backbone.View.prototype.undelegateEvents.apply(this,t),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=this.triggerMethod("before:close");t!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=e.result(this,"_uiBindings");this.ui={},e.each(e.keys(t),function(e){var i=t[e];this.ui[e]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&(e.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),i=r.Renderer.render(e,t);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),i=this.collection.indexOf(t);this.addItemView(t,e,i)},onShowCalled:function(){this.children.each(function(t){r.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getItemView(e),this.addItemView(e,t,i)},this)},showEmptyView:function(){var t=r.getOption(this,"emptyView");if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var e=new Backbone.Model;this.addItemView(e,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(){var t=r.getOption(this,"itemView");return t||n("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,i,n){var o=r.getOption(this,"itemViewOptions");e.isFunction(o)&&(o=o.call(this,t,n));var s=this.buildItemView(t,i,o);this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,n),this._isShown&&r.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s)},addChildViewEventForwarding:function(t){var e=r.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var n=i(arguments);n[0]=e+":"+n[0],n.splice(1,0,t),r.triggerMethod.apply(this,n)},this)},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,i,n){var r=e.extend({model:t},n);return new i(r)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(this.stopListening(t),t.close?t.close():t.remove&&t.remove(),this.children.remove(t)),this.triggerMethod("item:removed",t)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(t,e){t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new Backbone.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.apply(this,i(arguments)),this.itemView=this.getItemView()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(){var t=r.getOption(this,"itemView")||this.constructor;return t||n("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return r.Renderer.render(e,t)},appendHtml:function(t,e){var i=this.getItemViewContainer(t);i.append(e.el)},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var i;if(t.itemViewContainer){var r=e.result(t,"itemViewContainer");i=t.$(r),0>=i.length&&n("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else i=t.$el;return t.$itemViewContainer=i,i},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),r.ItemView.call(this,t)},render:function(){this._firstRender?this._firstRender=!1:this.isClosed?this._initializeRegions():this._reInitializeRegions();var t=Array.prototype.slice.apply(arguments),e=r.ItemView.prototype.render.apply(this,t);return e},close:function(){if(!this.isClosed){this.regionManager.close();var t=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,t)}},addRegion:function(t,e){var i={};return i[t]=e,this.addRegions(i)[t]},addRegions:function(t){return this.regions=e.extend(this.regions||{},t),this._buildRegions(t)},removeRegion:function(t){return this.regionManager.removeRegion(t)},_buildRegions:function(t){var e=this,i={parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,i)},_initializeRegions:function(t){var i;this._initRegionManager(),i=e.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(i)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),r.AppRouter=Backbone.Router.extend({constructor:function(t){if(Backbone.Router.prototype.constructor.apply(this,i(arguments)),this.options=t,this.appRoutes){var e=r.getOption(this,"controller");this.processAppRoutes(e,this.appRoutes)}},processAppRoutes:function(t,i){var n=e.keys(i).reverse();e.each(n,function(n){var r=i[n],o=t[r];if(!o)throw Error("Method '"+r+"' was not found on the controller");this.route(n,r,e.bind(o,t))},this)}}),r.Application=function(t){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new Backbone.Wreqr.EventAggregator,this.commands=new Backbone.Wreqr.Commands,this.reqres=new Backbone.Wreqr.RequestResponse,this.submodules={},e.extend(this,t),this.triggerMethod=r.triggerMethod},e.extend(r.Application.prototype,Backbone.Events,{execute:function(){var t=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,t)},request:function(){var t=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,t)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},removeRegion:function(t){this._regionManager.removeRegion(t)},module:function(){var t=i(arguments);return t.unshift(this),r.Module.create.apply(r.Module,t)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),r.Application.extend=r.extend,r.Module=function(t,e){this.moduleName=t,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=r.triggerMethod},e.extend(r.Module.prototype,Backbone.Events,{addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(e.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),e.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,i){if(t){var n=e.flatten([this,this.app,Backbone,r,r.$,e,i]);t.apply(this,n)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),e.extend(r.Module,{create:function(t,n,r){var o=t,s=i(arguments);s.splice(0,3),n=n.split(".");var a=n.length,l=[];return l[a-1]=r,e.each(n,function(e,i){var n=o;o=this._getModule(n,e,t),this._addModuleDefinition(n,o,l[i],s)},this),o},_getModule:function(t,e,i){var n=t[e];return n||(n=new r.Module(e,i),t[e]=n,t.submodules[e]=n),n},_addModuleDefinition:function(t,i,n,r){var o,s;e.isFunction(n)?(o=n,s=!0):e.isObject(n)?(o=n.define,s=n.startWithParent):s=!0,o&&i.addDefinition(o,r),i.startWithParent=i.startWithParent&&s,i.startWithParent&&!i.startWithParentIsConfigured&&(i.startWithParentIsConfigured=!0,t.addInitializer(function(t){i.startWithParent&&i.start(t)}))}}),r}(this,Backbone,_);(function(t){function e(t,e){return function(i){return l(t.call(this,i),e)}}function i(t){return function(e){return this.lang().ordinal(t.call(this,e))}}function n(){}function r(t){s(this,t)}function o(t){var e=this._data={},i=t.years||t.year||t.y||0,n=t.months||t.month||t.M||0,r=t.weeks||t.week||t.w||0,o=t.days||t.day||t.d||0,s=t.hours||t.hour||t.h||0,l=t.minutes||t.minute||t.m||0,c=t.seconds||t.second||t.s||0,u=t.milliseconds||t.millisecond||t.ms||0;this._milliseconds=u+1e3*c+6e4*l+36e5*s,this._days=o+7*r,this._months=n+12*i,e.milliseconds=u%1e3,c+=a(u/1e3),e.seconds=c%60,l+=a(c/60),e.minutes=l%60,s+=a(l/60),e.hours=s%24,o+=a(s/24),o+=7*r,e.days=o%30,n+=a(o/30),e.months=n%12,i+=a(n/12),e.years=i}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function l(t,e){for(var i=t+"";e>i.length;)i="0"+i;return i}function c(t,e,i){var n,r=e._milliseconds,o=e._days,s=e._months;r&&t._d.setTime(+t+r*i),o&&t.date(t.date()+o*i),s&&(n=t.date(),t.date(1).month(t.month()+s*i).date(Math.min(n,t.daysInMonth())))}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t,e){var i,n=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;n>i;i++)~~t[i]!==~~e[i]&&o++;return o+r}function d(t,e){return e.abbr=t,N[t]||(N[t]=new n),N[t].set(e),N[t]}function f(t){return t?(!N[t]&&F&&require("./lang/"+t),N[t]):A.fn._lang}function p(t){return t.match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function m(t){var e,i,n=t.match(P);for(e=0,i=n.length;i>e;e++)n[e]=re[n[e]]?re[n[e]]:p(n[e]);return function(r){var o="";for(e=0;i>e;e++)o+="function"==typeof n[e].call?n[e].call(r,t):n[e];return o}}function g(t,e){function i(e){return t.lang().longDateFormat(e)||e}for(var n=5;n--&&z.test(e);)e=e.replace(z,i);return ee[e]||(ee[e]=m(e)),ee[e](t)}function v(t){switch(t){case"DDDD":return W;case"YYYY":return V;case"YYYYY":return Y;case"S":case"SS":case"SSS":case"DDD":return U;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return B;case"X":return G;case"Z":case"ZZ":return j;case"T":return q;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return R;default:return RegExp(t.replace("\\",""))}}function y(t,e,i){var n,r=i._a;switch(t){case"M":case"MM":r[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":n=f(i._l).monthsParse(e),null!=n?r[1]=n:i._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(r[2]=~~e);break;case"YY":r[0]=~~e+(~~e>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~e;break;case"a":case"A":i._isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~e;break;case"m":case"mm":r[4]=~~e;break;case"s":case"ss":r[5]=~~e;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,n=(e+"").match(Z),n&&n[1]&&(i._tzh=~~n[1]),n&&n[2]&&(i._tzm=~~n[2]),n&&"+"===n[0]&&(i._tzh=-i._tzh,i._tzm=-i._tzm)}null==e&&(i._isValid=!1)}function w(t){var e,i,n=[];if(!t._d){for(e=0;7>e;e++)t._a[e]=n[e]=null==t._a[e]?2===e?1:0:t._a[e];n[3]+=t._tzh||0,n[4]+=t._tzm||0,i=new Date(0),t._useUTC?(i.setUTCFullYear(n[0],n[1],n[2]),i.setUTCHours(n[3],n[4],n[5],n[6])):(i.setFullYear(n[0],n[1],n[2]),i.setHours(n[3],n[4],n[5],n[6])),t._d=i}}function b(t){var e,i,n=t._f.match(P),r=t._i;for(t._a=[],e=0;n.length>e;e++)i=(v(n[e]).exec(r)||[])[0],i&&(r=r.slice(r.indexOf(i)+i.length)),re[n[e]]&&y(n[e],i,t);t._isPm&&12>t._a[3]&&(t._a[3]+=12),t._isPm===!1&&12===t._a[3]&&(t._a[3]=0),w(t)}function C(t){for(var e,i,n,o,a=99;t._f.length;){if(e=s({},t),e._f=t._f.pop(),b(e),i=new r(e),i.isValid()){n=i;break}o=h(e._a,i.toArray()),a>o&&(a=o,n=i)}s(t,n)}function x(t){var e,i=t._i;if(K.exec(i)){for(t._f="YYYY-MM-DDT",e=0;4>e;e++)if(J[e][1].exec(i)){t._f+=J[e][0];break}j.exec(i)&&(t._f+=" Z"),b(t)}else t._d=new Date(i)}function k(e){var i=e._i,n=$.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?x(e):u(i)?(e._a=i.slice(0),w(e)):e._d=i instanceof Date?new Date(+i):new Date(i)}function _(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function M(t,e,i){var n=H(Math.abs(t)/1e3),r=H(n/60),o=H(r/60),s=H(o/24),a=H(s/365),l=45>n&&["s",n]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",H(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,_.apply({},l)}function T(t,e,i){var n=i-e,r=i-t.day();return r>n&&(r-=7),n-7>r&&(r+=7),Math.ceil(A(t).add("d",r).dayOfYear()/7)}function S(t){var e=t._i,i=t._f;return null===e||""===e?null:("string"==typeof e&&(t._i=e=f().preparse(e)),A.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):i?u(i)?C(t):b(t):k(t),new r(t))}function L(t,e){A.fn[t]=A.fn[t+"s"]=function(t){var i=this._isUTC?"UTC":"";return null!=t?(this._d["set"+i+e](t),this):this._d["get"+i+e]()}}function D(t){A.duration.fn[t]=function(){return this._data[t]}}function O(t,e){A.duration.fn["as"+t]=function(){return+this/e}}for(var A,E,I="2.0.0",H=Math.round,N={},F="undefined"!=typeof module&&module.exports,$=/^\/?Date\((\-?\d+)/i,P=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,R=/\d\d?/,U=/\d{1,3}/,W=/\d{3}/,V=/\d{1,4}/,Y=/[+\-]?\d{1,6}/,B=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,j=/Z|[\+\-]\d\d:?\d\d/i,q=/T/i,G=/[\+\-]?\d+(\.\d{1,3})?/,K=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,X="YYYY-MM-DDTHH:mm:ssZ",J=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Z=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),te={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ee={},ie="DDD w W M D d".split(" "),ne="M D H h m s w W".split(" "),re={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()
},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(t/60),2)+":"+l(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+l(~~(10*t/6),4)},X:function(){return this.unix()}};ie.length;)E=ie.pop(),re[E+"o"]=i(re[E]);for(;ne.length;)E=ne.pop(),re[E+E]=e(re[E],2);for(re.DDDD=e(re.DDD,3),n.prototype={set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=A([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(t,e,i,n):r.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return T(t,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},A=function(t,e,i){return S({_i:t,_f:e,_l:i,_isUTC:!1})},A.utc=function(t,e,i){return S({_useUTC:!0,_isUTC:!0,_l:i,_i:t,_f:e})},A.unix=function(t){return A(1e3*t)},A.duration=function(t,e){var i,n=A.isDuration(t),r="number"==typeof t,s=n?t._data:r?{}:t;return r&&(e?s[e]=t:s.milliseconds=t),i=new o(s),n&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},A.version=I,A.defaultFormat=X,A.lang=function(e,i){return e?(i?d(e,i):N[e]||f(e),A.duration.fn._lang=A.fn._lang=f(e),t):A.fn._lang._abbr},A.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),f(t)},A.isMoment=function(t){return t instanceof r},A.isDuration=function(t){return t instanceof o},A.fn=r.prototype={clone:function(){return A(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return A.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!h(this._a,(this._isUTC?A.utc(this._a):A(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){var e=g(this,t||A.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?A.duration(+e,t):A.duration(t,e),c(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?A.duration(+e,t):A.duration(t,e),c(this,i,-1),this},diff:function(t,e,i){var n,r,o=this._isUTC?A(t).utc():A(t).local(),s=6e4*(this.zone()-o.zone());return e&&(e=e.replace(/s$/,"")),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-A(this).startOf("month")-(o-A(o).startOf("month")))/n,"year"===e&&(r/=12)):(n=this-o-s,r="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?n/864e5:"week"===e?n/6048e5:n),i?r:a(r)},from:function(t,e){return A.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(A(),t)},calendar:function(){var t=this.diff(A().startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){var t=this.year();return 0===t%4&&0!==t%100||0===t%400},isDST:function(){return this.zone()<A([this.year()]).zone()||this.zone()<A([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t=t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.day(0),this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,i){return i=i!==t?i:"millisecond",+this.clone().startOf(i)>+A(e).startOf(i)},isBefore:function(e,i){return i=i!==t?i:"millisecond",+this.clone().startOf(i)<+A(e).startOf(i)},isSame:function(e,i){return i=i!==t?i:"millisecond",+this.clone().startOf(i)===+A(e).startOf(i)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return A.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(t){var e=H((A(this).startOf("day")-A(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},isoWeek:function(t){var e=T(this,1,4);return null==t?e:this.add("d",7*(t-e))},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},lang:function(e){return e===t?this._lang:(this._lang=f(e),this)}},E=0;Q.length>E;E++)L(Q[E].toLowerCase().replace(/s$/,""),Q[E]);L("year","FullYear"),A.fn.days=A.fn.day,A.fn.weeks=A.fn.week,A.fn.isoWeeks=A.fn.isoWeek,A.duration.fn=o.prototype={weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e=+this,i=M(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},lang:A.fn.lang};for(E in te)te.hasOwnProperty(E)&&(O(E,te[E]),D(E.toLowerCase()));O("Weeks",6048e5),A.lang("en",{ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),F&&(module.exports=A),"undefined"==typeof ender&&(this.moment=A),"function"==typeof define&&define.amd&&define("moment",[],function(){return A})}).call(this),function(t){function e(t){this.init(t)}function i(t,e){e=e||t.getCursor("start");var i=t.getTokenAt(e);if(!i.type)return{};for(var n,r,o=i.type.split(" "),s={},a=0;o.length>a;a++)n=o[a],"strong"===n?s.bold=!0:"variable-2"===n?(r=t.getLine(e.line),/^\s*\d+\.\s/.test(r)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===n?s.quote=!0:"em"===n&&(s.italic=!0);return s}function n(t){return t=l?t.replace("Ctrl","Cmd"):t.replace("Cmd","Ctrl")}function r(t){var e=document,i=e.fullScreen||e.mozFullScreen||e.webkitFullScreen,n=function(){t.requestFullScreen?t.requestFullScreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)},r=function(){e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()};i?r&&r():n()}var o=function(){"use strict";function t(i,n){if(!(this instanceof t))return new t(i,n);this.options=n=n||{};for(var r in jr)!n.hasOwnProperty(r)&&jr.hasOwnProperty(r)&&(n[r]=jr[r]);d(n);var o="string"==typeof n.value?0:n.value.first,s=this.display=e(i,o);s.wrapper.CodeMirror=this,c(this),n.autofocus&&!Lr&&ce(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Rn},a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var l=n.value;"string"==typeof l&&(l=new ro(n.value,n.mode)),ee(this,ln)(this,l),mr&&setTimeout(Kn(le,this,!0),20),he(this);var u;try{u=document.activeElement==s.input}catch(h){}u||n.autofocus&&!Lr?setTimeout(Kn(Se,this),20):Le(this),ee(this,function(){for(var t in Br)Br.propertyIsEnumerable(t)&&Br[t](this,n[t],qr);for(var e=0;Jr.length>e;++e)Jr[e](this)})()}function e(t,e){var i={},n=i.input=Zn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");yr?n.style.width="1000px":n.setAttribute("wrap","off"),Sr&&(n.style.border="1px solid black"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),i.inputDiv=Zn("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),i.scrollbarH=Zn("div",[Zn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),i.scrollbarV=Zn("div",[Zn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),i.scrollbarFiller=Zn("div",null,"CodeMirror-scrollbar-filler"),i.lineDiv=Zn("div"),i.selectionDiv=Zn("div",null,null,"position: relative; z-index: 1"),i.cursor=Zn("div","","CodeMirror-cursor"),i.otherCursor=Zn("div","","CodeMirror-cursor CodeMirror-secondarycursor"),i.measure=Zn("div",null,"CodeMirror-measure"),i.lineSpace=Zn("div",[i.measure,i.selectionDiv,i.lineDiv,i.cursor,i.otherCursor],null,"position: relative; outline: none"),i.mover=Zn("div",[Zn("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=Zn("div",[i.mover],"CodeMirror-sizer"),i.heightForcer=Zn("div",null,null,"position: absolute; height: "+co+"px; width: 1px;"),i.gutters=Zn("div",null,"CodeMirror-gutters"),i.lineGutter=null;var r=Zn("div",[i.sizer,i.heightForcer,i.gutters],null,"position: relative; min-height: 100%");return i.scroller=Zn("div",[r],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=Zn("div",[i.inputDiv,i.scrollbarH,i.scrollbarV,i.scrollbarFiller,i.scroller],"CodeMirror"),gr&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),t.appendChild?t.appendChild(i.wrapper):t(i.wrapper),Sr&&(n.style.width="0px"),yr||(i.scroller.draggable=!0),kr?(i.inputDiv.style.height="1px",i.inputDiv.style.position="absolute"):gr&&(i.scrollbarH.style.minWidth=i.scrollbarV.style.minWidth="18px"),i.viewOffset=i.lastSizeC=0,i.showingFrom=i.showingTo=e,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.prevInput="",i.alignWidgets=!1,i.pollingFast=!1,i.poll=new Rn,i.cachedCharWidth=i.cachedTextHeight=null,i.measureLineCache=[],i.measureLineCachePos=0,i.inaccurateSelection=!1,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i}function i(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.frontier=e.doc.first,A(e,100),e.state.modeGen++,e.curOp&&re(e)}function n(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),h(t)),o(t),re(t),V(t),setTimeout(function(){f(t.display,t.doc.height)},100)}function r(t){var e=J(t.display),i=t.options.lineWrapping,n=i&&Math.max(5,t.display.scroller.clientWidth/Z(t.display)-3);return function(r){return Fi(t.doc,r)?0:i?(Math.ceil(r.text.length/n)||1)*e:e}}function o(t){var e=t.doc,i=r(t);e.iter(function(t){var e=i(t);e!=t.height&&dn(t,e)})}function s(t){var e=Qr[t.options.keyMap].style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function a(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),V(t)}function l(t){c(t),re(t)}function c(t){var e=t.display.gutters,i=t.options.gutters;Qn(e);for(var n=0;i.length>n;++n){var r=i[n],o=e.appendChild(Zn("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none"}function u(t,e){if(0==e.height)return 0;for(var i,n=e.text.length,r=e;i=Ii(r);){var o=i.find();r=cn(t,o.from.line),n+=o.from.ch-o.to.ch}for(r=e;i=Hi(r);){var o=i.find();n-=r.text.length-o.from.ch,r=cn(t,o.to.line),n+=r.text.length-o.to.ch}return n}function h(t){var e=t.display,i=t.doc;e.maxLine=cn(i,i.first),e.maxLineLength=u(i,e.maxLine),e.maxLineChanged=!0,i.iter(function(t){var n=u(i,t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function d(t){for(var e=!1,i=0;t.gutters.length>i;++i)"CodeMirror-linenumbers"==t.gutters[i]&&(t.lineNumbers?e=!0:t.gutters.splice(i--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function f(t,e){var i=e+F(t);t.sizer.style.minHeight=t.heightForcer.style.top=i+"px";var n=Math.max(i,t.scroller.scrollHeight),r=t.scroller.scrollWidth>t.scroller.clientWidth,o=n>t.scroller.clientHeight;o?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=r?nr(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=n-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):t.scrollbarV.style.display="",r?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=o?nr(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):t.scrollbarH.style.display="",r&&o?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=nr(t.measure)+"px"):t.scrollbarFiller.style.display="",_r&&0===nr(t.measure)&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=Mr?"18px":"12px")}function p(t,e,i){var n=t.scroller.scrollTop,r=t.wrapper.clientHeight;"number"==typeof i?n=i:i&&(n=i.top,r=i.bottom-i.top),n=Math.floor(n-N(t));var o=Math.ceil(n+r);return{from:pn(e,n),to:pn(e,o)}}function m(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=y(e)-e.scroller.scrollLeft+t.doc.scrollLeft,n=e.gutters.offsetWidth,r=i+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var s=0,a=o.alignable;a.length>s;++s)a[s].style.left=r;t.options.fixedGutter&&(e.gutters.style.left=i+n+"px")}}function g(t){if(!t.options.lineNumbers)return!1;var e=t.doc,i=v(t.options,e.first+e.size-1),n=t.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(Zn("div",[Zn("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,s=r.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-s),n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",!0}return!1}function v(t,e){return t.lineNumberFormatter(e+t.firstLineNumber)+""}function y(t){return ir(t.scroller).left-ir(t.sizer).left}function w(t,e,i){for(var n,r=t.display.showingFrom,o=t.display.showingTo,s=p(t.display,t.doc,i);b(t,e,s)&&(n=!0,$n(t,"update",t),(t.display.showingFrom!=r||t.display.showingTo!=o)&&$n(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo),S(t),f(t.display,t.doc.height),i&&(i=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof i?i:i.top)),s=p(t.display,t.doc,i),!(s.from>=t.display.showingFrom&&s.to<=t.display.showingTo));)e=[];return n}function b(t,e,i){var n=t.display,r=t.doc;if(!n.wrapper.clientWidth)return n.showingFrom=n.showingTo=r.first,n.viewOffset=0,void 0;if(!(0==e.length&&i.from>n.showingFrom&&i.to<n.showingTo)){g(t)&&(e=[{from:r.first,to:r.first+r.size}]);var o=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px";n.scrollbarH.style.left=t.options.fixedGutter?o:"0";var s=1/0;if(t.options.lineNumbers)for(var a=0;e.length>a;++a)if(e[a].diff){s=e[a].from;break}var l=r.first+r.size,c=Math.max(i.from-t.options.viewportMargin,r.first),u=Math.min(l,i.to+t.options.viewportMargin);if(c>n.showingFrom&&20>c-n.showingFrom&&(c=Math.max(r.first,n.showingFrom)),n.showingTo>u&&20>n.showingTo-u&&(u=Math.min(l,n.showingTo)),Pr)for(c=fn(Ni(r,cn(r,c)));l>u&&Fi(r,cn(r,u));)++u;var h=[{from:Math.max(n.showingFrom,r.first),to:Math.min(n.showingTo,l)}];if(h=h[0].from>=h[0].to?[]:x(h,e),Pr)for(var a=0;h.length>a;++a)for(var d,f=h[a];d=Hi(cn(r,f.to-1));){var p=d.find().from.line;if(!(p>f.from)){h.splice(a--,1);break}f.to=p}for(var m=0,a=0;h.length>a;++a){var f=h[a];c>f.from&&(f.from=c),f.to>u&&(f.to=u),f.from>=f.to?h.splice(a--,1):m+=f.to-f.from}if(m==u-c&&c==n.showingFrom&&u==n.showingTo)return C(t),void 0;h.sort(function(t,e){return t.from-e.from});try{var v=document.activeElement}catch(y){}.7*(u-c)>m&&(n.lineDiv.style.display="none"),_(t,c,u,h,s),n.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();var w=c!=n.showingFrom||u!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight;w&&(n.lastSizeC=n.wrapper.clientHeight),n.showingFrom=c,n.showingTo=u,A(t,100);for(var b,k=n.lineDiv.offsetTop,M=n.lineDiv.firstChild;M;M=M.nextSibling)if(M.lineObj){if(gr){var T=M.offsetTop+M.offsetHeight;b=T-k,k=T}else{var S=ir(M);b=S.bottom-S.top}var L=M.lineObj.height-b;if(2>b&&(b=J(n)),L>.001||-.001>L){dn(M.lineObj,b);var D=M.lineObj.widgets;if(D)for(var a=0;D.length>a;++a)D[a].height=D[a].node.offsetHeight}}return C(t),!0}}function C(t){var e=t.display.viewOffset=mn(t,cn(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function x(t,e){for(var i=0,n=e.length||0;n>i;++i){for(var r=e[i],o=[],s=r.diff||0,a=0,l=t.length;l>a;++a){var c=t[a];r.to<=c.from&&r.diff?o.push({from:c.from+s,to:c.to+s}):r.to<=c.from||r.from>=c.to?o.push(c):(r.from>c.from&&o.push({from:c.from,to:r.from}),r.to<c.to&&o.push({from:r.to+s,to:c.to+s}))}t=o}return t}function k(t){for(var e=t.display,i={},n={},r=e.gutters.firstChild,o=0;r;r=r.nextSibling,++o)i[t.options.gutters[o]]=r.offsetLeft,n[t.options.gutters[o]]=r.offsetWidth;return{fixedPos:y(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function _(t,e,i,n,r){function o(e){var i=e.nextSibling;return yr&&Dr&&t.display.currentWheelTarget==e?(e.style.display="none",e.lineObj=null):e.parentNode.removeChild(e),i}var s=k(t),a=t.display,l=t.options.lineNumbers;n.length||yr&&t.display.currentWheelTarget||Qn(a.lineDiv);var c=a.lineDiv,u=c.firstChild,h=n.shift(),d=e;for(t.doc.iter(e,i,function(e){if(h&&h.to==d&&(h=n.shift()),Fi(t.doc,e)){if(0!=e.height&&dn(e,0),e.widgets&&u.previousSibling)for(var i=0;e.widgets.length>i;++i)if(e.widgets[i].showIfHidden){var a=u.previousSibling;if(/pre/i.test(a.nodeName)){var f=Zn("div",null,null,"position: relative");a.parentNode.replaceChild(f,a),f.appendChild(a),a=f}var p=a.appendChild(Zn("div",[e.widgets[i].node],"CodeMirror-linewidget"));T(e.widgets[i],p,a,s)}}else if(h&&d>=h.from&&h.to>d){for(;u.lineObj!=e;)u=o(u);l&&d>=r&&u.lineNumber&&er(u.lineNumber,v(t.options,d)),u=u.nextSibling}else{if(e.widgets)for(var m,g=0,y=u;y&&20>g;++g,y=y.nextSibling)if(y.lineObj==e&&/div/i.test(y.nodeName)){m=y;break}var w=M(t,e,d,s,m);if(w!=m)c.insertBefore(w,u);else{for(;u!=m;)u=o(u);u=u.nextSibling}w.lineObj=e}++d});u;)u=o(u)}function M(t,e,i,n,r){var o,s=Ji(t,e),a=e.gutterMarkers,l=t.display;if(!(t.options.lineNumbers||a||e.bgClass||e.wrapClass||e.widgets))return s;if(r){r.alignable=null;for(var c,u=!0,h=0,d=r.firstChild;d;d=c)if(c=d.nextSibling,/\bCodeMirror-linewidget\b/.test(d.className)){for(var f=0,p=!0;e.widgets.length>f;++f){var m=e.widgets[f],g=!1;if(m.above||(g=p,p=!1),m.node==d.firstChild){T(m,d,r,n),++h,g&&r.insertBefore(s,d);break}}if(f==e.widgets.length){u=!1;break}}else r.removeChild(d);u&&h==e.widgets.length&&(o=r,r.className=e.wrapClass||"")}if(o||(o=Zn("div",null,e.wrapClass,"position: relative"),o.appendChild(s)),e.bgClass&&o.insertBefore(Zn("div",null,e.bgClass+" CodeMirror-linebackground"),o.firstChild),t.options.lineNumbers||a){var y=o.insertBefore(Zn("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(y),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(o.lineNumber=y.appendChild(Zn("div",v(t.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+l.lineNumInnerWidth+"px"))),a)for(var w=0;t.options.gutters.length>w;++w){var b=t.options.gutters[w],C=a.hasOwnProperty(b)&&a[b];C&&y.appendChild(Zn("div",[C],"CodeMirror-gutter-elt","left: "+n.gutterLeft[b]+"px; width: "+n.gutterWidth[b]+"px"))}}if(gr&&(o.style.zIndex=2),e.widgets&&o!=r)for(var f=0,x=e.widgets;x.length>f;++f){var m=x[f],k=Zn("div",[m.node],"CodeMirror-linewidget");T(m,k,o,n),m.above?o.insertBefore(k,t.options.lineNumbers&&0!=e.height?y:s):o.appendChild(k),$n(m,"redraw")}return o}function T(t,e,i,n){if(t.noHScroll){(i.alignable||(i.alignable=[])).push(e);var r=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function S(t){var e=t.display,i=We(t.doc.sel.from,t.doc.sel.to);if(i||t.options.showCursorWhenSelecting?L(t):e.cursor.style.display=e.otherCursor.style.display="none",i?e.selectionDiv.style.display="none":D(t),t.options.moveInputWithCursor){var n=q(t,t.doc.sel.head,"div"),r=ir(e.wrapper),o=ir(e.lineDiv);e.inputDiv.style.top=Math.max(0,Math.min(e.wrapper.clientHeight-10,n.top+o.top-r.top))+"px",e.inputDiv.style.left=Math.max(0,Math.min(e.wrapper.clientWidth-10,n.left+o.left-r.left))+"px"}}function L(t){var e=t.display,i=q(t,t.doc.sel.head,"div");e.cursor.style.left=i.left+"px",e.cursor.style.top=i.top+"px",e.cursor.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",e.cursor.style.display="",i.other?(e.otherCursor.style.display="",e.otherCursor.style.left=i.other.left+"px",e.otherCursor.style.top=i.other.top+"px",e.otherCursor.style.height=.85*(i.other.bottom-i.other.top)+"px"):e.otherCursor.style.display="none"}function D(t){function e(t,e,i,n){0>e&&(e=0),s.appendChild(Zn("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==i?a-t:i)+"px; height: "+(n-e)+"px"))}function i(i,n,o,s){function c(e){return j(t,Ue(i,e),"div",u)}var u=cn(r,i),h=u.text.length,d=s?1/0:-1/0;return or(gn(u),n||0,null==o?h:o,function(t,i,r){var u,f,p,m=c(t);if(t==i)u=m,f=p=m.left;else{if(u=c(i-1),"rtl"==r){var g=m;m=u,u=g}f=m.left,p=u.right}u.top-m.top>3&&(e(f,m.top,null,m.bottom),f=l,m.bottom<u.top&&e(f,m.bottom,null,u.top)),null==o&&i==h&&(p=a),null==n&&0==t&&(f=l),d=s?Math.min(u.top,d):Math.max(u.bottom,d),l+1>f&&(f=l),e(f,u.top,p-f,u.bottom)}),d}var n=t.display,r=t.doc,o=t.doc.sel,s=document.createDocumentFragment(),a=n.lineSpace.offsetWidth,l=$(t.display);if(o.from.line==o.to.line)i(o.from.line,o.from.ch,o.to.ch);else{for(var c,u,h=cn(r,o.from.line),d=h,f=[o.from.line,o.from.ch];c=Hi(d);){var p=c.find();if(f.push(p.from.ch,p.to.line,p.to.ch),p.to.line==o.to.line){f.push(o.to.ch),u=!0;break}d=cn(r,p.to.line)}if(u)for(var m=0;f.length>m;m+=3)i(f[m],f[m+1],f[m+2]);else{var g,v,y=cn(r,o.to.line);g=o.from.ch?i(o.from.line,o.from.ch,null,!1):mn(t,h)-n.viewOffset,v=o.to.ch?i(o.to.line,Ii(y)?null:0,o.to.ch,!0):mn(t,y)-n.viewOffset,v>g&&e(l,g,null,v)}}tr(n.selectionDiv,s),n.selectionDiv.style.display=""}function O(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var i=!0;e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(i=!i)?"":"hidden"},t.options.cursorBlinkRate)}}function A(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,Kn(E,t))}function E(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.showingTo)){var i,n=+new Date+t.options.workTime,r=fi(e.mode,H(t,e.frontier)),o=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.showingTo+500),function(s){if(e.frontier>=t.display.showingFrom){var a=s.styles;s.styles=qi(t,s,r);for(var l=!a||a.length!=s.styles.length,c=0;!l&&a.length>c;++c)l=a[c]!=s.styles[c];l&&(i&&i.end==e.frontier?i.end++:o.push(i={start:e.frontier,end:e.frontier+1})),s.stateAfter=fi(e.mode,r)}else Ki(t,s,r),s.stateAfter=0==e.frontier%5?fi(e.mode,r):null;return++e.frontier,+new Date>n?(A(t,t.options.workDelay),!0):void 0}),o.length&&ee(t,function(){for(var t=0;o.length>t;++t)re(this,o[t].start,o[t].end)})()}}function I(t,e){for(var i,n,r=t.doc,o=e,s=e-100;o>s;--o){if(r.first>=o)return r.first;var a=cn(r,o-1);if(a.stateAfter)return o;var l=Un(a.text,null,t.options.tabSize);(null==n||i>l)&&(n=o-1,i=l)}return n}function H(t,e){var i=t.doc,n=t.display;if(!i.mode.startState)return!0;var r=I(t,e),o=r>i.first&&cn(i,r-1).stateAfter;return o=o?fi(i.mode,o):pi(i.mode),i.iter(r,e,function(s){Ki(t,s,o);var a=r==e-1||0==r%5||r>=n.showingFrom&&n.showingTo>r;s.stateAfter=a?fi(i.mode,o):null,++r}),o}function N(t){return t.lineSpace.offsetTop}function F(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function $(t){var e=tr(t.measure,Zn("pre",null,null,"text-align: left")).appendChild(Zn("span","x"));return e.offsetLeft}function P(t,e,i,n){var r=-1;n=n||R(t,e);for(var o=i;;o+=r){var s=n[o];if(s)break;0>r&&0==o&&(r=1)}return{left:i>o?s.right:s.left,right:o>i?s.left:s.right,top:s.top,bottom:s.bottom}}function z(t,e){for(var i=t.display.measureLineCache,n=0;i.length>n;++n){var r=i[n];if(r.text==e.text&&r.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==r.width&&r.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return r.measure}}function R(t,e){var i=z(t,e);if(!i){i=U(t,e);var n=t.display.measureLineCache,r={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:i,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass};16==n.length?n[++t.display.measureLineCachePos%16]=r:n.push(r)}return i}function U(t,e){var i=t.display,n=Gn(e.text.length),r=Ji(t,e,n);if(mr&&!gr&&!t.options.lineWrapping&&r.childNodes.length>100){for(var o=document.createDocumentFragment(),s=10,a=r.childNodes.length,l=0,c=Math.ceil(a/s);c>l;++l){for(var u=Zn("div",null,null,"display: inline-block"),h=0;s>h&&a;++h)u.appendChild(r.firstChild),--a;o.appendChild(u)}r.appendChild(o)}tr(i.measure,r);var d=ir(i.lineDiv),f=[],p=Gn(e.text.length),m=r.offsetHeight;vr&&i.measure.first!=r&&tr(i.measure,r);for(var g,l=0;n.length>l;++l)if(g=n[l]){for(var v=ir(g),y=Math.max(0,v.top-d.top),w=Math.min(v.bottom-d.top,m),h=0;f.length>h;h+=2){var b=f[h],C=f[h+1];if(!(b>w||y>C)&&(y>=b&&C>=w||b>=y&&w>=C||Math.min(w,C)-Math.max(y,b)>=w-y>>1)){f[h]=Math.min(y,b),f[h+1]=Math.max(w,C);break}}h==f.length&&f.push(y,w);var x=v.right;g.measureRight&&(x=ir(g.measureRight).left),p[l]={left:v.left-d.left,right:x-d.left,top:h}}for(var g,l=0;p.length>l;++l)if(g=p[l]){var k=g.top;g.top=f[k],g.bottom=f[k+1]}return p}function W(t,e){var i=!1;if(e.markedSpans)for(var n=0;e.markedSpans>n;++n){var r=e.markedSpans[n];!r.collapsed||null!=r.to&&r.to!=e.text.length||(i=!0)}var o=!i&&z(t,e);if(o)return P(t,e,e.text.length,o).right;var s=Ji(t,e),a=s.appendChild(rr(t.display.measure));return tr(t.display.measure,s),ir(a).right-ir(t.display.lineDiv).left}function V(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Y(t,e,i,n){if(e.widgets)for(var r=0;e.widgets.length>r;++r)if(e.widgets[r].above){var o=Ui(e.widgets[r]);i.top+=o,i.bottom+=o}if("line"==n)return i;n||(n="local");var s=mn(t,e);if("local"!=n&&(s-=t.display.viewOffset),"page"==n){var a=ir(t.display.lineSpace);s+=a.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var l=a.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);i.left+=l,i.right+=l}return i.top+=s,i.bottom+=s,i}function B(t,e,i){if("div"==i)return e;var n=e.left,r=e.top;"page"==i&&(n-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,r-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var o=ir(t.display.lineSpace);if(n-=o.left,r-=o.top,"local"==i||!i){var s=ir(t.display.wrapper);n+=s.left,r+=s.top}return{left:n,top:r}}function j(t,e,i,n){return n||(n=cn(t.doc,e.line)),Y(t,n,P(t,n,e.ch),i)}function q(t,e,i,n,r){function o(e,o){var s=P(t,n,e,r);return o?s.left=s.right:s.right=s.left,Y(t,n,s,i)}n=n||cn(t.doc,e.line),r||(r=R(t,n));var s=gn(n),a=e.ch;if(!s)return o(a);for(var l,c,u=s[0].level,h=0;s.length>h;++h){var d,f,p=s[h],m=p.level%2;if(a>p.from&&p.to>a)return o(a,m);var g=m?p.to:p.from,v=m?p.from:p.to;if(g==a)f=h&&p.level<(d=s[h-1]).level?o(d.level%2?d.from:d.to-1,!0):o(m&&p.from!=p.to?a-1:a),m==u?l=f:c=f;else if(v==a){var d=s.length-1>h&&s[h+1];if(!m&&d&&d.from==d.to)continue;f=d&&p.level<d.level?o(d.level%2?d.to-1:d.from):o(m?a:a-1,!0),m==u?l=f:c=f}}return u&&!a&&(c=o(s[0].to-1)),l?(c&&(l.other=c),l):c}function G(t,e,i){var n=new Ue(t,e);return i&&(n.outside=!0),n}function K(t,e,i){var n=t.doc;if(i+=t.display.viewOffset,0>i)return G(n.first,0,!0);var r=pn(n,i),o=n.first+n.size-1;if(r>o)return G(n.first+n.size-1,cn(n,o).text.length,!0);for(0>e&&(e=0);;){var s=cn(n,r),a=X(t,s,r,e,i),l=Hi(s),c=l&&l.find();if(!(l&&a.ch>=c.from.ch))return a;r=c.to.line}}function X(t,e,i,n,r){function o(n){var r=q(t,Ue(i,n),"line",e,c);return a=!0,s>r.bottom?r.left-l:r.top>s?r.left+l:(a=!1,r.left)}var s=r-mn(t,e),a=!1,l=2*t.display.wrapper.clientWidth,c=R(t,e),u=gn(e),h=e.text.length,d=lr(e),f=cr(e),p=o(d),m=a,g=o(f),v=a;if(n>g)return G(i,f,v);for(;;){if(u?f==d||f==dr(e,d,1):1>=f-d){for(var y=g-n>n-p,w=y?d:f;po.test(e.text.charAt(w));)++w;var b=G(i,w,y?m:v);return b.after=y,b}var C=Math.ceil(h/2),x=d+C;if(u){x=d;for(var k=0;C>k;++k)x=dr(e,x,1)}var _=o(x);_>n?(f=x,g=_,(v=a)&&(g+=1e3),h=C):(d=x,p=_,m=a,h-=C)}}function J(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Er){Er=Zn("pre");for(var e=0;49>e;++e)Er.appendChild(document.createTextNode("x")),Er.appendChild(Zn("br"));Er.appendChild(document.createTextNode("x"))}tr(t.measure,Er);var i=Er.offsetHeight/50;return i>3&&(t.cachedTextHeight=i),Qn(t.measure),i||1}function Z(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Zn("span","x"),i=Zn("pre",[e]);tr(t.measure,i);var n=e.offsetWidth;return n>2&&(t.cachedCharWidth=n),n||10}function Q(t){t.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++zr},lo++||(ao=[])}function te(t){var e=t.curOp,i=t.doc,n=t.display;if(t.curOp=null,e.updateMaxLine&&h(t),n.maxLineChanged&&!t.options.lineWrapping&&n.maxLine){var r=W(t,n.maxLine);n.sizer.style.minWidth=Math.max(0,r+3+co)+"px",n.maxLineChanged=!1;var o=Math.max(0,n.sizer.offsetLeft+n.sizer.offsetWidth-n.scroller.clientWidth);i.scrollLeft>o&&!e.updateScrollPos&&we(t,Math.min(n.scroller.scrollLeft,o),!0)}var s,a;if(e.updateScrollPos)s=e.updateScrollPos;else if(e.selectionChanged&&n.scroller.clientHeight){var l=q(t,i.sel.head);s=ni(t,l.left,l.top,l.left,l.bottom)
}(e.changes.length||s&&null!=s.scrollTop)&&(a=w(t,e.changes,s&&s.scrollTop),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!a&&e.selectionChanged&&S(t),e.updateScrollPos?(n.scroller.scrollTop=n.scrollbarV.scrollTop=i.scrollTop=s.scrollTop,n.scroller.scrollLeft=n.scrollbarH.scrollLeft=i.scrollLeft=s.scrollLeft,m(t),e.scrollToPos&&ei(t,je(t.doc,e.scrollToPos),e.scrollToPosMargin)):s&&ti(t),e.selectionChanged&&O(t),t.state.focused&&e.updateInput&&le(t,e.userSelChange);var c=e.maybeHiddenMarkers,u=e.maybeUnhiddenMarkers;if(c)for(var d=0;c.length>d;++d)c[d].lines.length||Fn(c[d],"hide");if(u)for(var d=0;u.length>d;++d)u[d].lines.length&&Fn(u[d],"unhide");var f;if(--lo||(f=ao,ao=null),e.textChanged&&Fn(t,"change",t,e.textChanged),e.cursorActivity&&Fn(t,"cursorActivity",t),f)for(var d=0;f.length>d;++d)f[d]()}function ee(t,e){return function(){var i=t||this,n=!i.curOp;n&&Q(i);try{var r=e.apply(i,arguments)}finally{n&&te(i)}return r}}function ie(t){return function(){var e,i=this.cm&&!this.cm.curOp;i&&Q(this.cm);try{e=t.apply(this,arguments)}finally{i&&te(this.cm)}return e}}function ne(t,e){var i,n=!t.curOp;n&&Q(t);try{i=e()}finally{n&&te(t)}return i}function re(t,e,i,n){null==e&&(e=t.doc.first),null==i&&(i=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:i,diff:n})}function oe(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){ae(t),t.state.focused&&oe(t)})}function se(t){function e(){var n=ae(t);n||i?(t.display.pollingFast=!1,oe(t)):(i=!0,t.display.poll.set(60,e))}var i=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function ae(t){var e=t.display.input,i=t.display.prevInput,n=t.doc,r=n.sel;if(!t.state.focused||bo(e)||ue(t))return!1;var o=e.value;if(o==i&&We(r.from,r.to))return!1;if(mr&&!vr&&t.display.inputHasSelection===o)return le(t,!0),!1;var s=!t.curOp;s&&Q(t),r.shift=!1;for(var a=0,l=Math.min(i.length,o.length);l>a&&i.charCodeAt(a)==o.charCodeAt(a);)++a;var c=r.from,u=r.to;i.length>a?c=Ue(c.line,c.ch-(i.length-a)):t.state.overwrite&&We(c,u)&&!t.state.pasteIncoming&&(u=Ue(u.line,Math.min(cn(n,u.line).text.length,u.ch+(o.length-a))));var h=t.curOp.updateInput;return He(t.doc,{from:c,to:u,text:wo(o.slice(a)),origin:t.state.pasteIncoming?"paste":"+input"},"end"),t.curOp.updateInput=h,o.length>1e3||o.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=o,s&&te(t),t.state.pasteIncoming=!1,!0}function le(t,e){var i,n,r=t.doc;if(We(r.sel.from,r.sel.to))e&&(t.display.prevInput=t.display.input.value="",mr&&!vr&&(t.display.inputHasSelection=null));else{t.display.prevInput="",i=Co&&(r.sel.to.line-r.sel.from.line>100||(n=t.getSelection()).length>1e3);var o=i?"-":n||t.getSelection();t.display.input.value=o,t.state.focused&&Yn(t.display.input),mr&&!vr&&(t.display.inputHasSelection=o)}t.display.inaccurateSelection=i}function ce(t){"nocursor"==t.options.readOnly||Lr&&document.activeElement==t.display.input||t.display.input.focus()}function ue(t){return t.options.readOnly||t.doc.cantEdit}function he(t){function e(){t.state.focused&&setTimeout(Kn(ce,t),0)}function i(){s.cachedCharWidth=s.cachedTextHeight=null,V(t),ne(t,Kn(re,t))}function n(){for(var t=s.wrapper.parentNode;t&&t!=document.body;t=t.parentNode);t?setTimeout(n,5e3):Nn(window,"resize",i)}function r(e){t.options.onDragEvent&&t.options.onDragEvent(t,Ln(e))||An(e)}function o(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=t.getSelection(),Yn(s.input))}var s=t.display;Hn(s.scroller,"mousedown",ee(t,pe)),mr?Hn(s.scroller,"dblclick",ee(t,function(e){var i=fe(t,e);if(i&&!ge(t,e)&&!de(t.display,e)){Dn(e);var n=ui(cn(t.doc,i.line).text,i);Ke(t.doc,n.from,n.to)}})):Hn(s.scroller,"dblclick",Dn),Hn(s.lineSpace,"selectstart",function(t){de(s,t)||Dn(t)}),Fr||Hn(s.scroller,"contextmenu",function(e){De(t,e)}),Hn(s.scroller,"scroll",function(){s.scroller.clientHeight&&(ye(t,s.scroller.scrollTop),we(t,s.scroller.scrollLeft,!0),Fn(t,"scroll",t))}),Hn(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&ye(t,s.scrollbarV.scrollTop)}),Hn(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&we(t,s.scrollbarH.scrollLeft)}),Hn(s.scroller,"mousewheel",function(e){be(t,e)}),Hn(s.scroller,"DOMMouseScroll",function(e){be(t,e)}),Hn(s.scrollbarH,"mousedown",e),Hn(s.scrollbarV,"mousedown",e),Hn(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),Hn(window,"resize",i),setTimeout(n,5e3),Hn(s.input,"keyup",ee(t,function(e){t.options.onKeyEvent&&t.options.onKeyEvent(t,Ln(e))||16==e.keyCode&&(t.doc.sel.shift=!1)})),Hn(s.input,"input",Kn(se,t)),Hn(s.input,"keydown",ee(t,Me)),Hn(s.input,"keypress",ee(t,Te)),Hn(s.input,"focus",Kn(Se,t)),Hn(s.input,"blur",Kn(Le,t)),t.options.dragDrop&&(Hn(s.scroller,"dragstart",function(e){ve(t,e)}),Hn(s.scroller,"dragenter",r),Hn(s.scroller,"dragover",r),Hn(s.scroller,"drop",ee(t,me))),Hn(s.scroller,"paste",function(e){de(s,e)||(ce(t),se(t))}),Hn(s.input,"paste",function(){t.state.pasteIncoming=!0,se(t)}),Hn(s.input,"cut",o),Hn(s.input,"copy",o),kr&&Hn(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),ce(t)})}function de(t,e){for(var i=En(e);i!=t.wrapper;i=i.parentNode){if(!i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(i.className)||i.parentNode==t.sizer&&i!=t.mover)return!0}}function fe(t,e,i){var n=t.display;if(!i){var r=En(e);if(r==n.scrollbarH||r==n.scrollbarH.firstChild||r==n.scrollbarV||r==n.scrollbarV.firstChild||r==n.scrollbarFiller)return null}var o,s,a=ir(n.lineSpace);try{o=e.clientX,s=e.clientY}catch(e){return null}return K(t,o-a.left,s-a.top)}function pe(t){function e(t){if(!We(v,t)){if(v=t,"single"==u)return Ke(r.doc,je(s,l),t),void 0;if(m=je(s,m),g=je(s,g),"double"==u){var e=ui(cn(s,t.line).text,t);Ve(t,m)?Ke(r.doc,e.from,g):Ke(r.doc,m,e.to)}else"triple"==u&&(Ve(t,m)?Ke(r.doc,g,je(s,Ue(t.line,0))):Ke(r.doc,m,je(s,Ue(t.line+1,0))))}}function i(t){var n=++w,a=fe(r,t,!0);if(a)if(We(a,d)){var l=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;l&&setTimeout(ee(r,function(){w==n&&(o.scroller.scrollTop+=l,i(t))}),50)}else{r.state.focused||Se(r),d=a,e(a);var c=p(o,s);(a.line>=c.to||a.line<c.from)&&setTimeout(ee(r,function(){w==n&&i(t)}),150)}}function n(t){w=1/0;var i=fe(r,t);i&&e(i),Dn(t),ce(r),Nn(document,"mousemove",b),Nn(document,"mouseup",C)}var r=this,o=r.display,s=r.doc,a=s.sel;if(a.shift=t.shiftKey,de(o,t))return yr||(o.scroller.draggable=!1,setTimeout(function(){o.scroller.draggable=!0},100)),void 0;if(!ge(r,t)){var l=fe(r,t);switch(In(t)){case 3:return Fr&&De.call(r,r,t),void 0;case 2:return l&&Ke(r.doc,l),setTimeout(Kn(ce,r),20),Dn(t),void 0}if(!l)return En(t)==o.scroller&&Dn(t),void 0;r.state.focused||Se(r);var c=+new Date,u="single";if(Hr&&Hr.time>c-400&&We(Hr.pos,l))u="triple",Dn(t),setTimeout(Kn(ce,r),20),hi(r,l.line);else if(Ir&&Ir.time>c-400&&We(Ir.pos,l)){u="double",Hr={time:c,pos:l},Dn(t);var h=ui(cn(s,l.line).text,l);Ke(r.doc,h.from,h.to)}else Ir={time:c,pos:l};var d=l;if(r.options.dragDrop&&mo&&!ue(r)&&!We(a.from,a.to)&&!Ve(l,a.from)&&!Ve(a.to,l)&&"single"==u){var f=ee(r,function(e){yr&&(o.scroller.draggable=!1),r.state.draggingText=!1,Nn(document,"mouseup",f),Nn(o.scroller,"drop",f),10>Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)&&(Dn(e),Ke(r.doc,l),ce(r))});return yr&&(o.scroller.draggable=!0),r.state.draggingText=f,o.scroller.dragDrop&&o.scroller.dragDrop(),Hn(document,"mouseup",f),Hn(o.scroller,"drop",f),void 0}Dn(t),"single"==u&&Ke(r.doc,je(s,l));var m=a.from,g=a.to,v=l,y=ir(o.wrapper),w=0,b=ee(r,function(t){mr||In(t)?i(t):n(t)}),C=ee(r,n);Hn(document,"mousemove",b),Hn(document,"mouseup",C)}}function me(t){var e=this;if(!(de(e.display,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Ln(t)))){Dn(t);var i=fe(e,t,!0),n=t.dataTransfer.files;if(i&&!ue(e))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,o=Array(r),s=0,a=function(t,n){var a=new FileReader;a.onload=function(){o[n]=a.result,++s==r&&(i=je(e.doc,i),He(e.doc,{from:i,to:i,text:wo(o.join("\n")),origin:"paste"},"around"))},a.readAsText(t)},l=0;r>l;++l)a(n[l],l);else{if(e.state.draggingText&&!Ve(i,e.doc.sel.from)&&!Ve(e.doc.sel.to,i))return e.state.draggingText(t),setTimeout(Kn(ce,e),20),void 0;try{var o=t.dataTransfer.getData("Text");if(o){var c=e.doc.sel.from,u=e.doc.sel.to;Je(e.doc,i,i),e.state.draggingText&&Re(e.doc,"",c,u,"paste"),e.replaceSelection(o,null,"paste"),ce(e),Se(e)}}catch(t){}}}}function ge(t,e){var i=t.display;try{var n=e.clientX,r=e.clientY}catch(e){return!1}if(n>=Math.floor(ir(i.gutters).right))return!1;if(Dn(e),!zn(t,"gutterClick"))return!0;var o=ir(i.lineDiv);if(r>o.bottom)return!0;r-=o.top-i.viewOffset;for(var s=0;t.options.gutters.length>s;++s){var a=i.gutters.childNodes[s];if(a&&ir(a).right>=n){var l=pn(t.doc,r),c=t.options.gutters[s];$n(t,"gutterClick",t,l,c,e);break}}return!0}function ve(t,e){if(mr&&!t.state.draggingText)return An(e),void 0;if(!de(t.display,e)){var i=t.getSelection();if(e.dataTransfer.setData("Text",i),e.dataTransfer.setDragImage){var n=Zn("img",null,null,"position: fixed; left: 0; top: 0;");Cr&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),xr&&(t.display.dragImg?n=t.display.dragImg:(t.display.dragImg=n,n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",t.display.wrapper.appendChild(n))),e.dataTransfer.setDragImage(n,0,0),Cr&&n.parentNode.removeChild(n)}}}function ye(t,e){2>Math.abs(t.doc.scrollTop-e)||(t.doc.scrollTop=e,pr||w(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),pr&&w(t,[]))}function we(t,e,i){(i?e==t.doc.scrollLeft:2>Math.abs(t.doc.scrollLeft-e))||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,m(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function be(t,e){var i=e.wheelDeltaX,n=e.wheelDeltaY;null==i&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(i=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var r=t.display,o=r.scroller;if(i&&o.scrollWidth>o.clientWidth||n&&o.scrollHeight>o.clientHeight){if(n&&Dr&&yr)for(var s=e.target;s!=o;s=s.parentNode)if(s.lineObj){t.display.currentWheelTarget=s;break}if(i&&!pr&&!Cr&&null!=Ur)return n&&ye(t,Math.max(0,Math.min(o.scrollTop+n*Ur,o.scrollHeight-o.clientHeight))),we(t,Math.max(0,Math.min(o.scrollLeft+i*Ur,o.scrollWidth-o.clientWidth))),Dn(e),r.wheelStartX=null,void 0;if(n&&null!=Ur){var a=n*Ur,l=t.doc.scrollTop,c=l+r.wrapper.clientHeight;0>a?l=Math.max(0,l+a-50):c=Math.min(t.doc.height,c+a+50),w(t,[],{top:l,bottom:c})}20>Rr&&(null==r.wheelStartX?(r.wheelStartX=o.scrollLeft,r.wheelStartY=o.scrollTop,r.wheelDX=i,r.wheelDY=n,setTimeout(function(){if(null!=r.wheelStartX){var t=o.scrollLeft-r.wheelStartX,e=o.scrollTop-r.wheelStartY,i=e&&r.wheelDY&&e/r.wheelDY||t&&r.wheelDX&&t/r.wheelDX;r.wheelStartX=r.wheelStartY=null,i&&(Ur=(Ur*Rr+i)/(Rr+1),++Rr)}},200)):(r.wheelDX+=i,r.wheelDY+=n))}}function Ce(t,e,i){if("string"==typeof e&&(e=Zr[e],!e))return!1;t.display.pollingFast&&ae(t)&&(t.display.pollingFast=!1);var n=t.doc,r=n.sel.shift,o=!1;try{ue(t)&&(t.state.suppressEdits=!0),i&&(n.sel.shift=!1),o=e(t)!=uo}finally{n.sel.shift=r,t.state.suppressEdits=!1}return o}function xe(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function ke(t,e){var i=mi(t.options.keyMap),n=i.auto;clearTimeout(Wr),n&&!vi(e)&&(Wr=setTimeout(function(){mi(t.options.keyMap)==i&&(t.options.keyMap=n.call?n.call(null,t):n)},50));var r=yi(e,!0),o=!1;if(!r)return!1;var s=xe(t);return o=e.shiftKey?gi("Shift-"+r,s,function(e){return Ce(t,e,!0)})||gi(r,s,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)?Ce(t,e):void 0}):gi(r,s,function(e){return Ce(t,e)}),"stop"==o&&(o=!1),o&&(Dn(e),O(t),vr&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),o}function _e(t,e,i){var n=gi("'"+i+"'",xe(t),function(e){return Ce(t,e,!0)});return n&&(Dn(e),O(t)),n}function Me(t){var e=this;if(e.state.focused||Se(e),mr&&27==t.keyCode&&(t.returnValue=!1),!e.options.onKeyEvent||!e.options.onKeyEvent(e,Ln(t))){var i=t.keyCode;e.doc.sel.shift=16==i||t.shiftKey;var n=ke(e,t);Cr&&(Yr=n?i:null,!n&&88==i&&!Co&&(Dr?t.metaKey:t.ctrlKey)&&e.replaceSelection(""))}}function Te(t){var e=this;if(!e.options.onKeyEvent||!e.options.onKeyEvent(e,Ln(t))){var i=t.keyCode,n=t.charCode;if(Cr&&i==Yr)return Yr=null,Dn(t),void 0;if(!(Cr&&(!t.which||10>t.which)||kr)||!ke(e,t)){var r=String.fromCharCode(null==n?i:n);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ue(this)&&this.doc.mode.electricChars.indexOf(r)>-1&&setTimeout(ee(e,function(){si(e,e.doc.sel.to.line,"smart")}),75),_e(e,t,r)||(mr&&!vr&&(e.display.inputHasSelection=null),se(e))}}}function Se(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(Fn(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),le(t,!0)),oe(t),O(t))}function Le(t){t.state.focused&&(Fn(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function De(t,e){function i(){if(n.inputDiv.style.position="relative",n.input.style.cssText=a,vr&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=s),oe(t),null!=n.input.selectionStart&&(!mr||vr)){clearTimeout(Vr);var e=n.input.value=" "+(We(r.from,r.to)?"":n.input.value),i=0;n.prevInput=" ",n.input.selectionStart=1,n.input.selectionEnd=e.length;var o=function(){" "==n.prevInput&&0==n.input.selectionStart?ee(t,Zr.selectAll)(t):10>i++?Vr=setTimeout(o,500):le(t)};Vr=setTimeout(o,200)}}var n=t.display,r=t.doc.sel;if(!de(n,e)){var o=fe(t,e),s=n.scroller.scrollTop;if(o&&!Cr){(We(r.from,r.to)||Ve(o,r.from)||!Ve(o,r.to))&&ee(t,Je)(t.doc,o,o);var a=n.input.style.cssText;if(n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ce(t),le(t,!0),We(r.from,r.to)&&(n.input.value=n.prevInput=" "),Fr){An(e);var l=function(){Nn(window,"mouseup",l),setTimeout(i,20)};Hn(window,"mouseup",l)}else setTimeout(i,50)}}}function Oe(t){return t.text?Ue(t.from.line+t.text.length-1,Vn(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ae(t,e,i){if(!Ve(e.from,i))return je(t,i);var n=e.text.length-1-(e.to.line-e.from.line);if(i.line>e.to.line+n){var r=i.line-n,o=t.first+t.size-1;return r>o?Ue(o,cn(t,o).text.length):qe(i,cn(t,r).text.length)}if(i.line==e.to.line+n)return qe(i,Vn(e.text).length+(1==e.text.length?e.from.ch:0)+cn(t,e.to.line).text.length-e.to.ch);var s=i.line-e.from.line;return qe(i,e.text[s].length+(s?0:e.from.ch))}function Ee(t,e,i){if(i&&"object"==typeof i)return{anchor:Ae(t,e,i.anchor),head:Ae(t,e,i.head)};if("start"==i)return{anchor:e.from,head:e.from};var n=Oe(e);if("around"==i)return{anchor:e.from,head:n};if("end"==i)return{anchor:n,head:n};var r=function(t){if(Ve(t,e.from))return t;if(!Ve(e.to,t))return n;var i=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=n.ch-e.to.ch),Ue(i,r)};return{anchor:r(t.sel.anchor),head:r(t.sel.head)}}function Ie(t,e){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,update:function(e,i,n,r){e&&(this.from=je(t,e)),i&&(this.to=je(t,i)),n&&(this.text=n),void 0!==r&&(this.origin=r)},cancel:function(){this.canceled=!0}};return Fn(t,"beforeChange",t,i),t.cm&&Fn(t.cm,"beforeChange",t.cm,i),i.canceled?null:{from:i.from,to:i.to,text:i.text,origin:i.origin}}function He(t,e,i,n){if(t.cm){if(!t.cm.curOp)return ee(t.cm,He)(t,e,i,n);if(t.cm.state.suppressEdits)return}if(!(zn(t,"beforeChange")||t.cm&&zn(t.cm,"beforeChange"))||(e=Ie(t,e))){var r=$r&&!n&&Ai(t,e.from,e.to);if(r){for(var o=r.length-1;o>=1;--o)Ne(t,{from:r[o].from,to:r[o].to,text:[""]});r.length&&Ne(t,{from:r[0].from,to:r[0].to,text:e.text},i)}else Ne(t,e,i)}}function Ne(t,e,i){var n=Ee(t,e,i);bn(t,e,n,t.cm?t.cm.curOp.id:0/0),Pe(t,e,n,Di(t,e));var r=[];an(t,function(t,i){i||-1!=Bn(r,t.history)||(Tn(t.history,e),r.push(t.history)),Pe(t,e,null,Di(t,e))})}function Fe(t,e){if(!t.cm||!t.cm.state.suppressEdits){var i=t.history,n=("undo"==e?i.done:i.undone).pop();if(n){i.dirtyCounter+="undo"==e?-1:1;var r={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore};("undo"==e?i.undone:i.done).push(r);for(var o=n.changes.length-1;o>=0;--o){var s=n.changes[o];s.origin=e,r.changes.push(wn(t,s));var a=o?Ee(t,s,null):{anchor:n.anchorBefore,head:n.headBefore};Pe(t,s,a,Oi(t,s));var l=[];an(t,function(t,e){e||-1!=Bn(l,t.history)||(Tn(t.history,s),l.push(t.history)),Pe(t,s,null,Oi(t,s))})}}}}function $e(t,e){function i(t){return Ue(t.line+e,t.ch)}t.first+=e,t.cm&&re(t.cm,t.first,t.first,e),t.sel.head=i(t.sel.head),t.sel.anchor=i(t.sel.anchor),t.sel.from=i(t.sel.from),t.sel.to=i(t.sel.to)}function Pe(t,e,i,n){if(t.cm&&!t.cm.curOp)return ee(t.cm,Pe)(t,e,i,n);if(e.to.line<t.first)return $e(t,e.text.length-1-(e.to.line-e.from.line)),void 0;if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);$e(t,r),e={from:Ue(t.first,0),to:Ue(e.to.line+r,e.to.ch),text:[Vn(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:Ue(o,cn(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=un(t,e.from,e.to),i||(i=Ee(t,e,null)),t.cm?ze(t.cm,e,n,i):rn(t,e,n,i)}}function ze(t,e,i,n){var o=t.doc,s=t.display,a=e.from,l=e.to,c=!1,h=a.line;t.options.lineWrapping||(h=fn(Ni(o,cn(o,a.line))),o.iter(h,l.line+1,function(t){return t==s.maxLine?(c=!0,!0):void 0})),Ve(o.sel.head,e.from)||Ve(e.to,o.sel.head)||(t.curOp.cursorActivity=!0),rn(o,e,i,n,r(t)),t.options.lineWrapping||(o.iter(h,a.line+e.text.length,function(t){var e=u(o,t);e>s.maxLineLength&&(s.maxLine=t,s.maxLineLength=e,s.maxLineChanged=!0,c=!1)}),c&&(t.curOp.updateMaxLine=!0)),o.frontier=Math.min(o.frontier,a.line),A(t,400);var d=e.text.length-(l.line-a.line)-1;if(re(t,a.line,l.line+1,d),zn(t,"change")){var f={from:a,to:l,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var p=t.curOp.textChanged;p.next;p=p.next);p.next=f}else t.curOp.textChanged=f}}function Re(t,e,i,n,r){if(n||(n=i),Ve(n,i)){var o=n;n=i,i=o}"string"==typeof e&&(e=wo(e)),He(t,{from:i,to:n,text:e,origin:r},null)}function Ue(t,e){return this instanceof Ue?(this.line=t,this.ch=e,void 0):new Ue(t,e)}function We(t,e){return t.line==e.line&&t.ch==e.ch}function Ve(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ye(t){return Ue(t.line,t.ch)}function Be(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function je(t,e){if(e.line<t.first)return Ue(t.first,0);var i=t.first+t.size-1;return e.line>i?Ue(i,cn(t,i).text.length):qe(e,cn(t,e.line).text.length)}function qe(t,e){var i=t.ch;return null==i||i>e?Ue(t.line,e):0>i?Ue(t.line,0):t}function Ge(t,e){return e>=t.first&&t.first+t.size>e}function Ke(t,e,i,n){if(t.sel.shift||t.sel.extend){var r=t.sel.anchor;if(i){var o=Ve(e,r);o!=Ve(i,r)?(r=e,e=i):o!=Ve(e,i)&&(e=i)}Je(t,r,e,n)}else Je(t,e,i||e,n);t.cm&&(t.cm.curOp.userSelChange=!0)}function Xe(t,e,i){var n={anchor:e,head:i};return Fn(t,"beforeSelectionChange",t,n),t.cm&&Fn(t.cm,"beforeSelectionChange",t.cm,n),n.anchor=je(t,n.anchor),n.head=je(t,n.head),n}function Je(t,e,i,n,r){if(!r&&zn(t,"beforeSelectionChange")||t.cm&&zn(t.cm,"beforeSelectionChange")){var o=Xe(t,e,i);i=o.head,e=o.anchor}var s=t.sel;if(s.goalColumn=null,(r||!We(e,s.anchor))&&(e=Qe(t,e,n,"push"!=r)),(r||!We(i,s.head))&&(i=Qe(t,i,n,"push"!=r)),!We(s.anchor,e)||!We(s.head,i)){s.anchor=e,s.head=i;var a=Ve(i,e);s.from=a?i:e,s.to=a?e:i,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),$n(t,"cursorActivity",t)}}function Ze(t){Je(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function Qe(t,e,i,n){var r=!1,o=e,s=i||1;t.cantEdit=!1;t:for(;;){var a=cn(t,o.line);if(a.markedSpans)for(var l=0;a.markedSpans.length>l;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(Fn(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find()[0>s?"from":"to"];if(We(h,o)&&(h.ch+=s,0>h.ch?h=h.line>t.first?je(t,Ue(h.line-1)):null:h.ch>a.text.length&&(h=h.line<t.first+t.size-1?Ue(h.line+1,0):null),!h)){if(r)return n?(t.cantEdit=!0,Ue(t.first,0)):Qe(t,e,i,!0);r=!0,h=e,s=-s}o=h;continue t}}return o}}function ti(t){var e=ei(t,t.doc.sel.head);if(t.state.focused){var i=t.display,n=ir(i.sizer),r=null,o=N(t.display);if(0>e.top+o+n.top?r=!0:e.bottom+o+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Tr){var s="none"==i.cursor.style.display;s&&(i.cursor.style.display="",i.cursor.style.left=e.left+"px",i.cursor.style.top=e.top-i.viewOffset+"px"),i.cursor.scrollIntoView(r),s&&(i.cursor.style.display="none")}}}function ei(t,e,i){for(null==i&&(i=0);;){var n=!1,r=q(t,e),o=ni(t,r.left,r.top-i,r.left,r.bottom+i),s=t.doc.scrollTop,a=t.doc.scrollLeft;if(null!=o.scrollTop&&(ye(t,o.scrollTop),Math.abs(t.doc.scrollTop-s)>1&&(n=!0)),null!=o.scrollLeft&&(we(t,o.scrollLeft),Math.abs(t.doc.scrollLeft-a)>1&&(n=!0)),!n)return r}}function ii(t,e,i,n,r){var o=ni(t,e,i,n,r);null!=o.scrollTop&&ye(t,o.scrollTop),null!=o.scrollLeft&&we(t,o.scrollLeft)}function ni(t,e,i,n,r){var o=t.display,s=N(o);i+=s,r+=s,0>i&&(i=0);var a=o.scroller.clientHeight-co,l=o.scroller.scrollTop,c={},u=t.doc.height+F(o),h=s+10>i,d=r+s>u-10;if(l>i)c.scrollTop=h?0:i;else if(r>l+a){var f=Math.min(i,(d?u:r)-a);f!=l&&(c.scrollTop=f)}var p=o.scroller.clientWidth-co,m=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=g+10>e;return m+g>e||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-g)):n>p+m-3&&(c.scrollLeft=n+10-p),c}function ri(t,e,i){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==i?t.doc.scrollTop:i}}function oi(t,e,i){var n=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),r=t.display.scroller;n.scrollTop=Math.max(0,Math.min(r.scrollHeight-r.clientHeight,n.scrollTop+i)),n.scrollLeft=Math.max(0,Math.min(r.scrollWidth-r.clientWidth,n.scrollLeft+e))}function si(t,e,i,n){var r=t.doc;if(i||(i="add"),"smart"==i)if(t.doc.mode.indent)var o=H(t,e);else i="prev";var s,a=t.options.tabSize,l=cn(r,e),c=Un(l.text,null,a),u=l.text.match(/^\s*/)[0];if("smart"==i&&(s=t.doc.mode.indent(o,l.text.slice(u.length),l.text),s==uo)){if(!n)return;i="prev"}"prev"==i?s=e>r.first?Un(cn(r,e-1).text,null,a):0:"add"==i?s=c+t.options.indentUnit:"subtract"==i&&(s=c-t.options.indentUnit),s=Math.max(0,s);var h="",d=0;if(t.options.indentWithTabs)for(var f=Math.floor(s/a);f;--f)d+=a,h+="	";s>d&&(h+=Wn(s-d)),h!=u&&Re(t.doc,h,Ue(e,0),Ue(e,u.length),"+input"),l.stateAfter=null}function ai(t,e,i){var n=e,r=e,o=t.doc;return"number"==typeof e?r=cn(o,Be(o,e)):n=fn(e),null==n?null:i(r,n)?(re(t,n,n+1),r):null}function li(t,e,i,n,r){function o(){var e=a+i;return t.first>e||e>=t.first+t.size?u=!1:(a=e,c=cn(t,e))}function s(t){var e=(r?dr:fr)(c,l,i,!0);if(null==e){if(t||!o())return u=!1;l=r?(0>i?cr:lr)(c):0>i?c.text.length:0}else l=e;return!0}var a=e.line,l=e.ch,c=cn(t,a),u=!0;if("char"==n)s();else if("column"==n)s(!0);else if("word"==n||"group"==n)for(var h=null,d="group"==n,f=!0;!(0>i)||s(!f);f=!1){var p=c.text.charAt(l)||"\n",m=Xn(p)?"w":d?/\s/.test(p)?null:"p":null;if(h&&h!=m){0>i&&(i=1,s());break}if(m&&(h=m),i>0&&!s(!f))break}var g=Qe(t,Ue(a,l),i,!0);return u||(g.hitSide=!0),g}function ci(t,e,i,n){var r,o=t.doc,s=e.left;if("page"==n){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=e.top+i*(a-(0>i?1.5:.5)*J(t.display))}else"line"==n&&(r=i>0?e.bottom+3:e.top-3);for(;;){var l=K(t,s,r);if(!l.outside)break;if(0>i?0>=r:r>=o.height){l.hitSide=!0;break}r+=5*i}return l}function ui(t,e){var i=e.ch,n=e.ch;if(t){e.after===!1||n==t.length?--i:++n;for(var r=t.charAt(i),o=Xn(r)?Xn:/\s/.test(r)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Xn(t)};i>0&&o(t.charAt(i-1));)--i;for(;t.length>n&&o(t.charAt(n));)++n}return{from:Ue(e.line,i),to:Ue(e.line,n)}}function hi(t,e){Ke(t.doc,Ue(e,0),je(t.doc,Ue(e+1,0)))}function di(e,i,n,r){t.defaults[e]=i,n&&(Br[e]=r?function(t,e,i){i!=qr&&n(t,e,i)}:n)}function fi(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var i={};for(var n in e){var r=e[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i}function pi(t,e,i){return t.startState?t.startState(e,i):!0}function mi(t){return"string"==typeof t?Qr[t]:t}function gi(t,e,i){function n(e){e=mi(e);var r=e[t];if(r===!1)return"stop";if(null!=r&&i(r))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return n(o);for(var s=0,a=o.length;a>s;++s){var l=n(o[s]);if(l)return l}return!1}for(var r=0;e.length>r;++r){var o=n(e[r]);if(o)return o}}function vi(t){var e=xo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function yi(t,e){if(Cr&&34==t.keyCode&&t["char"])return!1;var i=xo[t.keyCode];return null==i||t.altGraphKey?!1:(t.altKey&&(i="Alt-"+i),(Nr?t.metaKey:t.ctrlKey)&&(i="Ctrl-"+i),(Nr?t.ctrlKey:t.metaKey)&&(i="Cmd-"+i),!e&&t.shiftKey&&(i="Shift-"+i),i)}function wi(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function bi(t,e){this.lines=[],this.type=e,this.doc=t}function Ci(t,e,i,n,r){if(n&&n.shared)return ki(t,e,i,n,r);if(t.cm&&!t.cm.curOp)return ee(t.cm,Ci)(t,e,i,n,r);var o=new bi(t,r);if("range"==r&&!Ve(e,i))return o;n&&qn(n,o),o.replacedWith&&(o.collapsed=!0,o.replacedWith=Zn("span",[o.replacedWith],"CodeMirror-widget")),o.collapsed&&(Pr=!0),o.addToHistory&&bn(t,{from:e,to:i,origin:"markText"},{head:t.sel.head,anchor:t.sel.anchor},0/0);var s,a,l,c=e.line,u=0,h=t.cm;if(t.iter(c,i.line+1,function(n){h&&o.collapsed&&!h.options.lineWrapping&&Ni(t,n)==h.display.maxLine&&(l=!0);var r={from:null,to:null,marker:o};u+=n.text.length,c==e.line&&(r.from=e.ch,u-=e.ch),c==i.line&&(r.to=i.ch,u-=n.text.length-i.ch),o.collapsed&&(c==i.line&&(a=Ei(n,i.ch)),c==e.line?s=Ei(n,e.ch):dn(n,0)),Ti(n,r),++c}),o.collapsed&&t.iter(e.line,i.line+1,function(e){Fi(t,e)&&dn(e,0)}),o.clearOnEnter&&Hn(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&($r=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed){if(s!=a)throw Error("Inserting collapsed marker overlapping an existing one");o.size=u,o.atomic=!0}return h&&(l&&(h.curOp.updateMaxLine=!0),(o.className||o.startStyle||o.endStyle||o.collapsed)&&re(h,e.line,i.line+1),o.atomic&&Ze(h)),o}function xi(t,e){this.markers=t,this.primary=e;for(var i=0,n=this;t.length>i;++i)t[i].parent=this,Hn(t[i],"clear",function(){n.clear()})}function ki(t,e,i,n,r){n=qn(n),n.shared=!1;var o=[Ci(t,e,i,n,r)],s=o[0],a=n.replacedWith;return an(t,function(t){a&&(n.replacedWith=a.cloneNode(!0)),o.push(Ci(t,je(t,e),je(t,i),n,r));for(var l=0;t.linked.length>l;++l)if(t.linked[l].isParent)return;s=Vn(o)}),new xi(o,s)}function _i(t,e){if(t)for(var i=0;t.length>i;++i){var n=t[i];if(n.marker==e)return n}}function Mi(t,e){for(var i,n=0;t.length>n;++n)t[n]!=e&&(i||(i=[])).push(t[n]);return i}function Ti(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Si(t,e,i){if(t)for(var n,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);if(a||"bookmark"==s.type&&o.from==e&&(!i||!o.marker.insertLeft)){var l=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push({from:o.from,to:l?null:o.to,marker:s})}}return n}function Li(t,e,i){if(t)for(var n,r=0;t.length>r;++r){var o=t[r],s=o.marker,a=null==o.to||(s.inclusiveRight?o.to>=e:o.to>e);if(a||"bookmark"==s.type&&o.from==e&&(!i||o.marker.insertLeft)){var l=null==o.from||(s.inclusiveLeft?e>=o.from:e>o.from);(n||(n=[])).push({from:l?null:o.from-e,to:null==o.to?null:o.to-e,marker:s})}}return n}function Di(t,e){var i=Ge(t,e.from.line)&&cn(t,e.from.line).markedSpans,n=Ge(t,e.to.line)&&cn(t,e.to.line).markedSpans;if(!i&&!n)return null;var r=e.from.ch,o=e.to.ch,s=We(e.from,e.to),a=Si(i,r,s),l=Li(n,o,s),c=1==e.text.length,u=Vn(e.text).length+(c?r:0);if(a)for(var h=0;a.length>h;++h){var d=a[h];if(null==d.to){var f=_i(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=r}}if(l)for(var h=0;l.length>h;++h){var d=l[h];if(null!=d.to&&(d.to+=u),null==d.from){var f=_i(a,d.marker);f||(d.from=u,c&&(a||(a=[])).push(d))}else d.from+=u,c&&(a||(a=[])).push(d)}var p=[a];if(!c){var m,g=e.text.length-2;if(g>0&&a)for(var h=0;a.length>h;++h)null==a[h].to&&(m||(m=[])).push({from:null,to:null,marker:a[h].marker});for(var h=0;g>h;++h)p.push(m);p.push(l)}return p}function Oi(t,e){var i=xn(t,e),n=Di(t,e);if(!i)return n;if(!n)return i;for(var r=0;i.length>r;++r){var o=i[r],s=n[r];if(o&&s)t:for(var a=0;s.length>a;++a){for(var l=s[a],c=0;o.length>c;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else s&&(i[r]=s)}return i}function Ai(t,e,i){var n=null;if(t.iter(e.line,i.line+1,function(t){if(t.markedSpans)for(var e=0;t.markedSpans.length>e;++e){var i=t.markedSpans[e].marker;!i.readOnly||n&&-1!=Bn(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:e,to:i}],o=0;n.length>o;++o)for(var s=n[o],a=s.find(),l=0;r.length>l;++l){var c=r[l];if(!Ve(c.to,a.from)&&!Ve(a.to,c.from)){var u=[l,1];(Ve(c.from,a.from)||!s.inclusiveLeft&&We(c.from,a.from))&&u.push({from:c.from,to:a.from}),(Ve(a.to,c.to)||!s.inclusiveRight&&We(c.to,a.to))&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function Ei(t,e){var i,n=Pr&&t.markedSpans;if(n)for(var r,o=0;n.length>o;++o)r=n[o],r.marker.collapsed&&(null==r.from||e>r.from)&&(null==r.to||r.to>e)&&(!i||i.width<r.marker.width)&&(i=r.marker);return i}function Ii(t){return Ei(t,-1)}function Hi(t){return Ei(t,t.text.length+1)}function Ni(t,e){for(var i;i=Ii(e);)e=cn(t,i.find().from.line);return e}function Fi(t,e){var i=Pr&&e.markedSpans;if(i)for(var n,r=0;i.length>r;++r)if(n=i[r],n.marker.collapsed){if(null==n.from)return!0;if(0==n.from&&n.marker.inclusiveLeft&&$i(t,e,n))return!0}}function $i(t,e,i){if(null==i.to){var n=i.marker.find().to,r=cn(t,n.line);return $i(t,r,_i(r.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==e.text.length)return!0;for(var o,s=0;e.markedSpans.length>s;++s)if(o=e.markedSpans[s],o.marker.collapsed&&o.from==i.to&&(o.marker.inclusiveLeft||i.marker.inclusiveRight)&&$i(t,e,o))return!0}function Pi(t){var e=t.markedSpans;if(e){for(var i=0;e.length>i;++i)e[i].marker.detachLine(t);t.markedSpans=null}}function zi(t,e){if(e){for(var i=0;e.length>i;++i)e[i].marker.attachLine(t);t.markedSpans=e}}function Ri(t){return function(){var e=!this.cm.curOp;e&&Q(this.cm);try{var i=t.apply(this,arguments)}finally{e&&te(this.cm)}return i}}function Ui(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||tr(t.cm.display.measure,Zn("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function Wi(t,e,i,n){var r=new to(t,i,n);return r.noHScroll&&(t.display.alignWidgets=!0),ai(t,e,function(e){if((e.widgets||(e.widgets=[])).push(r),r.line=e,!Fi(t.doc,e)||r.showIfHidden){var i=mn(t,e)<t.display.scroller.scrollTop;dn(e,e.height+Ui(r)),i&&oi(t,0,r.height)}return!0}),r}function Vi(t,e,i){var n={text:t};return zi(n,e),n.height=i?i(n):1,n}function Yi(t,e,i,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Pi(t),zi(t,i);var r=n?n(t):1;r!=t.height&&dn(t,r)}function Bi(t){t.parent=null,Pi(t)}function ji(t,e,i,n,r){var o=i.flattenSpans;
null==o&&(o=t.options.flattenSpans);var s,a="",l=null,c=new wi(e,t.options.tabSize);for(""==e&&i.blankLine&&i.blankLine(n);!c.eol();){c.pos>t.options.maxHighlightLength?(o=!1,c.pos=Math.min(e.length,c.start+5e4),s=null):s=i.token(c,n);var u=c.current();c.start=c.pos,o&&l==s?a+=u:(a&&r(a,l),a=u,l=s)}a&&r(a,l)}function qi(t,e,i){var n=[t.state.modeGen];ji(t,e.text,t.doc.mode,i,function(t,e){n.push(t,e)});for(var r=0;t.state.overlays.length>r;++r){var o=t.state.overlays[r],s=1;ji(t,e.text,o.mode,!0,function(t,e){for(var i=s,r=t.length;r;){var a=n[s],l=a.length;r>=l?r-=l:(n.splice(s,1,a.slice(0,r),n[s+1],a.slice(r)),r=0),s+=2}if(e)if(o.opaque)n.splice(i,s-i,t,e),s=i+2;else for(;s>i;i+=2){var a=n[i+1];n[i+1]=a?a+" "+e:e}})}return n}function Gi(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=qi(t,e,e.stateAfter=H(t,fn(e)))),e.styles}function Ki(t,e,i){var n=t.doc.mode,r=new wi(e.text,t.options.tabSize);for(""==e.text&&n.blankLine&&n.blankLine(i);!r.eol()&&r.pos<=t.options.maxHighlightLength;)n.token(r,i),r.start=r.pos}function Xi(t){return t?eo[t]||(eo[t]="cm-"+t.replace(/ +/g," cm-")):null}function Ji(t,e,i){for(var n,r,o,s=e,a=!0;n=Ii(s);)a=!1,s=cn(t.doc,n.find().from.line),r||(r=s);var l={pre:Zn("pre"),col:0,pos:0,display:!i,measure:null,addedOne:!1,cm:t};s.textClass&&(l.pre.className=s.textClass);do{l.measure=s==e&&i,l.pos=0,l.addToken=l.measure?Qi:Zi,(mr||yr)&&t.getOption("lineWrapping")&&(l.addToken=tn(l.addToken)),i&&o&&s!=e&&!l.addedOne&&(i[0]=l.pre.appendChild(rr(t.display.measure)),l.addedOne=!0);var c=nn(s,l,Gi(t,s));o=s==r,c&&(s=cn(t.doc,c.to.line),a=!1)}while(c);i&&!l.addedOne&&(i[0]=l.pre.appendChild(a?Zn("span",""):rr(t.display.measure))),l.pre.firstChild||Fi(t.doc,e)||l.pre.appendChild(document.createTextNode(""));var u;if(i&&mr&&(u=gn(s))){var h=u.length-1;u[h].from==u[h].to&&--h;var d=u[h],f=u[h-1];if(d.from+1==d.to&&f&&d.level<f.level){var p=i[l.pos-1];p&&p.parentNode.insertBefore(p.measureRight=rr(t.display.measure),p.nextSibling)}}return Fn(t,"renderLine",t,e,l.pre),l.pre}function Zi(t,e,i,n,r){if(e){if(io.test(e))for(var o=document.createDocumentFragment(),s=0;;){io.lastIndex=s;var a=io.exec(e),l=a?a.index-s:e.length-s;if(l&&(o.appendChild(document.createTextNode(e.slice(s,s+l))),t.col+=l),!a)break;if(s+=l+1,"	"==a[0]){var c=t.cm.options.tabSize,u=c-t.col%c;o.appendChild(Zn("span",Wn(u),"cm-tab")),t.col+=u}else{var h=Zn("span","","cm-invalidchar");h.title="\\u"+a[0].charCodeAt(0).toString(16),o.appendChild(h),t.col+=1}}else{t.col+=e.length;var o=document.createTextNode(e)}if(i||n||r||t.measure){var d=i||"";return n&&(d+=n),r&&(d+=r),t.pre.appendChild(Zn("span",[o],d))}t.pre.appendChild(o)}}function Qi(t,e,i,n,r){for(var o=t.cm.options.lineWrapping,s=0;e.length>s;++s){var a=e.charAt(s),l=0==s;a>=""&&"">a&&e.length-1>s?(a=e.slice(s,s+2),++s):s&&o&&go.test(e.slice(s-1,s+1))&&t.pre.appendChild(Zn("wbr"));var c=t.measure[t.pos]=Zi(t,a,i,l&&n,s==e.length-1&&r);mr&&o&&" "==a&&s&&!/\s/.test(e.charAt(s-1))&&e.length-1>s&&!/\s/.test(e.charAt(s+1))&&(c.style.whiteSpace="normal"),t.pos+=a.length}e.length&&(t.addedOne=!0)}function tn(t){function e(t){for(var e=" ",i=0;t.length-2>i;++i)e+=i%2?" ":"";return e+=" "}return function(i,n,r,o,s){return t(i,n.replace(/ {3,}/,e),r,o,s)}}function en(t,e,i){i&&(t.display||(i=i.cloneNode(!0)),t.pre.appendChild(i),t.measure&&e&&(t.measure[t.pos]=i,t.addedOne=!0)),t.pos+=e}function nn(t,e,i){var n=t.markedSpans;if(n)for(var r,o,s,a,l,c=t.text,u=c.length,h=0,d=1,f="",p=0;;){if(p==h){o=s=a="",l=null,p=1/0;for(var m=null,g=0;n.length>g;++g){var v=n[g],y=v.marker;h>=v.from&&(null==v.to||v.to>h)?(null!=v.to&&p>v.to&&(p=v.to,s=""),y.className&&(o+=" "+y.className),y.startStyle&&v.from==h&&(a+=" "+y.startStyle),y.endStyle&&v.to==p&&(s+=" "+y.endStyle),y.collapsed&&(!l||l.marker.width<y.width)&&(l=v)):v.from>h&&p>v.from&&(p=v.from),"bookmark"==y.type&&v.from==h&&y.replacedWith&&(m=y.replacedWith)}if(l&&(l.from||0)==h&&(en(e,(null==l.to?u:l.to)-h,null!=l.from&&l.marker.replacedWith),null==l.to))return l.marker.find();m&&!l&&en(e,0,m)}if(h>=u)break;for(var w=Math.min(u,p);;){if(f){var b=h+f.length;if(!l){var C=b>w?f.slice(0,w-h):f;e.addToken(e,C,r?r+o:o,a,h+C.length==p?s:"")}if(b>=w){f=f.slice(w-h),h=w;break}h=b,a=""}f=i[d++],r=Xi(i[d++])}}else for(var d=1;i.length>d;d+=2)e.addToken(e,i[d],Xi(i[d+1]))}function rn(t,e,i,n,r){function o(t){return i?i[t]:null}function s(t,i,n){Yi(t,i,n,r),$n(t,"change",t,e)}var a=e.from,l=e.to,c=e.text,u=cn(t,a.line),h=cn(t,l.line),d=Vn(c),f=o(c.length-1),p=l.line-a.line;if(0==a.ch&&0==l.ch&&""==d){for(var m=0,g=c.length-1,v=[];g>m;++m)v.push(Vi(c[m],o(m),r));s(h,h.text,f),p&&t.remove(a.line,p),v.length&&t.insert(a.line,v)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),f);else{for(var v=[],m=1,g=c.length-1;g>m;++m)v.push(Vi(c[m],o(m),r));v.push(Vi(d+u.text.slice(l.ch),f,r)),s(u,u.text.slice(0,a.ch)+c[0],o(0)),t.insert(a.line+1,v)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),o(0)),t.remove(a.line+1,p);else{s(u,u.text.slice(0,a.ch)+c[0],o(0)),s(h,d+h.text.slice(l.ch),f);for(var m=1,g=c.length-1,v=[];g>m;++m)v.push(Vi(c[m],o(m),r));p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,v)}$n(t,"change",t,e),Je(t,n.anchor,n.head,null,!0)}function on(t){this.lines=t,this.parent=null;for(var e=0,i=t.length,n=0;i>e;++e)t[e].parent=this,n+=t[e].height;this.height=n}function sn(t){this.children=t;for(var e=0,i=0,n=0,r=t.length;r>n;++n){var o=t[n];e+=o.chunkSize(),i+=o.height,o.parent=this}this.size=e,this.height=i,this.parent=null}function an(t,e,i){function n(t,r,o){if(t.linked)for(var s=0;t.linked.length>s;++s){var a=t.linked[s];if(a.doc!=r){var l=o&&a.sharedHist;(!i||l)&&(e(a.doc,l),n(a.doc,t,l))}}}n(t,null,!0)}function ln(t,e){if(e.cm)throw Error("This document is already in use.");t.doc=e,e.cm=t,o(t),i(t),t.options.lineWrapping||h(t),t.options.mode=e.modeOption,re(t)}function cn(t,e){for(e-=t.first;!t.lines;)for(var i=0;;++i){var n=t.children[i],r=n.chunkSize();if(r>e){t=n;break}e-=r}return t.lines[e]}function un(t,e,i){var n=[],r=e.line;return t.iter(e.line,i.line+1,function(t){var o=t.text;r==i.line&&(o=o.slice(0,i.ch)),r==e.line&&(o=o.slice(e.ch)),n.push(o),++r}),n}function hn(t,e,i){var n=[];return t.iter(e,i,function(t){n.push(t.text)}),n}function dn(t,e){for(var i=e-t.height,n=t;n;n=n.parent)n.height+=i}function fn(t){if(null==t.parent)return null;for(var e=t.parent,i=Bn(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var r=0;n.children[r]!=e;++r)i+=n.children[r].chunkSize();return i+e.first}function pn(t,e){var i=t.first;t:do{for(var n=0,r=t.children.length;r>n;++n){var o=t.children[n],s=o.height;if(s>e){t=o;continue t}e-=s,i+=o.chunkSize()}return i}while(!t.lines);for(var n=0,r=t.lines.length;r>n;++n){var a=t.lines[n],l=a.height;if(l>e)break;e-=l}return i+n}function mn(t,e){e=Ni(t.doc,e);for(var i=0,n=e.parent,r=0;n.lines.length>r;++r){var o=n.lines[r];if(o==e)break;i+=o.height}for(var s=n.parent;s;n=s,s=n.parent)for(var r=0;s.children.length>r;++r){var a=s.children[r];if(a==n)break;i+=a.height}return i}function gn(t){var e=t.order;return null==e&&(e=t.order=ko(t.text)),e}function vn(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function yn(t,e,i,n){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,i),Math.min(t.first+t.size,n),function(i){i.markedSpans&&((r||(r=e["spans_"+t.id]={}))[o]=i.markedSpans),++o})}function wn(t,e){var i={from:e.from,to:Oe(e),text:un(t,e.from,e.to)};return yn(t,i,e.from.line,e.to.line+1),an(t,function(t){yn(t,i,e.from.line,e.to.line+1)},!0),i}function bn(t,e,i,n){var r=t.history;r.undone.length=0;var o=+new Date,s=Vn(r.done);if(s&&(r.lastOp==n||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&r.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var a=Vn(s.changes);We(e.from,e.to)&&We(e.from,a.to)?a.to=Oe(e):s.changes.push(wn(t,e)),s.anchorAfter=i.anchor,s.headAfter=i.head}else{for(s={changes:[wn(t,e)],anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:i.anchor,headAfter:i.head},r.done.push(s);r.done.length>r.undoDepth;)r.done.shift();0>r.dirtyCounter?r.dirtyCounter=0/0:r.dirtyCounter++}r.lastTime=o,r.lastOp=n,r.lastOrigin=e.origin}function Cn(t){if(!t)return null;for(var e,i=0;t.length>i;++i)t[i].marker.explicitlyCleared?e||(e=t.slice(0,i)):e&&e.push(t[i]);return e?e.length?e:null:t}function xn(t,e){var i=e["spans_"+t.id];if(!i)return null;for(var n=0,r=[];e.text.length>n;++n)r.push(Cn(i[n]));return r}function kn(t,e){for(var i=0,n=[];t.length>i;++i){var r=t[i],o=r.changes,s=[];n.push({changes:s,anchorBefore:r.anchorBefore,headBefore:r.headBefore,anchorAfter:r.anchorAfter,headAfter:r.headAfter});for(var a=0;o.length>a;++a){var l,c=o[a];if(s.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(l=u.match(/^spans_(\d+)$/))&&Bn(e,Number(l[1]))>-1&&(Vn(s)[u]=c[u],delete c[u])}}return n}function _n(t,e,i,n){t.line>i?t.line+=n:t.line>e&&(t.line=e,t.ch=0)}function Mn(t,e,i,n){for(var r=0;t.length>r;++r){for(var o=t[r],s=!0,a=0;o.changes.length>a;++a){var l=o.changes[a];if(o.copied||(l.from=Ye(l.from),l.to=Ye(l.to)),l.from.line>i)l.from.line+=n,l.to.line+=n;else if(l.to.line>=e){s=!1;break}}o.copied||(o.anchorBefore=Ye(o.anchorBefore),o.headBefore=Ye(o.headBefore),o.anchorAfter=Ye(o.anchorAfter),o.readAfter=Ye(o.headAfter),o.copied=!0),s?(_n(o.anchorBefore),_n(o.headBefore),_n(o.anchorAfter),_n(o.headAfter)):(t.splice(0,r+1),r=0)}}function Tn(t,e){var i=e.from.line,n=e.to.line,r=e.text.length-(n-i)-1;Mn(t.done,i,n,r),Mn(t.undone,i,n,r)}function Sn(){An(this)}function Ln(t){return t.stop||(t.stop=Sn),t}function Dn(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function On(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function An(t){Dn(t),On(t)}function En(t){return t.target||t.srcElement}function In(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Dr&&t.ctrlKey&&1==e&&(e=3),e}function Hn(t,e,i){if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,i);else{var n=t._handlers||(t._handlers={}),r=n[e]||(n[e]=[]);r.push(i)}}function Nn(t,e,i){if(t.removeEventListener)t.removeEventListener(e,i,!1);else if(t.detachEvent)t.detachEvent("on"+e,i);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var r=0;n.length>r;++r)if(n[r]==i){n.splice(r,1);break}}}function Fn(t,e){var i=t._handlers&&t._handlers[e];if(i)for(var n=Array.prototype.slice.call(arguments,2),r=0;i.length>r;++r)i[r].apply(null,n)}function $n(t,e){function i(t){return function(){t.apply(null,r)}}var n=t._handlers&&t._handlers[e];if(n){var r=Array.prototype.slice.call(arguments,2);ao||(++lo,ao=[],setTimeout(Pn,0));for(var o=0;n.length>o;++o)ao.push(i(n[o]))}}function Pn(){--lo;var t=ao;ao=null;for(var e=0;t.length>e;++e)t[e]()}function zn(t,e){var i=t._handlers&&t._handlers[e];return i&&i.length>0}function Rn(){this.id=null}function Un(t,e,i,n,r){null==e&&(e=t.search(/[^\s\u00a0]/),-1==e&&(e=t.length));for(var o=n||0,s=r||0;e>o;++o)"	"==t.charAt(o)?s+=i-s%i:++s;return s}function Wn(t){for(;t>=ho.length;)ho.push(Vn(ho)+" ");return ho[t]}function Vn(t){return t[t.length-1]}function Yn(t){Sr?(t.selectionStart=0,t.selectionEnd=t.value.length):t.select()}function Bn(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;n>i;++i)if(t[i]==e)return i;return-1}function jn(t,e){function i(){}i.prototype=t;var n=new i;return e&&qn(e,n),n}function qn(t,e){e||(e={});for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Gn(t){for(var e=[],i=0;t>i;++i)e.push(void 0);return e}function Kn(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function Xn(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||fo.test(t))}function Jn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function Zn(t,e,i,n){var r=document.createElement(t);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof e)er(r,e);else if(e)for(var o=0;e.length>o;++o)r.appendChild(e[o]);return r}function Qn(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function tr(t,e){return Qn(t).appendChild(e)}function er(t,e){vr?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function ir(t){return t.getBoundingClientRect()}function nr(t){if(null!=vo)return vo;var e=Zn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return tr(t,e),e.offsetWidth&&(vo=e.offsetHeight-e.clientHeight),vo||0}function rr(t){if(null==yo){var e=Zn("span","");tr(t,Zn("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(yo=1>=e.offsetWidth&&e.offsetHeight>2&&!gr)}return yo?Zn("span",""):Zn("span","",null,"display: inline-block; width: 1px; margin-right: -1px")}function or(t,e,i,n){if(!t)return n(e,i,"ltr");for(var r=0;t.length>r;++r){var o=t[r];(i>o.from&&o.to>e||e==i&&o.to==e)&&n(Math.max(o.from,e),Math.min(o.to,i),1==o.level?"rtl":"ltr")}}function sr(t){return t.level%2?t.to:t.from}function ar(t){return t.level%2?t.from:t.to}function lr(t){var e=gn(t);return e?sr(e[0]):0}function cr(t){var e=gn(t);return e?ar(Vn(e)):t.text.length}function ur(t,e){var i=cn(t.doc,e),n=Ni(t.doc,i);n!=i&&(e=fn(n));var r=gn(n),o=r?r[0].level%2?cr(n):lr(n):0;return Ue(e,o)}function hr(t,e){for(var i,n;i=Hi(n=cn(t.doc,e));)e=i.find().to.line;var r=gn(n),o=r?r[0].level%2?lr(n):cr(n):n.text.length;return Ue(e,o)}function dr(t,e,i,n){var r=gn(t);if(!r)return fr(t,e,i,n);for(var o=n?function(e,i){do e+=i;while(e>0&&po.test(t.text.charAt(e)));return e}:function(t,e){return t+e},s=r[0].level,a=0;r.length>a;++a){var l=r[a],c=l.level%2==s;if(e>l.from&&l.to>e||c&&(l.from==e||l.to==e))break}for(var u=o(e,l.level%2?-i:i);null!=u;)if(l.level%2==s){if(!(l.from>u||u>l.to))break;l=r[a+=i],u=l&&(i>0==l.level%2?o(l.to,-1):o(l.from,1))}else if(u==sr(l))l=r[--a],u=l&&ar(l);else{if(u!=ar(l))break;l=r[++a],u=l&&sr(l)}return 0>u||u>t.text.length?null:u}function fr(t,e,i,n){var r=e+i;if(n)for(;r>0&&po.test(t.text.charAt(r));)r+=i;return 0>r||r>t.text.length?null:r}var pr=/gecko\/\d/i.test(navigator.userAgent),mr=/MSIE \d/.test(navigator.userAgent),gr=mr&&(null==document.documentMode||8>document.documentMode),vr=mr&&(null==document.documentMode||9>document.documentMode),yr=/WebKit\//.test(navigator.userAgent),wr=yr&&/Qt\/\d+\.\d+/.test(navigator.userAgent),br=/Chrome\//.test(navigator.userAgent),Cr=/Opera\//.test(navigator.userAgent),xr=/Apple Computer/.test(navigator.vendor),kr=/KHTML\//.test(navigator.userAgent),_r=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Mr=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Tr=/PhantomJS/.test(navigator.userAgent),Sr=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Lr=Sr||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Dr=Sr||/Mac/.test(navigator.platform),Or=/windows/i.test(navigator.platform),Ar=Cr&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ar&&(Ar=Number(Ar[1]));var Er,Ir,Hr,Nr=Dr&&(wr||Cr&&(null==Ar||12.11>Ar)),Fr=pr||mr&&!vr,$r=!1,Pr=!1,zr=0,Rr=0,Ur=null;mr?Ur=-.53:pr?Ur=15:br?Ur=-.7:xr&&(Ur=-1/3);var Wr,Vr,Yr=null;t.Pos=Ue,t.prototype={focus:function(){window.focus(),ce(this),Se(this),se(this)},setOption:function(t,e){var i=this.options,n=i[t];(i[t]!=e||"mode"==t)&&(i[t]=e,Br.hasOwnProperty(t)&&ee(this,Br[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,i=0;e.length>i;++i)if(("string"==typeof t?e[i].name:e[i])==t)return e.splice(i,1),!0},addOverlay:ee(null,function(e,i){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:i&&i.opaque}),this.state.modeGen++,re(this)}),removeOverlay:ee(null,function(t){for(var e=this.state.overlays,i=0;e.length>i;++i)if(e[i].modeSpec==t)return e.splice(i,1),this.state.modeGen++,re(this),void 0}),indentLine:ee(null,function(t,e,i){"string"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Ge(this.doc,t)&&si(this,t,e,i)}),indentSelection:ee(null,function(t){var e=this.doc.sel;if(We(e.from,e.to))return si(this,e.from.line,t);for(var i=e.to.line-(e.to.ch?0:1),n=e.from.line;i>=n;++n)si(this,n,t)}),getTokenAt:function(t){var e=this.doc;t=je(e,t);for(var i=H(this,t.line),n=this.doc.mode,r=cn(e,t.line),o=new wi(r.text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var s=n.token(o,i)}return{start:o.start,end:o.pos,string:o.current(),className:s||null,type:s||null,state:i}},getStateAfter:function(t){var e=this.doc;return t=Be(e,null==t?e.first+e.size-1:t),H(this,t+1)},cursorCoords:function(t,e){var i,n=this.doc.sel;return i=null==t?n.head:"object"==typeof t?je(this.doc,t):t?n.from:n.to,q(this,i,e||"page")},charCoords:function(t,e){return j(this,je(this.doc,t),e||"page")},coordsChar:function(t,e){return t=B(this,t,e||"page"),K(this,t.left,t.top)},defaultTextHeight:function(){return J(this.display)},defaultCharWidth:function(){return Z(this.display)},setGutterMarker:ee(null,function(t,e,i){return ai(this,t,function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=i,!i&&Jn(n)&&(t.gutterMarkers=null),!0})}),clearGutter:ee(null,function(t){var e=this,i=e.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[t]&&(i.gutterMarkers[t]=null,re(e,n,n+1),Jn(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),addLineClass:ee(null,function(t,e,i){return ai(this,t,function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[n]){if(RegExp("\\b"+i+"\\b").test(t[n]))return!1;t[n]+=" "+i}else t[n]=i;return!0})}),removeLineClass:ee(null,function(t,e,i){return ai(this,t,function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",r=t[n];if(!r)return!1;if(null==i)t[n]=null;else{var o=r.replace(RegExp("^"+i+"\\b\\s*|\\s*\\b"+i+"\\b"),"");if(o==r)return!1;t[n]=o||null}return!0})}),addLineWidget:ee(null,function(t,e,i){return Wi(this,t,e,i)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!Ge(this.doc,t))return null;var e=t;if(t=cn(this.doc,t),!t)return null}else{var e=fn(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,i,n,r){var o=this.display;t=q(this,je(this.doc,t));var s=t.bottom,a=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==n)s=t.top;else if("above"==n||"near"==n){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:l>=t.bottom+e.offsetHeight&&(s=t.bottom),a+e.offsetWidth>c&&(a=c-e.offsetWidth)}e.style.top=s+N(o)+"px",e.style.left=e.style.right="","right"==r?(a=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=a+"px"),i&&ii(this,a,s,a+e.offsetWidth,s+e.offsetHeight)},triggerOnKeyDown:ee(null,Me),execCommand:function(t){return Zr[t](this)},findPosH:function(t,e,i,n){var r=1;0>e&&(r=-1,e=-e);for(var o=0,s=je(this.doc,t);e>o&&(s=li(this.doc,s,r,i,n),!s.hitSide);++o);return s},moveH:ee(null,function(t,e){var i,n=this.doc.sel;i=n.shift||n.extend||We(n.from,n.to)?li(this.doc,n.head,t,e,this.options.rtlMoveVisually):0>t?n.from:n.to,Ke(this.doc,i,i,t)}),deleteH:ee(null,function(t,e){var i=this.doc.sel;We(i.from,i.to)?Re(this.doc,"",i.from,li(this.doc,i.head,t,e,!1),"+delete"):Re(this.doc,"",i.from,i.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,i,n){var r=1,o=n;0>e&&(r=-1,e=-e);for(var s=0,a=je(this.doc,t);e>s;++s){var l=q(this,a,"div");if(null==o?o=l.left:l.left=o,a=ci(this,l,r,i),a.hitSide)break}return a},moveV:ee(null,function(t,e){var i=this.doc.sel,n=q(this,i.head,"div");null!=i.goalColumn&&(n.left=i.goalColumn);var r=ci(this,n,t,e);"page"==e&&oi(this,0,j(this,r,"div").top-n.top),Ke(this.doc,r,r,t),i.goalColumn=n.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:ee(null,function(t,e){ri(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller,e=co;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:ee(null,function(t,e){"number"==typeof t&&(t=Ue(t,0)),e||(e=0);var i=t;t&&null==t.line||(this.curOp.scrollToPos=t?je(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,i=q(this,this.curOp.scrollToPos));var n=ni(this,i.left,i.top-e,i.right,i.bottom+e);ri(this,n.scrollLeft,n.scrollTop)}),setSize:function(t,e){function i(t){return"number"==typeof t||/^\d+$/.test(t+"")?t+"px":t}null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.refresh()},on:function(t,e){Hn(this,t,e)},off:function(t,e){Nn(this,t,e)},operation:function(t){return ne(this,t)},refresh:ee(null,function(){V(this),ri(this,this.doc.scrollLeft,this.doc.scrollTop),re(this)}),swapDoc:ee(null,function(t){var e=this.doc;return e.cm=null,ln(this,t),V(this),le(this,!0),ri(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Br=t.optionHandlers={},jr=t.defaults={},qr=t.Init={toString:function(){return"CodeMirror.Init"}};di("value","",function(t,e){t.setValue(e)},!0),di("mode",null,function(t,e){t.doc.modeOption=e,i(t)},!0),di("indentUnit",2,i,!0),di("indentWithTabs",!1),di("smartIndent",!0),di("tabSize",4,function(t){i(t),V(t),re(t)},!0),di("electricChars",!0),di("rtlMoveVisually",!Or),di("theme","default",function(t){a(t),l(t)},!0),di("keyMap","default",s),di("extraKeys",null),di("onKeyEvent",null),di("onDragEvent",null),di("lineWrapping",!1,n,!0),di("gutters",[],function(t){d(t.options),l(t)},!0),di("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?y(t.display)+"px":"0",t.refresh()},!0),di("lineNumbers",!1,function(t){d(t.options),l(t)},!0),di("firstLineNumber",1,l,!0),di("lineNumberFormatter",function(t){return t},l,!0),di("showCursorWhenSelecting",!1,S,!0),di("readOnly",!1,function(t,e){"nocursor"==e?(Le(t),t.display.input.blur()):e||le(t,!0)}),di("dragDrop",!0),di("cursorBlinkRate",530),di("cursorHeight",1),di("workTime",100),di("workDelay",100),di("flattenSpans",!0),di("pollInterval",100),di("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),di("historyEventDelay",500),di("viewportMargin",10,function(t){t.refresh()},!0),di("maxHighlightLength",1e4,function(t){i(t),t.refresh()},!0),di("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),di("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),di("autofocus",null);var Gr=t.modes={},Kr=t.mimeModes={};t.defineMode=function(e,i){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){i.dependencies=[];for(var n=2;arguments.length>n;++n)i.dependencies.push(arguments[n])}Gr[e]=i},t.defineMIME=function(t,e){Kr[t]=e},t.resolveMode=function(e){if("string"==typeof e&&Kr.hasOwnProperty(e))e=Kr[e];else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,i){i=t.resolveMode(i);var n=Gr[i.name];if(!n)return t.getMode(e,"text/plain");var r=n(e,i);if(Xr.hasOwnProperty(i.name)){var o=Xr[i.name];for(var s in o)o.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=o[s])}return r.name=i.name,r},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Xr=t.modeExtensions={};t.extendMode=function(t,e){var i=Xr.hasOwnProperty(t)?Xr[t]:Xr[t]={};qn(e,i)},t.defineExtension=function(e,i){t.prototype[e]=i},t.defineDocExtension=function(t,e){ro.prototype[t]=e},t.defineOption=di;var Jr=[];t.defineInitHook=function(t){Jr.push(t)},t.copyState=fi,t.startState=pi,t.innerMode=function(t,e){for(;t.innerMode;){var i=t.innerMode(e);e=i.state,t=i.mode}return i||{mode:t,state:e}};var Zr=t.commands={selectAll:function(t){t.setSelection(Ue(t.firstLine(),0),Ue(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),i=t.getCursor(!1),n=!We(e,i);n||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,n?i:Ue(e.line),"+delete"):t.replaceRange("",e,Ue(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",Ue(e,0),Ue(e),"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(Ue(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(Ue(t.lastLine()))},goLineStart:function(t){t.extendSelection(ur(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),i=ur(t,e.line),n=t.getLineHandle(i.line),r=gn(n);if(r&&0!=r[0].level)t.extendSelection(i);else{var o=Math.max(0,n.text.search(/\S/)),s=e.line==i.line&&o>=e.ch&&e.ch;t.extendSelection(Ue(i.line,s?0:o))}},goLineEnd:function(t){t.extendSelection(hr(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("	","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("	","end","+input")},transposeChars:function(t){var e=t.getCursor(),i=t.getLine(e.line);e.ch>0&&e.ch<i.length-1&&t.replaceRange(i.charAt(e.ch)+i.charAt(e.ch-1),Ue(e.line,e.ch-1),Ue(e.line,e.ch+1))},newlineAndIndent:function(t){ee(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},Qr=t.keyMap={};Qr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Qr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Qr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},Qr["default"]=Dr?Qr.macDefault:Qr.pcDefault,Qr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},t.lookupKey=gi,t.isModifierKey=vi,t.keyName=yi,t.fromTextArea=function(e,i){function n(){e.value=c.getValue()}if(i||(i={}),i.value=e.value,!i.tabindex&&e.tabindex&&(i.tabindex=e.tabindex),!i.placeholder&&e.placeholder&&(i.placeholder=e.placeholder),null==i.autofocus){var r=document.body;try{r=document.activeElement}catch(o){}i.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}if(e.form&&(Hn(e.form,"submit",n),!i.leaveSubmitMethodAlone)){var s=e.form,a=s.submit;try{var l=s.submit=function(){n(),s.submit=a,s.submit(),s.submit=l}}catch(o){}}e.style.display="none";var c=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},i);return c.save=n,c.getTextArea=function(){return e},c.toTextArea=function(){n(),e.parentNode.removeChild(c.getWrapperElement()),e.style.display="",e.form&&(Nn(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=a))},c},wi.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var i=e==t;else var i=e&&(t.test?t.test(e):t(e));return i?(++this.pos,e):void 0},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);return e>-1?(this.pos=e,!0):void 0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Un(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Un(this.string,null,this.tabSize)},match:function(t,e,i){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&e!==!1&&(this.pos+=n[0].length),n)}var r=function(t){return i?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);return r(o)==r(t)?(e!==!1&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=wi,t.TextMarker=bi,bi.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;e&&Q(t);for(var i=null,n=null,r=0;this.lines.length>r;++r){var o=this.lines[r],s=_i(o.markedSpans,this);null!=s.to&&(n=fn(o)),o.markedSpans=Mi(o.markedSpans,s),null!=s.from?i=fn(o):this.collapsed&&!Fi(this.doc,o)&&t&&dn(o,J(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var r=0;this.lines.length>r;++r){var a=Ni(t.doc,this.lines[r]),l=u(t.doc,a);
l>t.display.maxLineLength&&(t.display.maxLine=a,t.display.maxLineLength=l,t.display.maxLineChanged=!0)}null!=i&&t&&re(t,i,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Ze(t)),e&&te(t),$n(this,"clear")}},bi.prototype.find=function(){for(var t,e,i=0;this.lines.length>i;++i){var n=this.lines[i],r=_i(n.markedSpans,this);if(null!=r.from||null!=r.to){var o=fn(n);null!=r.from&&(t=Ue(o,r.from)),null!=r.to&&(e=Ue(o,r.to))}}return"bookmark"==this.type?t:t&&{from:t,to:e}},bi.prototype.getOptions=function(t){var e=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:t?e&&e.cloneNode(!0):e,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},bi.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=Bn(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},bi.prototype.detachLine=function(t){if(this.lines.splice(Bn(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},t.SharedTextMarker=xi,xi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;this.markers.length>t;++t)this.markers[t].clear();$n(this,"clear")}},xi.prototype.find=function(){return this.primary.find()},xi.prototype.getOptions=function(t){var e=this.primary.getOptions(t);return e.shared=!0,e};var to=t.LineWidget=function(t,e,i){for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.cm=t,this.node=e};to.prototype.clear=Ri(function(){var t=this.line.widgets,e=fn(this.line);if(null!=e&&t){for(var i=0;t.length>i;++i)t[i]==this&&t.splice(i--,1);t.length||(this.line.widgets=null),dn(this.line,Math.max(0,this.line.height-Ui(this))),re(this.cm,e,e+1)}}),to.prototype.changed=Ri(function(){var t=this.height;this.height=null;var e=Ui(this)-t;if(e){dn(this.line,this.line.height+e);var i=fn(this.line);re(this.cm,i,i+1)}});var eo={},io=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;on.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var i=t,n=t+e;n>i;++i){var r=this.lines[i];this.height-=r.height,Bi(r),$n(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,i){this.height+=i,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0,r=e.length;r>n;++n)e[n].parent=this},iterN:function(t,e,i){for(var n=t+e;n>t;++t)if(i(this.lines[t]))return!0}},sn.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var i=0;this.children.length>i;++i){var n=this.children[i],r=n.chunkSize();if(r>t){var o=Math.min(e,r-t),s=n.height;if(n.removeInner(t,o),this.height-=s-n.height,r==o&&(this.children.splice(i--,1),n.parent=null),0==(e-=o))break;t=0}else t-=r}if(25>this.size-e){var a=[];this.collapse(a),this.children=[new on(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0,i=this.children.length;i>e;++e)this.children[e].collapse(t)},insertInner:function(t,e,i){this.size+=e.length,this.height+=i;for(var n=0,r=this.children.length;r>n;++n){var o=this.children[n],s=o.chunkSize();if(s>=t){if(o.insertInner(t,e,i),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),l=new on(a);o.height-=l.height,this.children.splice(n+1,0,l),l.parent=this}this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var e=t.children.splice(t.children.length-5,5),i=new sn(e);if(t.parent){t.size-=i.size,t.height-=i.height;var n=Bn(t.parent.children,t);t.parent.children.splice(n+1,0,i)}else{var r=new sn(t.children);r.parent=t,t.children=[r,i],t=r}i.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,i){for(var n=0,r=this.children.length;r>n;++n){var o=this.children[n],s=o.chunkSize();if(s>t){var a=Math.min(e,s-t);if(o.iterN(t,a,i))return!0;if(0==(e-=a))break;t=0}else t-=s}}};var no=0,ro=t.Doc=function(t,e,i){if(!(this instanceof ro))return new ro(t,e,i);null==i&&(i=0),sn.call(this,[new on([Vi("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=vn(),this.frontier=i;var n=Ue(i,0);this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++no,this.modeOption=e,"string"==typeof t&&(t=wo(t)),rn(this,{from:n,to:n,text:t},null,{head:n,anchor:n})};ro.prototype=jn(sn.prototype,{iter:function(t,e,i){i?this.iterN(t-this.first,e-t,i):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var i=0,n=0,r=e.length;r>n;++n)i+=e[n].height;this.insertInner(t-this.first,e,i)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=hn(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:function(t){var e=Ue(this.first,0),i=this.first+this.size-1;He(this,{from:e,to:Ue(i,cn(this,i).text.length),text:wo(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,i,n){e=je(this,e),i=i?je(this,i):e,Re(this,t,e,i,n)},getRange:function(t,e,i){var n=un(this,je(this,t),je(this,e));return i===!1?n:n.join(i||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){Ge(this,t)&&Re(this,e,Ue(t,0),je(this,Ue(t)))},removeLine:function(t){t?Re(this,"",je(this,Ue(t-1)),je(this,Ue(t))):Re(this,"",Ue(0,0),je(this,Ue(1,0)))},getLineHandle:function(t){return Ge(this,t)?cn(this,t):void 0},getLineNumber:function(t){return fn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return je(this,t)},getCursor:function(t){var e,i=this.sel;return e=null==t||"head"==t?i.head:"anchor"==t?i.anchor:"end"==t||t===!1?i.to:i.from,Ye(e)},somethingSelected:function(){return!We(this.sel.head,this.sel.anchor)},setCursor:ie(function(t,e,i){var n=je(this,"number"==typeof t?Ue(t,e||0):t);i?Ke(this,n):Je(this,n,n)}),setSelection:ie(function(t,e){Je(this,je(this,t),je(this,e||t))}),extendSelection:ie(function(t,e){Ke(this,je(this,t),e&&je(this,e))}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,i){He(this,{from:this.sel.from,to:this.sel.to,text:wo(t),origin:i},e||"around")},undo:ie(function(){Fe(this,"undo")}),redo:ie(function(){Fe(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=vn()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:kn(this.history.done),undone:kn(this.history.undone)}},setHistory:function(t){var e=this.history=vn();e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,i){return Ci(this,je(this,t),je(this,e),i,"range")},setBookmark:function(t,e){var i={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return t=je(this,t),Ci(this,t,t,i,"bookmark")},findMarksAt:function(t){t=je(this,t);var e=[],i=cn(this,t.line).markedSpans;if(i)for(var n=0;i.length>n;++n){var r=i[n];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},getAllMarks:function(){var t=[];return this.iter(function(e){var i=e.markedSpans;if(i)for(var n=0;i.length>n;++n)null!=i[n].from&&t.push(i[n].marker)}),t},posFromIndex:function(t){var e,i=this.first;return this.iter(function(n){var r=n.text.length+1;return r>t?(e=t,!0):(t-=r,++i,void 0)}),je(this,Ue(i,e))},indexFromPos:function(t){t=je(this,t);var e=t.ch;return t.line<this.first||0>t.ch?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new ro(hn(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,i=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&i>t.to&&(i=t.to);var n=new ro(hn(this,e,i),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],n},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var i=0;this.linked.length>i;++i){var n=this.linked[i];if(n.doc==e){this.linked.splice(i,1),e.unlinkDoc(this);break}}if(e.history==this.history){var r=[e.id];an(e,function(t){r.push(t.id)},!0),e.history=vn(),e.history.done=kn(this.history.done,r),e.history.undone=kn(this.history.undone,r)}},iterLinkedDocs:function(t){an(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ro.prototype.eachLine=ro.prototype.iter;var oo="iter insert remove copy getEditor".split(" ");for(var so in ro.prototype)ro.prototype.hasOwnProperty(so)&&0>Bn(oo,so)&&(t.prototype[so]=function(t){return function(){return t.apply(this.doc,arguments)}}(ro.prototype[so]));t.e_stop=An,t.e_preventDefault=Dn,t.e_stopPropagation=On;var ao,lo=0;t.on=Hn,t.off=Nn,t.signal=Fn;var co=30,uo=t.Pass={toString:function(){return"CodeMirror.Pass"}};Rn.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},t.countColumn=Un;var ho=[""],fo=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,po=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;t.replaceGetRect=function(t){ir=t};var mo=function(){if(vr)return!1;var t=Zn("div");return"draggable"in t||"dragDrop"in t}(),go=/^$/;pr?go=/$'/:xr&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?go=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:yr&&(go=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var vo,yo,wo=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,i=[],n=t.length;n>=e;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(i.push(o.slice(0,s)),e+=s+1):(i.push(o),e=r+1)}return i}:function(t){return t.split(/\r\n?|\n/)};t.splitLines=wo;var bo=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(e){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(i){}return e&&e.parentElement()==t?0!=e.compareEndPoints("StartToEnd",e):!1},Co=function(){var t=Zn("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),xo={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};t.keyNames=xo,function(){for(var t=0;10>t;t++)xo[t+48]=t+"";for(var t=65;90>=t;t++)xo[t]=String.fromCharCode(t);for(var t=1;12>=t;t++)xo[t+111]=xo[t+63235]="F"+t}();var ko=function(){function t(t){return 255>=t?e.charAt(t):t>=1424&&1524>=t?"R":t>=1536&&1791>=t?i.charAt(t-1536):t>=1792&&2220>=t?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",i="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,r=/[stwN]/,o=/[LRr]/,s=/[Lb1n]/,a=/[1n]/,l="L";return function(e){if(!n.test(e))return!1;for(var i,c=e.length,u=[],h=0;c>h;++h)u.push(i=t(e.charCodeAt(h)));for(var h=0,d=l;c>h;++h){var i=u[h];"m"==i?u[h]=d:d=i}for(var h=0,f=l;c>h;++h){var i=u[h];"1"==i&&"r"==f?u[h]="n":o.test(i)&&(f=i,"r"==i&&(u[h]="R"))}for(var h=1,d=u[0];c-1>h;++h){var i=u[h];"+"==i&&"1"==d&&"1"==u[h+1]?u[h]="1":","!=i||d!=u[h+1]||"1"!=d&&"n"!=d||(u[h]=d),d=i}for(var h=0;c>h;++h){var i=u[h];if(","==i)u[h]="N";else if("%"==i){for(var p=h+1;c>p&&"%"==u[p];++p);for(var m=h&&"!"==u[h-1]||c-1>p&&"1"==u[p]?"1":"N",g=h;p>g;++g)u[g]=m;h=p-1}}for(var h=0,f=l;c>h;++h){var i=u[h];"L"==f&&"1"==i?u[h]="L":o.test(i)&&(f=i)}for(var h=0;c>h;++h)if(r.test(u[h])){for(var p=h+1;c>p&&r.test(u[p]);++p);for(var v="L"==(h?u[h-1]:l),y="L"==(c-1>p?u[p]:l),m=v||y?"L":"R",g=h;p>g;++g)u[g]=m;h=p-1}for(var w,b=[],h=0;c>h;)if(s.test(u[h])){var C=h;for(++h;c>h&&s.test(u[h]);++h);b.push({from:C,to:h,level:0})}else{var x=h,k=b.length;for(++h;c>h&&"L"!=u[h];++h);for(var g=x;h>g;)if(a.test(u[g])){g>x&&b.splice(k,0,{from:x,to:g,level:1});var _=g;for(++g;h>g&&a.test(u[g]);++g);b.splice(k,0,{from:_,to:g,level:2}),x=g}else++g;h>x&&b.splice(k,0,{from:x,to:h,level:1})}return 1==b[0].level&&(w=e.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),1==Vn(b).level&&(w=e.match(/\s+$/))&&(Vn(b).to-=w[0].length,b.push({from:c-w[0].length,to:c,level:0})),b[0].level!=Vn(b).level&&b.push({from:c,to:c,level:b[0].level}),b}}();return t.version="3.11 +",t}();(function(){"use strict";var t=/^(\s*)([*+-]|(\d+)\.)(\s*)/,e="*+-";o.commands.newlineAndIndentContinueMarkdownList=function(i){var n,r=i.getCursor(),o=i.getStateAfter(r.line).list;if(!o||!(n=i.getLine(r.line).match(t)))return i.execCommand("newlineAndIndent"),void 0;var s=n[1],a=n[4],l=e.indexOf(n[2])>=0?n[2]:parseInt(n[3],10)+1+".";i.replaceSelection("\n"+s+l+a,"end")}})(),o.defineMode("xml",function(t,e){function i(t,e){function i(i){return e.tokenize=i,i(t,e)}var r=t.next();if("<"==r){if(t.eat("!"))return t.eat("[")?t.match("CDATA[")?i(o("atom","]]>")):null:t.match("--")?i(o("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),i(s(1))):null;if(t.eat("?"))return t.eatWhile(/[\w\._\-]/),e.tokenize=o("meta","?>"),"meta";var a=t.eat("/");w="";for(var l;l=t.eat(/[^\s\u00a0=<>\"\'\/?]/);)w+=l;return w?(b=a?"closeTag":"openTag",e.tokenize=n,"tag"):"error"}if("&"==r){var c;return c=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),c?"atom":"error"}return t.eatWhile(/[^&<]/),null}function n(t,e){var n=t.next();return">"==n||"/"==n&&t.eat(">")?(e.tokenize=i,b=">"==n?"endTag":"selfcloseTag","tag"):"="==n?(b="equals",null):/[\'\"]/.test(n)?(e.tokenize=r(n),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function r(t){return function(e,i){for(;!e.eol();)if(e.next()==t){i.tokenize=n;break}return"string"}}function o(t,e){return function(n,r){for(;!n.eol();){if(n.match(e)){r.tokenize=i;break}n.next()}return t}}function s(t){return function(e,n){for(var r;null!=(r=e.next());){if("<"==r)return n.tokenize=s(t+1),n.tokenize(e,n);if(">"==r){if(1==t){n.tokenize=i;break}return n.tokenize=s(t-1),n.tokenize(e,n)}}return"meta"}}function a(){for(var t=arguments.length-1;t>=0;t--)C.cc.push(arguments[t])}function l(){return a.apply(null,arguments),!0}function c(t,e){var i=T.doNotIndent.hasOwnProperty(t)||C.context&&C.context.noIndent;C.context={prev:C.context,tagName:t,indent:C.indented,startOfLine:e,noIndent:i}}function u(){C.context&&(C.context=C.context.prev)}function h(t){if("openTag"==t)return C.tagName=w,C.tagStart=x.column(),l(m,d(C.startOfLine));if("closeTag"==t){var e=!1;return C.context?C.context.tagName!=w&&(T.implicitlyClosed.hasOwnProperty(C.context.tagName.toLowerCase())&&u(),e=!C.context||C.context.tagName!=w):e=!0,e&&(k="error"),l(f(e))}return l()}function d(t){return function(e){var i=C.tagName;return C.tagName=C.tagStart=null,"selfcloseTag"==e||"endTag"==e&&T.autoSelfClosers.hasOwnProperty(i.toLowerCase())?(p(i.toLowerCase()),l()):"endTag"==e?(p(i.toLowerCase()),c(i,t),l()):l()}}function f(t){return function(e){return t&&(k="error"),"endTag"==e?(u(),l()):(k="error",l(arguments.callee))}}function p(t){for(var e;;){if(!C.context)return;if(e=C.context.tagName.toLowerCase(),!T.contextGrabbers.hasOwnProperty(e)||!T.contextGrabbers[e].hasOwnProperty(t))return;u()}}function m(t){return"word"==t?(k="attribute",l(g,m)):"endTag"==t||"selfcloseTag"==t?a():(k="error",l(m))}function g(t){return"equals"==t?l(v,m):(T.allowMissing?"word"==t&&(k="attribute"):k="error","endTag"==t||"selfcloseTag"==t?a():l())}function v(t){return"string"==t?l(y):"word"==t&&T.allowUnquoted?(k="string",l()):(k="error","endTag"==t||"selfCloseTag"==t?a():l())}function y(t){return"string"==t?l(y):a()}var w,b,C,x,k,_=t.indentUnit,M=e.multilineTagIndentFactor||1,T=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},S=e.alignCDATA;return{startState:function(){return{tokenize:i,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;k=b=w=null;var i=e.tokenize(t,e);if(e.type=b,(i||b)&&"comment"!=i)for(C=e,x=t;;){var n=e.cc.pop()||h;if(n(b||i))break}return e.startOfLine=!1,k||i},indent:function(t,e,r){var o=t.context;if(t.tokenize!=n&&t.tokenize!=i||o&&o.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return t.tagStart+_*M;if(S&&/<!\[CDATA\[/.test(e))return 0;for(o&&/^<\//.test(e)&&(o=o.prev);o&&!o.startOfLine;)o=o.prev;return o?o.indent+_:0},electricChars:"/",configuration:e.htmlMode?"html":"xml"}}),o.defineMIME("text/xml","xml"),o.defineMIME("application/xml","xml"),o.mimeModes.hasOwnProperty("text/html")||o.defineMIME("text/html",{name:"xml",htmlMode:!0}),o.defineMode("markdown",function(t,e){function i(t,e,i){return e.f=e.inline=i,i(t,e)}function n(t,e,i){return e.f=e.block=i,i(t,e)}function r(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.quote=0,v||t.f!=a||(t.f=h,t.block=s),t.thisLineHasContent=!1,null}function s(t,r){var o=r.list!==!1;if(r.list!==!1&&r.indentationDiff>=0?(4>r.indentationDiff&&(r.indentation-=r.indentationDiff),r.list=null):r.list!==!1&&r.indentation>0?(r.list=null,r.listDepth=Math.floor(r.indentation/4)):r.list!==!1&&(r.list=!1,r.listDepth=0),r.indentationDiff>=4)return r.indentation-=4,t.skipToEnd(),k;if(t.eatSpace())return null;if("#"===t.peek()||r.prevLineHasContent&&t.match(U))r.header=!0;else if(t.eat(">"))for(r.indentation++,r.quote=1,t.eatSpace();t.eat(">");)t.eatSpace(),r.quote++;else{if("["===t.peek())return i(t,r,f);if(t.match($,!0))return D;if(r.prevLineHasContent&&!o||!t.match(P,!0)&&!t.match(z,!0)){if(e.fencedCodeBlocks&&t.match(/^```([\w+#]*)/,!0))return r.localMode=b(RegExp.$1),r.localMode&&(r.localState=r.localMode.startState()),n(t,r,l),k}else r.indentation+=4,r.list=!0,r.listDepth++,e.taskLists&&t.match(R,!1)&&(r.taskList=!0)}return i(t,r,r.inline)}function a(t,e){var i=y.token(t,e.htmlState);return v&&"tag"===i&&"openTag"!==e.htmlState.type&&!e.htmlState.context&&(e.f=h,e.block=s),e.md_inside&&-1!=t.current().indexOf(">")&&(e.f=h,e.block=s,e.htmlState.context=void 0),i}function l(t,e){return t.sol()&&t.match(/^```/,!0)?(e.localMode=e.localState=null,e.f=h,e.block=s,k):e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),k)}function c(t){var e=[];if(t.taskOpen)return"meta";if(t.taskClosed)return"property";if(t.strong&&e.push(F),t.em&&e.push(N),t.linkText&&e.push(I),t.code&&e.push(k),t.header&&e.push(x),t.quote&&e.push(t.quote%2?_:M),t.list!==!1){var i=(t.listDepth-1)%3;i?1===i?e.push(S):e.push(L):e.push(T)}return e.length?e.join(" "):null}function u(t,e){return t.match(W,!0)?c(e):void 0}function h(t,r){var o=r.text(t,r);if(o!==void 0)return o;if(r.list)return r.list=null,c(r);if(r.taskList){var s="x"!==t.match(R,!0)[1];return s?r.taskOpen=!0:r.taskClosed=!0,r.taskList=!1,c(r)}r.taskOpen=!1,r.taskClosed=!1;var l=t.next();if("\\"===l)return t.next(),c(r);if(r.linkTitle){r.linkTitle=!1;var u=l;"("===l&&(u=")"),u=(u+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var h="^\\s*(?:[^"+u+"\\\\]+|\\\\\\\\|\\\\.)"+u;if(t.match(RegExp(h),!0))return H}if("`"===l){var f=c(r),p=t.pos;t.eatWhile("`");var m=1+t.pos-p;return r.code?m===C?(r.code=!1,f):c(r):(C=m,r.code=!0,c(r))}if(r.code)return c(r);if("!"===l&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=d,O;if("["===l&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,c(r);if("]"===l&&r.linkText){var v=c(r);return r.linkText=!1,r.inline=r.f=d,v}if("<"===l&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return i(t,r,g(A,">"));if("<"===l&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return i(t,r,g(E,">"));if("<"===l&&t.match(/^\w/,!1)){if(-1!=t.string.indexOf(">")){var y=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(y)&&(r.md_inside=!0)}return t.backUp(1),n(t,r,a)}if("<"===l&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var w=!1;if(!e.underscoresBreakWords&&"_"===l&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var b=t.pos-2;if(b>=0){var x=t.string.charAt(b);"_"!==x&&x.match(/(\w)/,!1)&&(w=!0)}}var f=c(r);if("*"===l||"_"===l&&!w){if(r.strong===l&&t.eat(l))return r.strong=!1,f;if(!r.strong&&t.eat(l))return r.strong=l,c(r);if(r.em===l)return r.em=!1,f;if(!r.em)return r.em=l,c(r)}else if(" "===l&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return c(r);t.backUp(1)}return c(r)}function d(t,e){if(t.eatSpace())return null;var n=t.next();return"("===n||"["===n?i(t,e,g(H,"("===n?")":"]")):"error"}function f(t,e){return t.match(/^[^\]]*\]:/,!0)?(e.f=p,I):i(t,e,h)}function p(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=h,H)}function m(t){return V[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[t]=RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),V[t]}function g(t,e,i){return i=i||h,function(n,r){return n.match(m(e)),r.inline=r.f=i,t}}var v=o.mimeModes.hasOwnProperty("text/html"),y=o.getMode(t,v?"text/html":"text/plain"),w={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},b=function(){var e,i,n={},r={},s=[];for(var a in o.modes)o.modes.propertyIsEnumerable(a)&&s.push(a);for(e=0;s.length>e;e++)n[s[e]]=s[e];var l=[];for(var a in o.mimeModes)o.mimeModes.propertyIsEnumerable(a)&&l.push({mime:a,mode:o.mimeModes[a]});for(e=0;l.length>e;e++)i=l[e].mime,r[i]=l[e].mime;for(var c in w)(w[c]in n||w[c]in r)&&(n[c]=w[c]);return function(e){return n[e]?o.getMode(t,n[e]):null}}();void 0===e.underscoresBreakWords&&(e.underscoresBreakWords=!0),void 0===e.fencedCodeBlocks&&(e.fencedCodeBlocks=!1),void 0===e.taskLists&&(e.taskLists=!1);var C=0,x="header",k="comment",_="atom",M="number",T="variable-2",S="variable-3",L="keyword",D="hr",O="tag",A="link",E="link",I="link",H="string",N="em",F="strong",$=/^([*\-=_])(?:\s*\1){2,}\s*$/,P=/^[*\-+]\s+/,z=/^[0-9]+\.\s+/,R=/^\[(x| )\](?=\s)/,U=/^(?:\={1,}|-{1,})$/,W=/^[^!\[\]*_\\<>` "'(]+/,V=[];return{startState:function(){return{f:s,prevLineHasContent:!1,thisLineHasContent:!1,block:s,htmlState:o.startState(y),indentation:0,inline:h,text:u,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:o.copyState(y,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?o.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,md_inside:t.md_inside}},token:function(t,e){if(t.sol()){if(t.match(/^\s*$/,!0))return e.prevLineHasContent=!1,r(e);e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.header=!1,e.taskList=!1,e.code=!1,e.f=e.block;var i=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,n=4*Math.floor((i-e.indentation)/4);n>4&&(n=4);var o=e.indentation+n;if(e.indentationDiff=o-e.indentation,e.indentation=o,i>0)return null}return e.f(t,e)},blankLine:r,getType:c}},"xml"),o.defineMIME("text/x-markdown","markdown");var s={bold:"Cmd-B",italic:"Cmd-I",link:"Cmd-K",image:"Cmd-Alt-I",quote:"Cmd-'","ordered-list":"Cmd-Alt-L","unordered-list":"Cmd-L"},a=["bold","italic","|","quote","unordered-list","ordered-list","|","link","image","|","undo","redo","|",{name:"info",action:"http://lab.lepture.com/editor/markdown"},"preview","fullscreen"],l=/Mac/.test(navigator.platform);e.prototype.init=function(t){t=t||{},t.element&&(this.element=t.element),t.toolbar=t.toolbar||a,t.hasOwnProperty("status")||(t.status=["lines","words","cursor"]),this.options=t},e.prototype.render=function(t){t||(t=this.element||document.getElementsByTagName("textarea")[0]),this.element=t;var e=this.options,i=this,r={};for(var a in s)(function(t){r[n(s[t])]=function(e){i.action(t,e)}})(a);r.Enter="newlineAndIndentContinueMarkdownList",this.codemirror=o.fromTextArea(t,{mode:"markdown",theme:"paper",indentWithTabs:!0,lineNumbers:!1,extraKeys:r}),e.toolbar!==!1&&this.createToolbar(),e.status!==!1&&this.createStatusbar()},e.prototype.createToolbar=function(t){if(t=t||this.options.toolbar,t&&0!==t.length){var e=document.createElement("div");e.className="editor-toolbar";var n,r=this;r.toolbar={};for(var o=0;t.length>o;o++)(function(t){var i,o,s,a;t.name?(i=t.name,o=t.shortcut,s=t.action,a=t.className):i=t,n=c(i,{className:a,shortcut:o}),s?"function"==typeof s?n.onclick=s:"string"==typeof s&&(n.href=s,n.target="_blank"):n.onclick=function(){return r.action(i)},r.toolbar[i]=n,e.appendChild(n)})(t[o]);var s=this.codemirror;s.on("cursorActivity",function(){var t=i(s);for(var e in r.toolbar)(function(e){var i=r.toolbar[e];t[e]?i.classList.add("active"):i.classList.remove("active")})(e)});var a=s.getWrapperElement();return a.parentNode.insertBefore(e,a),e}},e.prototype.createStatusbar=function(t){if(t=t||this.options.status,t&&0!==t.length){var e=document.createElement("div");e.className="editor-statusbar";for(var i,n=this.codemirror,r=0;t.length>r;r++)(function(t){var r=document.createElement("span");r.className=t,"words"===t?(r.innerHTML="0",n.on("update",function(){r.innerHTML=n.getValue().length})):"lines"===t?(r.innerHTML="0",n.on("update",function(){r.innerHTML=n.lineCount()})):"cursor"===t&&(r.innerHTML="0:0",n.on("cursorActivity",function(){i=n.getCursor(),r.innerHTML=i.line+":"+i.ch})),e.appendChild(r)})(t[r]);var o=this.codemirror.getWrapperElement();return o.parentNode.insertBefore(e,o.nextSibling),e}},e.prototype.action=function(t,e){if(e=e||this.codemirror){var n=i(e),o=function(i,r){var o,s=e.getCursor("start"),a=e.getCursor("end");return n[t]?(o=e.getLine(s.line),i=o.slice(0,s.ch),r=o.slice(s.ch),"bold"===t?(i=i.replace(/^(.*)?(\*|\_){2}(\S+.*)?$/,"$1$3"),r=r.replace(/^(.*\S+)?(\*|\_){2}(\s+.*)?$/,"$1$3"),s.ch-=2,a.ch-=2):"italic"===t&&(i=i.replace(/^(.*)?(\*|\_)(\S+.*)?$/,"$1$3"),r=r.replace(/^(.*\S+)?(\*|\_)(\s+.*)?$/,"$1$3"),s.ch-=1,a.ch-=1),e.setLine(s.line,i+r),e.setSelection(s,a),e.focus(),void 0):(r=null===r?"":r||i,o=e.getSelection(),e.replaceSelection(i+o+r),s.ch+=i.length,a.ch+=i.length,e.setSelection(s,a),e.focus(),void 0)},s=function(){for(var i=e.getCursor("start"),r=e.getCursor("end"),o={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},s={quote:"> ","unordered-list":"* ","ordered-list":"1. "},a=i.line;r.line>=a;a++)(function(i){var r=e.getLine(i);r=n[t]?r.replace(o[t],"$1"):s[t]+r,e.setLine(i,r)})(a);e.focus()};switch(t){case"bold":o("**");break;case"italic":o("*");break;case"link":o("[","](http://)");break;case"image":o("![","](http://)");break;case"quote":case"unordered-list":case"ordered-list":s();break;case"undo":e.undo(),e.focus();break;case"redo":e.redo(),e.focus();break;case"fullscreen":r(e.getWrapperElement())}}};var c=function(t,e){e=e||{};var i;if("|"===t)return i=document.createElement("i"),i.className="separator",i.innerHTML="|",i;i=document.createElement("a");var r=e.shortcut||s[t];return r&&(r=n(r),i.title=r,i.title=i.title.replace("Cmd",""),l&&(i.title=i.title.replace("Alt",""))),i.className=e.className||"icon-"+t,i};t.Editor=e}(this),function(t){"object"==typeof exports?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e=function(t,e){if("string"!=typeof e||e.length){var i="string"==typeof e?RegExp(e,"i"):e,n=function(t){var e=0;if(3===t.nodeType){var r=t.data.search(i);if(r>=0&&t.data.length>0){var o=t.data.match(i),s=document.createElement("span");s.className="highlight";var a=t.splitText(r);a.splitText(o[0].length);var l=a.cloneNode(!0);s.appendChild(l),a.parentNode.replaceChild(s,a),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var c=0;t.childNodes.length>c;++c)c+=n(t.childNodes[c]);return e};return t.each(function(){n(this)})}},i=/Mac/.test(navigator.userAgent),n=13,r=27,o=37,s=38,a=39,l=40,c=8,u=46,h=16,d=i?18:17,f=9,p=1,m=2,g={a:"[a]",c:"[c]",e:"[e]",i:"[i]",n:"[n]",o:"[o]",s:"[s]",u:"[u]",y:"[y]",z:"[z]"},v={delimiter:",",persist:!0,diacritics:!0,create:!1,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",sortField:null,sortDirection:"asc",valueField:"value",labelField:"text",searchField:["text"],mode:null,theme:"default",wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",load:null,score:null,onChange:null,onItemAdd:null,onItemRemove:null,onClear:null,onOptionAdd:null,onOptionRemove:null,onDropdownOpen:null,onDropdownClose:null,onType:null,render:{item:null,option:null,option_create:null}};t.fn.selectize=function(e){var i=t.fn.selectize.defaults;return e=e||{},this.each(function(){var n,r,o,s,a,l,c,u,h,d,f,p=t(this);if(h=p[0].tagName.toLowerCase(),"string"==typeof e)n=p.data("selectize"),n[e].apply(n,Array.prototype.splice.apply(arguments,1));else{if(c=e.dataAttr||i.dataAttr,u={},u.placeholder=p.attr("placeholder"),u.options={},u.items=[],"select"===h)for(u.maxItems=p.attr("multiple")?null:1,d=p.children(),s=0,a=d.length;a>s;s++)f=t(d[s]),r=f.attr("value")||"",r.length&&(l=c&&f.attr(c)||{text:f.html(),value:r},"string"==typeof l&&(l=JSON.parse(l)),u.options[r]=l,f.is(":selected")&&u.items.push(r));
else if(r=t.trim(p.val()||""),r.length){for(o=r.split(e.delimiter||i.delimiter),s=0,a=o.length;a>s;s++)u.options[o[s]]={text:o[s],value:o[s]};u.items=o}n=new L(p,t.extend(!0,{},i,u,e)),p.data("selectize",n),p.addClass("selectized")}})},t.fn.selectize.defaults=v;var y=function(t){return t!==void 0},w=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},b=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},C=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},x=function(t,e){var i;return function(){var n=this,r=arguments;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(n,r)},e)}},k=function(t,e,i,n){t.on(e,i,function(e){for(var i=e.target;i&&i.parentNode!==t[0];)i=i.parentNode;return e.currentTarget=i,n.apply(this,[e])})},_=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-t.value.length),e.start=i.text.length-n,e.length=n}return e},M=function(t,e,i){var n={};if(i)for(var r=0;i.length>r;r++)n[i[r]]=t.css(i[r]);else n=t.css();return e.css(n),e},T=function(e,i){var n=t("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"nowrap"}).text(e).appendTo("body");M(i,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=n.width();return n.remove(),r},S=function(t){var e=function(e){var i,n,r,o,s,a,l;t.data("grow")!==!1&&(e=e||window.event||{},i=t.val(),e.type&&"keydown"===e.type.toLowerCase()&&(n=e.keyCode,r=n>=97&&122>=n||n>=65&&90>=n||n>=48&&57>=n||32==n,r&&(a=e.shiftKey,l=String.fromCharCode(e.keyCode),l=a?l.toUpperCase():l.toLowerCase(),i+=l)),o=t.attr("placeholder")||"",!i.length&&o.length&&(i=o),s=T(i,t)+4,s!==t.width()&&(t.width(s),t.triggerHandler("resize")))};t.on("keydown keyup update blur",e),e()},L=function(e,i){if(e[0].selectize=this,this.$input=e,this.tagType="select"===e[0].tagName.toLowerCase()?p:m,this.settings=i,this.highlightedValue=null,this.isOpen=!1,this.isLocked=!1,this.isFocused=!1,this.isInputFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.isShiftDown=!1,this.isCtrlDown=!1,this.ignoreFocus=!1,this.hasOptions=!1,this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.$activeOption=null,this.$activeItems=[],this.options={},this.userOptions={},this.items=[],this.renderCache={},this.onSearchChange=x(this.onSearchChange,this.settings.loadThrottle),t.isArray(i.options))for(var n=i.valueField,r=0;i.options.length>r;r++)i.options[r].hasOwnProperty(n)&&(this.options[i.options[r][n]]=i.options[r]);else"object"==typeof i.options&&(t.extend(this.options,i.options),delete this.settings.options);this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.setup()};return L.prototype.setup=function(){var e,n,s,l,m,g,v=this;e=t("<div>").addClass(this.settings.theme).addClass(this.settings.wrapperClass),n=t("<div>").addClass(this.settings.inputClass).addClass("items").toggleClass("has-options",!t.isEmptyObject(this.options)).appendTo(e),s=t('<input type="text">').appendTo(n),l=t("<div>").addClass(this.settings.dropdownClass).hide().appendTo(e),g=this.$input.css("display"),e.css({width:this.$input[0].style.width,display:g}),m=this.settings.mode,e.toggleClass("single","single"===m),e.toggleClass("multi","multi"===m),(null===this.settings.maxItems||this.settings.maxItems>1)&&this.tagType===p&&this.$input.attr("multiple","multiple"),this.settings.placeholder&&s.attr("placeholder",this.settings.placeholder),this.$wrapper=e,this.$control=n,this.$control_input=s,this.$dropdown=l,n.on("mousedown",function(t){t.currentTarget===v.$control[0]?s.trigger("focus"):v.focus(!0),t.preventDefault()}),k(l,"mouseenter","*",function(){return v.onOptionHover.apply(v,arguments)}),k(l,"mousedown","*",function(){return v.onOptionSelect.apply(v,arguments)}),k(n,"mousedown","*:not(input)",function(){return v.onItemSelect.apply(v,arguments)}),S(s),s.on({mousedown:function(t){t.stopPropagation()},keydown:function(){return v.onKeyDown.apply(v,arguments)},keyup:function(){return v.onKeyUp.apply(v,arguments)},keypress:function(){return v.onKeyPress.apply(v,arguments)},resize:function(){v.positionDropdown.apply(v,[])},blur:function(){return v.onBlur.apply(v,arguments)},focus:function(){return v.onFocus.apply(v,arguments)}}),t(document).on({keydown:function(t){if(v.isCtrlDown=t[i?"altKey":"ctrlKey"],v.isShiftDown=t.shiftKey,v.isFocused&&!v.isLocked){var e=(t.target.tagName||"").toLowerCase();if("input"===e||"textarea"===e)return;if(-1!==[h,c,u,r,o,a,f].indexOf(t.keyCode))return v.onKeyDown.apply(v,arguments)}},keyup:function(t){t.keyCode===d?v.isCtrlDown=!1:t.keyCode===h&&(v.isShiftDown=!1)},mousedown:function(t){if(v.isFocused&&!v.isLocked){if(t.target===v.$dropdown[0]){var e=v.ignoreFocus;return v.ignoreFocus=!0,window.setTimeout(function(){v.ignoreFocus=e,v.focus(!1)},0),void 0}v.$control.has(t.target).length||t.target===v.$control[0]||v.blur()}}}),t(window).on({resize:function(){v.isOpen&&v.positionDropdown.apply(v,arguments)}}),this.$input.hide().after(this.$wrapper),t.isArray(this.settings.items)&&(this.setValue(this.settings.items),delete this.settings.items),this.updateOriginalInput(),this.refreshItems(),this.updatePlaceholder(),this.isSetup=!0},L.prototype.trigger=function(t){var e;"function"==typeof this.settings[t]&&(e=Array.prototype.slice.apply(arguments,[1]),this.settings[t].apply(this,e))},L.prototype.onKeyPress=function(t){if(!this.isLocked){var e=String.fromCharCode(t.keyCode||t.which);return this.settings.create&&e===this.settings.delimiter?(this.createItem(),t.preventDefault(),!1):void 0}},L.prototype.onKeyDown=function(e){if(!this.isLocked){switch(e.target===this.$control_input[0],e.keyCode||e.which){case r:return this.blur(),void 0;case l:if(!this.isOpen&&this.hasOptions&&this.isInputFocused)this.open();else if(this.$activeOption){var i=this.$activeOption.next();i.length&&this.setActiveOption(i,!0,!0)}e.preventDefault();break;case s:if(this.$activeOption){var h=this.$activeOption.prev();h.length&&this.setActiveOption(h,!0,!0)}e.preventDefault();break;case n:this.$activeOption&&this.onOptionSelect({currentTarget:this.$activeOption}),e.preventDefault();break;case o:this.advanceSelection(-1,e);break;case a:this.advanceSelection(1,e);break;case f:this.settings.create&&t.trim(this.$control_input.val()).length&&(this.createItem(),e.preventDefault());break;case c:case u:this.deleteSelection(e);break;default:if(this.isFull()||this.isInputHidden)return e.preventDefault(),void 0}this.isFull()||this.focus(!0)}},L.prototype.onKeyUp=function(){if(!this.isLocked){var t=this.$control_input.val()||"";this.lastValue!==t&&(this.lastValue=t,this.onSearchChange(t),this.refreshOptions(),this.trigger("onType",t))}},L.prototype.onSearchChange=function(t){if(this.settings.load&&!this.loadedSearches.hasOwnProperty(t)){var e=this,i=this.$wrapper.addClass("loading");this.loading++,this.loadedSearches[t]=!0,this.settings.load.apply(this,[t,function(t){e.loading=Math.max(e.loading-1,0),t&&t.length&&(e.addOption(t),e.refreshOptions(!1),e.isInputFocused&&e.open()),e.loading||i.removeClass("loading")}])}},L.prototype.onFocus=function(){this.isInputFocused=!0,this.isFocused=!0,this.ignoreFocus||(this.showInput(),this.setActiveItem(null),this.$control.addClass("focus"),this.refreshOptions(!!this.settings.openOnFocus))},L.prototype.onBlur=function(){this.isInputFocused=!1,this.ignoreFocus||(this.close(),this.setTextboxValue(""),this.setActiveOption(null),this.setCaret(this.items.length,!1),this.$activeItems.length||(this.$control.removeClass("focus"),this.isFocused=!1))},L.prototype.onOptionHover=function(t){this.setActiveOption(t.currentTarget,!1)},L.prototype.onOptionSelect=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this.focus(!1);var i=t(e.currentTarget);if(i.hasClass("create"))this.createItem();else{var n=i.attr("data-value");n&&(this.setTextboxValue(""),this.addItem(n))}},L.prototype.onItemSelect=function(t){"multi"===this.settings.mode&&(t.preventDefault(),t.stopPropagation(),this.$control_input.triggerHandler("blur"),this.setActiveItem(t.currentTarget,t),this.focus(!1),this.hideInput())},L.prototype.setTextboxValue=function(t){this.$control_input.val(t).triggerHandler("update"),this.lastValue=t},L.prototype.getValue=function(){return this.tagType===p&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},L.prototype.setValue=function(e){this.clear();for(var i=t.isArray(e)?e:[e],n=0,r=i.length;r>n;n++)this.addItem(i[n])},L.prototype.setActiveItem=function(e,i){var n,r,o,s,a,l,c,u;if(e=t(e),!e.length)return t(this.$activeItems).removeClass("active"),this.$activeItems=[],this.isFocused=this.isInputFocused,void 0;if(n=i&&i.type.toLowerCase(),"mousedown"===n&&this.isShiftDown&&this.$activeItems.length){for(u=this.$control.children(".active:last"),s=Array.prototype.indexOf.apply(this.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[e[0]]),s>a&&(c=s,s=a,a=c),r=s;a>=r;r++)l=this.$control[0].childNodes[r],-1===this.$activeItems.indexOf(l)&&(t(l).addClass("active"),this.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&this.isCtrlDown||"keydown"===n&&this.isShiftDown?e.hasClass("active")?(o=this.$activeItems.indexOf(e[0]),this.$activeItems.splice(o,1),e.removeClass("active")):this.$activeItems.push(e.addClass("active")[0]):(t(this.$activeItems).removeClass("active"),this.$activeItems=[e.addClass("active")[0]]);this.isFocused=!!this.$activeItems.length||this.isInputFocused},L.prototype.setActiveOption=function(e,i,n){var r,o,s,a,l;this.$activeOption&&this.$activeOption.removeClass("active"),this.$activeOption=null,e=t(e),e.length&&(this.$activeOption=e.addClass("active"),(i||!y(i))&&(r=this.$dropdown.height(),o=this.$activeOption.outerHeight(!0),i=this.$dropdown.scrollTop()||0,s=this.$activeOption.offset().top-this.$dropdown.offset().top+i,a=s,l=s-r+o,s+o>r-i?this.$dropdown.stop().animate({scrollTop:l},n?this.settings.scrollDuration:0):i>s&&this.$dropdown.stop().animate({scrollTop:a},n?this.settings.scrollDuration:0)))},L.prototype.hideInput=function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:-1e4}),this.isInputFocused=!1,this.isInputHidden=!0},L.prototype.showInput=function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},L.prototype.focus=function(t){var e=this.ignoreFocus,i=t&&!this.isInputFocused;this.ignoreFocus=!t,this.$control_input[0].focus(),i&&this.onFocus(),this.ignoreFocus=e},L.prototype.blur=function(){this.$control_input.trigger("blur"),this.setActiveItem(null)},L.prototype.parseSearchTokens=function(e){if(e=t.trim(((e||"")+"").toLowerCase()),!e||!e.length)return[];var i,n,r,o,s=[],a=e.split(/ +/);for(i=0,n=a.length;n>i;i++){if(r=b(a[i]),this.settings.diacritics)for(o in g)g.hasOwnProperty(o)&&(r=r.replace(RegExp(o,"g"),g[o]));s.push({string:a[i],regex:RegExp(r,"i")})}return s},L.prototype.getScoreFunction=function(t){var e=this,i=t.tokens,n=function(){return i.length?1===i.length?function(t){var e,n;return t=((t||"")+"").toLowerCase(),n=t.search(i[0].regex),-1===n?0:(e=i[0].string.length/t.length,0===n&&(e+=.5),e)}:function(t){var e,n,r,o;for(t=((t||"")+"").toLowerCase(),e=0,r=0,o=i.length;o>r;r++){if(n=t.search(i[r].regex),-1===n)return 0;0===n&&(e+=.5),e+=i[r].string.length/t.length}return e/i.length}:function(){return 0}}(),r=function(){var t=e.settings.searchField;if("string"==typeof t&&(t=[t]),t&&t.length){if(1===t.length){var i=t[0];return function(t){return t.hasOwnProperty(i)?n(t[i]):0}}return function(e){for(var i=0,r=0,o=0,s=t.length;s>o;o++)e.hasOwnProperty(t[o])&&(r+=n(e[t[o]]),i++);return r/i}}return function(){return 0}}();return r},L.prototype.search=function(e,i){var n,r,o,s,a=this;if(i=i||{},e=t.trim(((e||"")+"").toLowerCase()),e!==this.lastQuery){if(this.lastQuery=e,o={query:e,tokens:this.parseSearchTokens(e),total:0,items:[]},this.settings.score){if(s=this.settings.score.apply(this,[o]),"function"!=typeof s)throw Error('Selectize "score" setting must be a function that returns a function')}else s=this.getScoreFunction(o);if(e.length){for(n in this.options)this.options.hasOwnProperty(n)&&(r=s(this.options[n]),r>0&&o.items.push({score:r,value:n}));o.items.sort(function(t,e){return e.score-t.score})}else{for(n in this.options)this.options.hasOwnProperty(n)&&o.items.push({score:1,value:n});this.settings.sortField&&o.items.sort(function(){var t=a.settings.sortField,e="desc"===a.settings.sortDirection?-1:1;return function(i,n){return i=i&&((a.options[i.value][t]||"")+"").toLowerCase(),n=n&&((a.options[n.value][t]||"")+"").toLowerCase(),i>n?1*e:n>i?-1*e:0}}())}this.currentResults=o}else o=t.extend(!0,{},this.currentResults);return this.prepareResults(o,i)},L.prototype.prepareResults=function(t,e){if(this.settings.hideSelected)for(var i=t.items.length-1;i>=0;i--)-1!==this.items.indexOf(t.items[i].value+"")&&t.items.splice(i,1);return t.total=t.items.length,"number"==typeof e.limit&&(t.items=t.items.slice(0,e.limit)),t},L.prototype.refreshOptions=function(t){t===void 0&&(t=!0);var i,n,r,o=this.$control_input.val(),s=this.search(o,{}),a=[];for(n=s.items.length,"number"==typeof this.settings.maxOptions&&(n=Math.min(n,this.settings.maxOptions)),i=0;n>i;i++)a.push(this.render("option",this.options[s.items[i].value]));if(this.$dropdown.html(a.join("")),this.settings.highlight&&s.query.length&&s.tokens.length)for(i=0,n=s.tokens.length;n>i;i++)e(this.$dropdown,s.tokens[i].regex);if(!this.settings.hideSelected)for(i=0,n=this.items.length;n>i;i++)this.getOption(this.items[i]).addClass("selected");r=this.settings.create&&s.query.length,r&&this.$dropdown.prepend(this.render("option_create",{input:o})),this.hasOptions=s.items.length>0||r,this.hasOptions?(this.setActiveOption(this.$dropdown[0].childNodes[r&&s.items.length>0?1:0]),t&&!this.isOpen&&this.open()):(this.setActiveOption(null),t&&this.isOpen&&this.close())},L.prototype.addOption=function(e,i){if(t.isArray(e))for(var n=0,r=e.length;r>n;n++)this.addOption(e[n][this.settings.valueField],e[n]);else this.options.hasOwnProperty(e)||(e+="",this.userOptions[e]=!0,this.options[e]=i,this.lastQuery=null,this.trigger("onOptionAdd",e,i))},L.prototype.updateOption=function(e,i){if(e+="",this.options[e]=i,y(this.renderCache.item)&&delete this.renderCache.item[e],y(this.renderCache.option)&&delete this.renderCache.option[e],-1!==this.items.indexOf(e)){var n=this.getItem(e),r=t(this.render("item",i));n.hasClass("active")&&r.addClass("active"),n.replaceWith(r)}this.isOpen&&this.refreshOptions(!1)},L.prototype.removeOption=function(t){t+="",delete this.userOptions[t],delete this.options[t],this.lastQuery=null,this.trigger("onOptionRemove",t)},L.prototype.getOption=function(t){return this.$dropdown.children('[data-value="'+t.replace(/(['"])/g,"\\$1")+'"]:first')},L.prototype.getItem=function(e){var i=this.items.indexOf(e);if(-1!==i){i>=this.caretPos&&i++;var n=t(this.$control[0].childNodes[i]);if(n.attr("data-value")===e)return n}return t()},L.prototype.addItem=function(e){var i,n=this,r=this.settings.mode;if(e+="","single"===r&&this.clear(),("multi"!==r||!this.isFull())&&-1===this.items.indexOf(e)&&this.options.hasOwnProperty(e)&&(i=t(this.render("item",this.options[e])),this.items.splice(this.caretPos,0,e),this.insertAtCaret(i),this.refreshClasses(),this.isSetup)){for(var o=this.$dropdown[0].childNodes,s=0;o.length>s;s++){var a=t(o[s]);if(a.attr("data-value")===e){a.remove(),a[0]===this.$activeOption[0]&&this.setActiveOption(o.length?t(o[0]).addClass("active"):null);break}}!o.length||null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems?this.close():this.positionDropdown(),this.isFocused&&window.setTimeout(function(){"single"===r?(n.blur(),n.focus(!1),n.hideInput()):n.focus(!1)},0),this.updatePlaceholder(),this.updateOriginalInput(),this.trigger("onItemAdd",e,i)}},L.prototype.removeItem=function(t){var e,i,n;e="object"==typeof t?t:this.getItem(t),t=e.attr("data-value")+"",i=this.items.indexOf(t),-1!==i&&(e.remove(),e.hasClass("active")&&(n=this.$activeItems.indexOf(e[0]),this.$activeItems.splice(n,1)),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t),this.setCaret(i),this.positionDropdown(),this.refreshOptions(!1),this.refreshClasses(),this.hasOptions?this.isInputFocused&&this.open():this.close(),this.updatePlaceholder(),this.updateOriginalInput(),this.trigger("onItemRemove",t))},L.prototype.createItem=function(){var e=this,i=t.trim(this.$control_input.val()||""),n=this.caretPos;if(i.length){this.lock(),this.close();var r="function"==typeof this.settings.create?this.settings.create:function(t){var i={};return i[e.settings.labelField]=t,i[e.settings.valueField]=t,i},o=C(function(t){e.unlock(),e.focus(!1);var i=t&&t[e.settings.valueField];i&&(e.setTextboxValue(""),e.addOption(i,t),e.setCaret(n,!1),e.addItem(i),e.refreshOptions(!0),e.focus(!1))}),s=r(i,o);s!==void 0&&o(s)}},L.prototype.refreshItems=function(){if(this.lastQuery=null,this.isSetup)for(var t=0;this.items.length>t;t++)this.addItem(this.items);this.refreshClasses(),this.updateOriginalInput()},L.prototype.refreshClasses=function(){var t=this.isFull();this.$control.toggleClass("full",t).toggleClass("not-full",!t),this.$control.toggleClass("has-items",this.items.length>0),this.$control_input.data("grow",!t)},L.prototype.isFull=function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},L.prototype.updateOriginalInput=function(){var t,e,i;if("select"===this.$input[0].tagName.toLowerCase()){for(i=[],t=0,e=this.items.length;e>t;t++)i.push('<option value="'+w(this.items[t])+'" selected="selected"></option>');i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),this.$input.html(i.join(""))}else this.$input.val(this.getValue());this.$input.trigger("change"),this.isSetup&&this.trigger("onChange",this.$input.val())},L.prototype.updatePlaceholder=function(){if(this.settings.placeholder){var t=this.$control_input;this.items.length?t.removeAttr("placeholder"):t.attr("placeholder",this.settings.placeholder),t.triggerHandler("update")}},L.prototype.open=function(){this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.isOpen=!0,this.positionDropdown(),this.$control.addClass("dropdown-active"),this.$dropdown.show(),this.trigger("onDropdownOpen",this.$dropdown))},L.prototype.close=function(){this.isOpen&&(this.$dropdown.hide(),this.$control.removeClass("dropdown-active"),this.isOpen=!1,this.trigger("onDropdownClose",this.$dropdown))},L.prototype.positionDropdown=function(){var t=this.$control,e=t.position();e.top+=t.outerHeight(!0),this.$dropdown.css({width:t.outerWidth(),top:e.top,left:e.left})},L.prototype.clear=function(){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.setCaret(0),this.updatePlaceholder(),this.updateOriginalInput(),this.refreshClasses(),this.trigger("onClear"))},L.prototype.insertAtCaret=function(e){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(e):t(this.$control[0].childNodes[i]).before(e),this.setCaret(i+1)},L.prototype.deleteSelection=function(e){var i,n,r,o,s,a,l;if(r=e.keyCode===c?-1:1,o=_(this.$control_input[0]),this.$activeItems.length){for(l=this.$control.children(".active:"+(r>0?"last":"first")),a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[l[0]]),this.$activeItems.length>1&&r>0&&a--,s=[],i=0,n=this.$activeItems.length;n>i;i++)s.push(t(this.$activeItems[i]).attr("data-value"));for(;s.length;)this.removeItem(s.pop());this.setCaret(a),e.preventDefault(),e.stopPropagation()}else(this.isInputFocused||"single"===this.settings.mode)&&this.items.length&&(0>r&&0===o.start&&0===o.length?this.removeItem(this.items[this.caretPos-1]):r>0&&o.start===this.$control_input.val().length&&this.removeItem(this.items[this.caretPos]))},L.prototype.advanceSelection=function(t,e){if(0!==t){var i=t>0?"last":"first",n=_(this.$control_input[0]);if(this.isInputFocused){var r=this.$control_input.val().length,o=0>t?0===n.start&&0===n.length:n.start===r;o&&!r&&this.advanceCaret(t,e)}else{var s=this.$control.children(".active:"+i);if(s.length){var a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[s[0]]);this.setCaret(t>0?a+1:a)}}}},L.prototype.advanceCaret=function(t,e){if(0!==t){var i=t>0?"next":"prev";if(this.isShiftDown){var n=this.$control_input[i]();n.length&&(this.blur(),this.setActiveItem(n),e&&e.preventDefault())}else this.setCaret(this.caretPos+t)}},L.prototype.setCaret=function(e,i){e="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,e));var n,r,o,s;for(o=this.$control.children(":not(input)"),n=0,r=o.length;r>n;n++)s=t(o[n]).detach(),e>n?this.$control_input.before(s):this.$control.append(s);this.caretPos=e,i&&this.isSetup&&this.focus(!0)},L.prototype.lock=function(){this.isLocked=!0,this.$control.addClass("locked")},L.prototype.unlock=function(){this.isLocked=!1,this.$control.removeClass("locked")},L.prototype.render=function(t,e){o=y(o)?o:!0;var i,n,r="",o=!1;if(-1!==["option","item"].indexOf(t)&&(i=e[this.settings.valueField],o=y(i)),o&&(y(this.renderCache[t])||(this.renderCache[t]={}),this.renderCache[t].hasOwnProperty(i)))return this.renderCache[t][i];if(this.settings.render&&"function"==typeof this.settings.render[t])r=this.settings.render[t].apply(this,[e]);else switch(n=e[this.settings.labelField],t){case"option":r='<div class="option">'+n+"</div>";break;case"item":r='<div class="item">'+n+"</div>";break;case"option_create":r='<div class="create">Create <strong>'+w(e.input)+"</strong>&hellip;</div>"}return y(i)&&(r=r.replace(/^[\	 ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i,'<$1 data-value="'+i+'"')),o&&(this.renderCache[t][i]=r),r},L}),function(t){t.fn.slugify=function(e,i){var n=this,r=t(e),o=n.is("input")||n.is("textarea"),s=t.extend({slugFunc:function(t,e){return e(t)}},i),a=function(t){return s.slugFunc(t,function(t){if(!t)return"";for(var e={"2d":"-",20:"-",24:"s",26:"and",30:"0",31:"1",32:"2",33:"3",34:"4",35:"5",36:"6",37:"7",38:"8",39:"9",41:"A",42:"B",43:"C",44:"D",45:"E",46:"F",47:"G",48:"H",49:"I",50:"P",51:"Q",52:"R",53:"S",54:"T",55:"U",56:"V",57:"W",58:"X",59:"Y",61:"a",62:"b",63:"c",64:"d",65:"e",66:"f",67:"g",68:"h",69:"i",70:"p",71:"q",72:"r",73:"s",74:"t",75:"u",76:"v",77:"w",78:"x",79:"y",100:"A",101:"a",102:"A",103:"a",104:"A",105:"a",106:"C",107:"c",108:"C",109:"c",110:"D",111:"d",112:"E",113:"e",114:"E",115:"e",116:"E",117:"e",118:"E",119:"e",120:"G",121:"g",122:"G",123:"g",124:"H",125:"h",126:"H",127:"h",128:"I",129:"i",130:"I",131:"i",132:"IJ",133:"ij",134:"J",135:"j",136:"K",137:"k",138:"k",139:"L",140:"l",141:"L",142:"l",143:"N",144:"n",145:"N",146:"n",147:"N",148:"n",149:"n",150:"O",151:"o",152:"OE",153:"oe",154:"R",155:"r",156:"R",157:"r",158:"R",159:"r",160:"S",161:"s",162:"T",163:"t",164:"T",165:"t",166:"T",167:"t",168:"U",169:"u",170:"U",171:"u",172:"U",173:"u",174:"W",175:"w",176:"Y",177:"y",178:"Y",179:"Z",180:"b",181:"B",182:"b",183:"b",184:"b",185:"b",186:"C",187:"C",188:"c",189:"D",190:"E",191:"F",192:"f",193:"G",194:"Y",195:"h",196:"i",197:"I",198:"K",199:"k",200:"A",201:"a",202:"A",203:"a",204:"E",205:"e",206:"E",207:"e",208:"I",209:"i",210:"R",211:"r",212:"R",213:"r",214:"U",215:"u",216:"U",217:"u",218:"S",219:"s",220:"n",221:"d",222:"8",223:"8",224:"Z",225:"z",226:"A",227:"a",228:"E",229:"e",230:"O",231:"o",232:"Y",233:"y",234:"l",235:"n",236:"t",237:"j",238:"db",239:"qp",240:"<",241:"?",242:"?",243:"B",244:"U",245:"A",246:"E",247:"e",248:"J",249:"j",250:"a",251:"a",252:"a",253:"b",254:"c",255:"e",256:"d",257:"d",258:"e",259:"e",260:"g",261:"g",262:"g",263:"Y",264:"x",265:"u",266:"h",267:"h",268:"i",269:"i",270:"w",271:"m",272:"n",273:"n",274:"N",275:"o",276:"oe",277:"m",278:"o",279:"r",280:"R",281:"R",282:"S",283:"f",284:"f",285:"f",286:"f",287:"t",288:"t",289:"u",290:"Z",291:"Z",292:"3",293:"3",294:"?",295:"?",296:"5",297:"C",298:"O",299:"B",363:"a",364:"e",365:"i",366:"o",367:"u",368:"c",369:"d",386:"A",388:"E",389:"H",390:"i",391:"A",392:"B",393:"r",394:"A",395:"E",396:"Z",397:"H",398:"O",399:"I",400:"E",401:"E",402:"T",403:"r",404:"E",405:"S",406:"I",407:"I",408:"J",409:"jb",410:"A",411:"B",412:"B",413:"r",414:"D",415:"E",416:"X",417:"3",418:"N",419:"N",420:"P",421:"C",422:"T",423:"y",424:"O",425:"X",426:"U",427:"h",428:"W",429:"W",430:"a",431:"6",432:"B",433:"r",434:"d",435:"e",436:"x",437:"3",438:"N",439:"N",440:"P",441:"C",442:"T",443:"Y",444:"qp",445:"x",446:"U",447:"h",448:"W",449:"W",450:"e",451:"e",452:"h",453:"r",454:"e",455:"s",456:"i",457:"i",458:"j",459:"jb",460:"W",461:"w",462:"Tb",463:"tb",464:"IC",465:"ic",466:"A",467:"a",468:"IA",469:"ia",470:"Y",471:"y",472:"O",473:"o",474:"V",475:"v",476:"V",477:"v",478:"Oy",479:"oy",480:"C",481:"c",490:"R",491:"r",492:"F",493:"f",494:"H",495:"h",496:"X",497:"x",498:"3",499:"3",500:"d",501:"d",502:"d",503:"d",504:"R",505:"R",506:"R",507:"R",508:"JT",509:"JT",510:"E",511:"e",512:"JT",513:"jt",514:"JX",515:"JX",531:"U",532:"D",533:"Q",534:"N",535:"T",536:"2",537:"F",538:"r",539:"p",540:"z",541:"2",542:"n",543:"x",544:"U",545:"B",546:"j",547:"t",548:"n",549:"C",550:"R",551:"8",552:"R",553:"O",554:"P",555:"O",556:"S",561:"w",562:"f",563:"q",564:"n",565:"t",566:"q",567:"t",568:"n",569:"p",570:"h",571:"a",572:"n",573:"a",574:"u",575:"j",576:"u",577:"2",578:"n",579:"2",580:"n",581:"g",582:"l",583:"uh",584:"p",585:"o",586:"S",587:"u","4a":"J","4b":"K","4c":"L","4d":"M","4e":"N","4f":"O","5a":"Z","6a":"j","6b":"k","6c":"l","6d":"m","6e":"n","6f":"o","7a":"z",a2:"c",a3:"f",a5:"Y",a7:"s",a9:"c",aa:"a",ae:"r",b2:"2",b3:"3",b5:"u",b6:"p",b9:"1",c0:"A",c1:"A",c2:"A",c3:"A",c4:"A",c5:"A",c6:"AE",c7:"C",c8:"E",c9:"E",ca:"E",cb:"E",cc:"I",cd:"I",ce:"I",cf:"I",d0:"D",d1:"N",d2:"O",d3:"O",d4:"O",d5:"O",d6:"O",d7:"X",d8:"O",d9:"U",da:"U",db:"U",dc:"U",dd:"Y",de:"p",df:"b",e0:"a",e1:"a",e2:"a",e3:"a",e4:"a",e5:"a",e6:"ae",e7:"c",e8:"e",e9:"e",ea:"e",eb:"e",ec:"i",ed:"i",ee:"i",ef:"i",f0:"o",f1:"n",f2:"o",f3:"o",f4:"o",f5:"o",f6:"o",f8:"o",f9:"u",fa:"u",fb:"u",fc:"u",fd:"y",ff:"y","10a":"C","10b":"c","10c":"C","10d":"c","10e":"D","10f":"d","11a":"E","11b":"e","11c":"G","11d":"g","11e":"G","11f":"g","12a":"I","12b":"i","12c":"I","12d":"i","12e":"I","12f":"i","13a":"l","13b":"L","13c":"l","13d":"L","13e":"l","13f":"L","14a":"n","14b":"n","14c":"O","14d":"o","14e":"O","14f":"o","15a":"S","15b":"s","15c":"S","15d":"s","15e":"S","15f":"s","16a":"U","16b":"u","16c":"U","16d":"u","16e":"U","16f":"u","17a":"z","17b":"Z","17c":"z","17d":"Z","17e":"z","17f":"f","18a":"D","18b":"d","18c":"d","18d":"q","18e":"E","18f":"e","19a":"l","19b":"h","19c":"w","19d":"N","19e":"n","19f":"O","1a0":"O","1a1":"o","1a2":"P","1a3":"P","1a4":"P","1a5":"p","1a6":"R","1a7":"S","1a8":"s","1a9":"E","1aa":"l","1ab":"t","1ac":"T","1ad":"t","1ae":"T","1af":"U","1b0":"u","1b1":"U","1b2":"U","1b3":"Y","1b4":"y","1b5":"Z","1b6":"z","1b7":"3","1b8":"3","1b9":"3","1ba":"3","1bb":"2","1bc":"5","1bd":"5","1be":"5","1bf":"p","1c4":"DZ","1c5":"Dz","1c6":"dz","1c7":"Lj","1c8":"Lj","1c9":"lj","1ca":"NJ","1cb":"Nj","1cc":"nj","1cd":"A","1ce":"a","1cf":"I","1d0":"i","1d1":"O","1d2":"o","1d3":"U","1d4":"u","1d5":"U","1d6":"u","1d7":"U","1d8":"u","1d9":"U","1da":"u","1db":"U","1dc":"u","1dd":"e","1de":"A","1df":"a","1e0":"A","1e1":"a","1e2":"AE","1e3":"ae","1e4":"G","1e5":"g","1e6":"G","1e7":"g","1e8":"K","1e9":"k","1ea":"Q","1eb":"q","1ec":"Q","1ed":"q","1ee":"3","1ef":"3","1f0":"J","1f1":"dz","1f2":"dZ","1f3":"DZ","1f4":"g","1f5":"G","1f6":"h","1f7":"p","1f8":"N","1f9":"n","1fa":"A","1fb":"a","1fc":"AE","1fd":"ae","1fe":"O","1ff":"o","20a":"I","20b":"i","20c":"O","20d":"o","20e":"O","20f":"o","21a":"T","21b":"t","21c":"3","21d":"3","21e":"H","21f":"h","22a":"O","22b":"o","22c":"O","22d":"o","22e":"O","22f":"o","23a":"A","23b":"C","23c":"c","23d":"L","23e":"T","23f":"s","24a":"Q","24b":"q","24c":"R","24d":"r","24e":"Y","24f":"y","25a":"e","25b":"3","25c":"3","25d":"3","25e":"3","25f":"j","26a":"i","26b":"I","26c":"I","26d":"I","26e":"h","26f":"w","27a":"R","27b":"r","27c":"R","27d":"R","27e":"r","27f":"r","28a":"u","28b":"v","28c":"A","28d":"M","28e":"Y","28f":"Y","29a":"B","29b":"G","29c":"H","29d":"j","29e":"K","29f":"L","2a0":"q","2a1":"?","2a2":"c","2a3":"dz","2a4":"d3","2a5":"dz","2a6":"ts","2a7":"tf","2a8":"tc","2a9":"fn","2aa":"ls","2ab":"lz","2ac":"ww","2ae":"u","2af":"u","2b0":"h","2b1":"h","2b2":"j","2b3":"r","2b4":"r","2b5":"r","2b6":"R","2b7":"W","2b8":"Y","2df":"x","2e0":"Y","2e1":"1","2e2":"s","2e3":"x","2e4":"c","36a":"h","36b":"m","36c":"r","36d":"t","36e":"v","36f":"x","37b":"c","37c":"c","37d":"c","38a":"I","38c":"O","38e":"Y","38f":"O","39a":"K","39b":"A","39c":"M","39d":"N","39e":"E","39f":"O","3a0":"TT","3a1":"P","3a3":"E","3a4":"T","3a5":"Y","3a6":"O","3a7":"X","3a8":"Y","3a9":"O","3aa":"I","3ab":"Y","3ac":"a","3ad":"e","3ae":"n","3af":"i","3b0":"v","3b1":"a","3b2":"b","3b3":"y","3b4":"d","3b5":"e","3b6":"c","3b7":"n","3b8":"0","3b9":"1","3ba":"k","3bb":"j","3bc":"u","3bd":"v","3be":"c","3bf":"o","3c0":"tt","3c1":"p","3c2":"s","3c3":"o","3c4":"t","3c5":"u","3c6":"q","3c7":"X","3c8":"Y","3c9":"w","3ca":"i","3cb":"u","3cc":"o","3cd":"u","3ce":"w","3d0":"b","3d1":"e","3d2":"Y","3d3":"Y","3d4":"Y","3d5":"O","3d6":"w","3d7":"x","3d8":"Q","3d9":"q","3da":"C","3db":"c","3dc":"F","3dd":"f","3de":"N","3df":"N","3e2":"W","3e3":"w","3e4":"q","3e5":"q","3e6":"h","3e7":"e","3e8":"S","3e9":"s","3ea":"X","3eb":"x","3ec":"6","3ed":"6","3ee":"t","3ef":"t","3f0":"x","3f1":"e","3f2":"c","3f3":"j","3f4":"O","3f5":"E","3f6":"E","3f7":"p","3f8":"p","3f9":"C","3fa":"M","3fb":"M","3fc":"p","3fd":"C","3fe":"C","3ff":"C","40a":"Hb","40b":"Th","40c":"K","40d":"N","40e":"Y","40f":"U","41a":"K","41b":"jI","41c":"M","41d":"H","41e":"O","41f":"TT","42a":"b","42b":"bI","42c":"b","42d":"E","42e":"IO","42f":"R","43a":"K","43b":"JI","43c":"M","43d":"H","43e":"O","43f":"N","44a":"b","44b":"bI","44c":"b","44d":"e","44e":"io","44f":"r","45a":"Hb","45b":"h","45c":"k","45d":"n","45e":"y","45f":"u","46a":"mY","46b":"my","46c":"Im","46d":"Im","46e":"3","46f":"3","47a":"O","47b":"o","47c":"W","47d":"w","47e":"W","47f":"W","48a":"H","48b":"H","48c":"B","48d":"b","48e":"P","48f":"p","49a":"K","49b":"k","49c":"K","49d":"k","49e":"K","49f":"k","4a0":"K","4a1":"k","4a2":"H","4a3":"h","4a4":"H","4a5":"h","4a6":"Ih","4a7":"ih","4a8":"O","4a9":"o","4aa":"C","4ab":"c","4ac":"T","4ad":"t","4ae":"Y","4af":"y","4b0":"Y","4b1":"y","4b2":"X","4b3":"x","4b4":"TI","4b5":"ti","4b6":"H","4b7":"h","4b8":"H","4b9":"h","4ba":"H","4bb":"h","4bc":"E","4bd":"e","4be":"E","4bf":"e","4c0":"I","4c1":"X","4c2":"x","4c3":"K","4c4":"k","4c5":"jt","4c6":"jt","4c7":"H","4c8":"h","4c9":"H","4ca":"h","4cb":"H","4cc":"h","4cd":"M","4ce":"m","4cf":"l","4d0":"A","4d1":"a","4d2":"A","4d3":"a","4d4":"AE","4d5":"ae","4d6":"E","4d7":"e","4d8":"e","4d9":"e","4da":"E","4db":"e","4dc":"X","4dd":"X","4de":"3","4df":"3","4e0":"3","4e1":"3","4e2":"N","4e3":"n","4e4":"N","4e5":"n","4e6":"O","4e7":"o","4e8":"O","4e9":"o","4ea":"O","4eb":"o","4ec":"E","4ed":"e","4ee":"Y","4ef":"y","4f0":"Y","4f1":"y","4f2":"Y","4f3":"y","4f4":"H","4f5":"h","4f6":"R","4f7":"r","4f8":"bI","4f9":"bi","4fa":"F","4fb":"f","4fc":"X","4fd":"x","4fe":"X","4ff":"x","50a":"H","50b":"h","50c":"G","50d":"g","50e":"T","50f":"t","51a":"Q","51b":"q","51c":"W","51d":"w","53a":"d","53b":"r","53c":"L","53d":"Iu","53e":"O","53f":"y","54a":"m","54b":"o","54c":"N","54d":"U","54e":"Y","54f":"S","56a":"d","56b":"h","56c":"l","56d":"lu","56e":"d","56f":"y","57a":"w","57b":"2","57c":"n","57d":"u","57e":"y","57f":"un"},i="",n=0;t.length>n;n++)i+=e[t.charCodeAt(n).toString(16)]||"";
return i.toLowerCase()})},l=function(){null!==n.val()&&""!==n.val()?n.addClass("slugify-locked"):n.removeClass("slugify-locked")},c=function(){var e=a(t(this).val());o?n.filter(":not(.slugify-locked)").val(e):n.filter(":not(.slugify-locked)").text(e)};return r.keyup(c).change(c),n.change(function(){var e=a(t(this).val());n.val(e).text(e),l()}),l(),this}}(jQuery),function(t){function e(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function i(t,e,i){return t.length>e?t:Array(e-t.length+1).join(i||" ")+t}function n(t,e,i,n,r,o){return e&&i?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><ul><li'+(o?' class="collapse in"':"")+">"+'<div class="datepicker">'+f.template+"</div>"+"</li>"+'<li class="picker-switch accordion-toggle"><a><i class="'+t+'"></i></a></li>'+"<li"+(o?' class="collapse"':"")+">"+'<div class="timepicker">'+p.getTemplate(n,r)+"</div>"+"</li>"+"</ul>"+"</div>":i?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+p.getTemplate(n,r)+"</div>"+"</div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+f.template+"</div>"+"</div>"}function r(){return new Date(Date.UTC.apply(Date,arguments))}void 0!=window.orientation;var o=function(t,e){this.id=s++,this.init(t,e)};o.prototype={constructor:o,init:function(e,i){var r;if(!i.pickTime&&!i.pickDate)throw Error("Must choose at least one picker");if(this.options=i,this.$element=t(e),this.language=i.language in a?i.language:"en",this.pickDate=i.pickDate,this.pickTime=i.pickTime,this.isInput=this.$element.is("input"),this.component=!1,(this.$element.find(".input-append")||this.$element.find(".input-prepend"))&&(this.component=this.$element.find(".add-on")),this.format=i.format,this.format||(this.format=this.isInput?this.$element.data("format"):this.$element.find("input").data("format"),this.format||(this.format="MM/dd/yyyy")),this._compileFormat(),this.component&&(r=this.component.find("i")),this.pickTime&&(r&&r.length&&(this.timeIcon=r.data("time-icon")),this.timeIcon||(this.timeIcon="icon-time"),r.addClass(this.timeIcon)),this.pickDate&&(r&&r.length&&(this.dateIcon=r.data("date-icon")),this.dateIcon||(this.dateIcon="icon-calendar"),r.removeClass(this.timeIcon),r.addClass(this.dateIcon)),this.widget=t(n(this.timeIcon,i.pickDate,i.pickTime,i.pick12HourFormat,i.pickSeconds,i.collapse)).appendTo("body"),this.minViewMode=i.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=i.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=i.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(i.startDate||this.$element.data("date-startdate")),this.setEndDate(i.endDate||this.$element.data("date-enddate")),this.fillDow(),this.fillMonths(),this.fillHours(),this.fillMinutes(),this.fillSeconds(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(t){this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(),t&&(t.stopPropagation(),t.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(){for(var t=this.widget.find(".collapse"),e=0;t.length>e;e++){var i=t.eq(e).data("collapse");if(i&&i.transitioning)return}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.set(),this.$element.trigger({type:"hide",date:this._date}),this._detachDatePickerGlobalEvents()},set:function(){var t="";if(this._unset||(t=this.formatDate(this._date)),this.isInput)this.$element.val(t),this._resetMaskPos(this.$element);else{if(this.component){var e=this.$element.find("input");e.val(t),this._resetMaskPos(e)}this.$element.data("date",t)}},setValue:function(t){this._unset=t?!1:!0,"string"==typeof t?this._date=this.parseDate(t):t&&(this._date=new Date(t)),this.set(),this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(t){t?this.setValue(t.valueOf()):this.setValue(null)},setStartDate:function(t){t instanceof Date?this.startDate=t:"string"==typeof t?(this.startDate=new r(t),this.startDate.getUTCFullYear()||(this.startDate=-1/0)):this.startDate=-1/0,this.viewDate&&this.update()},setEndDate:function(t){t instanceof Date?this.endDate=t:"string"==typeof t?(this.endDate=new r(t),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var t=this._date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())},setLocalDate:function(t){t?this.setValue(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):this.setValue(null)},place:function(){var e="absolute",i=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(),i.top=i.top+this.height;var n=t(window);void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),i.left=i.left-this.widget.width()+20),this._isInFixed()&&(e="fixed",i.top-=n.scrollTop(),i.left-=n.scrollLeft()),n.width()<i.left+this.widget.outerWidth()?(i.right=n.width()-i.left-this.width,i.left="auto",this.widget.addClass("pull-right")):(i.right="auto",this.widget.removeClass("pull-right")),this.widget.css({position:e,top:i.top,left:i.left,right:i.right})},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(t){var e=t;if(!e&&(e=this.isInput?this.$element.val():this.$element.find("input").val(),e&&(this._date=this.parseDate(e)),!this._date)){var i=new Date;this._date=r(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}this.viewDate=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var e=this.weekStart,i=t("<tr>");this.weekStart+7>e;)i.append('<th class="dow">'+a[this.language].daysMin[e++%7]+"</th>");this.widget.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+a[this.language].monthsShort[e++]+"</span>";this.widget.find(".datepicker-months td").append(t)},fillDate:function(){var e=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),n=r(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),o="object"==typeof this.startDate?this.startDate.getUTCFullYear():-1/0,s="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,l="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,c="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(a[this.language].months[i]+" "+e);var u=r(e,i-1,28,0,0,0,0),h=f.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(h),u.setUTCDate(h-(u.getUTCDay()-this.weekStart+7)%7),(e==o&&s>=i||o>e)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(e==l&&i>=c||e>l)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var d=new Date(u.valueOf());d.setUTCDate(d.getUTCDate()+42),d=d.valueOf();for(var p,m,g=[];d>u.valueOf();)u.getUTCDay()===this.weekStart&&(p=t("<tr>"),g.push(p)),m="",e>u.getUTCFullYear()||u.getUTCFullYear()==e&&i>u.getUTCMonth()?m+=" old":(u.getUTCFullYear()>e||u.getUTCFullYear()==e&&u.getUTCMonth()>i)&&(m+=" new"),u.valueOf()===n.valueOf()&&(m+=" active"),u.valueOf()+864e5<=this.startDate&&(m+=" disabled"),u.valueOf()>this.endDate&&(m+=" disabled"),p.append('<td class="day'+m+'">'+u.getUTCDate()+"</td>"),u.setUTCDate(u.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(g);var v=this._date.getUTCFullYear(),y=this.widget.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");v===e&&y.eq(this._date.getUTCMonth()).addClass("active"),o>v-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),v+1>l&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var w=0;12>w;w++)e==o&&s>w||o>e?t(y[w]).addClass("disabled"):(e==l&&w>c||e>l)&&t(y[w]).addClass("disabled");g="",e=10*parseInt(e/10,10);var b=this.widget.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>e&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),e+9>l&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),e-=1;for(var w=-1;11>w;w++)g+='<span class="year'+(-1===w||10===w?" old":"")+(v===e?" active":"")+(o>e||e>l?" disabled":"")+'">'+e+"</span>",e+=1;b.html(g)},fillHours:function(){var t=this.widget.find(".timepicker .timepicker-hours table");t.parent().hide();var e="";if(this.options.pick12HourFormat)for(var n=1,r=0;3>r;r+=1){e+="<tr>";for(var o=0;4>o;o+=1){var s=""+n;e+='<td class="hour">'+i(s,2,"0")+"</td>",n++}e+="</tr>"}else for(var n=0,r=0;6>r;r+=1){e+="<tr>";for(var o=0;4>o;o+=1){var s=""+n;e+='<td class="hour">'+i(s,2,"0")+"</td>",n++}e+="</tr>"}t.html(e)},fillMinutes:function(){var t=this.widget.find(".timepicker .timepicker-minutes table");t.parent().hide();for(var e="",n=0,r=0;5>r;r++){e+="<tr>";for(var o=0;4>o;o+=1){var s=""+n;e+='<td class="minute">'+i(s,2,"0")+"</td>",n+=3}e+="</tr>"}t.html(e)},fillSeconds:function(){var t=this.widget.find(".timepicker .timepicker-seconds table");t.parent().hide();for(var e="",n=0,r=0;5>r;r++){e+="<tr>";for(var o=0;4>o;o+=1){var s=""+n;e+='<td class="second">'+i(s,2,"0")+"</td>",n+=3}e+="</tr>"}t.html(e)},fillTime:function(){if(this._date){var t=this.widget.find(".timepicker span[data-time-component]");t.closest("table");var e=this.options.pick12HourFormat,n=this._date.getUTCHours(),r="AM";e&&(n>=12&&(r="PM"),0===n?n=12:12!=n&&(n%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(r)),n=i(""+n,2,"0");var o=i(""+this._date.getUTCMinutes(),2,"0"),s=i(""+this._date.getUTCSeconds(),2,"0");t.filter("[data-time-component=hours]").text(n),t.filter("[data-time-component=minutes]").text(o),t.filter("[data-time-component=seconds]").text(s)}},click:function(e){e.stopPropagation(),e.preventDefault(),this._unset=!1;var i=t(e.target).closest("span, td, th");if(1===i.length&&!i.is(".disabled"))switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var n=this.viewDate,o=f.modes[this.viewMode].navFnc,s=f.modes[this.viewMode].navStep;"prev"===i[0].className&&(s=-1*s),n["set"+o](n["get"+o]()+s),this.fillDate(),this.set()}break;case"span":if(i.is(".month")){var a=i.parent().find("span").index(i);this.viewDate.setUTCMonth(a)}else{var l=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(l)}0!==this.viewMode&&(this._date=r(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set();break;case"td":if(i.is(".day")){var c=parseInt(i.text(),10)||1,a=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCFullYear();i.is(".old")?0===a?(a=11,l-=1):a-=1:i.is(".new")&&(11==a?(a=0,l+=1):a+=1),this._date=r(l,a,c,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=r(l,a,Math.min(28,c),0,0,0,0),this.fillDate(),this.set(),this.notifyChange()}}},actions:{incrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(){this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(){this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(){this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(){var t=this._date.getUTCHours();t>=12?t-=12:t+=12,this._date.setUTCHours(t)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){this.widget.find(".timepicker .timepicker-picker").hide(),this.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var i=t(e.target),n=parseInt(i.text(),10);if(this.options.pick12HourFormat){var r=this._date.getUTCHours();r>=12?12!=n&&(n=(n+12)%24):12===n?n=0:n%=12}this._date.setUTCHours(n),this.actions.showPicker.call(this)},selectMinute:function(e){var i=t(e.target),n=parseInt(i.text(),10);this._date.setUTCMinutes(n),this.actions.showPicker.call(this)},selectSecond:function(e){var i=t(e.target),n=parseInt(i.text(),10);this._date.setUTCSeconds(n),this.actions.showPicker.call(this)}},doAction:function(e){e.stopPropagation(),e.preventDefault(),this._date||(this._date=r(1970,0,0,0,0,0,0));var i=t(e.currentTarget).data("action"),n=this.actions[i].apply(this,arguments);return this.set(),this.fillTime(),this.notifyChange(),n},stopEvent:function(t){t.stopPropagation(),t.preventDefault()},keydown:function(e){var i=this,n=e.which,r=t(e.target);(8==n||46==n)&&setTimeout(function(){i._resetMaskPos(r)})},keypress:function(e){var i=e.which;if(8!=i&&46!=i){var n=t(e.target),r=String.fromCharCode(i),o=n.val()||"";o+=r;var s=this._mask[this._maskPos];if(!s)return!1;if(s.end==o.length){if(!s.pattern.test(o.slice(s.start))){for(o=o.slice(0,o.length-1);(s=this._mask[this._maskPos])&&s.character;)o+=s.character,this._maskPos++;return o+=r,s.end!=o.length?(n.val(o),!1):s.pattern.test(o.slice(s.start))?(n.val(o),this._maskPos++,!1):(n.val(o.slice(0,s.start)),!1)}this._maskPos++}}},change:function(e){var i=t(e.target),n=i.val();this._formatPattern.test(n)?(this.update(),this.setValue(this._date.getTime()),this.notifyChange(),this.set()):n&&n.trim()?(this.setValue(this._date.getTime()),this._date?this.set():i.val("")):this._date&&(this.setValue(null),this.notifyChange(),this._unset=!0),this._resetMaskPos(i)},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(t){return this.format.replace(d,function(e){var n,r,o,s=e.length;if("ms"===e&&(s=1),r=l[e].property,"Hours12"===r)o=t.getUTCHours(),0===o?o=12:12!==o&&(o%=12);else{if("Period12"===r)return t.getUTCHours()>=12?"PM":"AM";n="get"+r,o=t[n]()}return"getUTCMonth"===n&&(o+=1),"getUTCYear"===n&&(o=o+1900-2e3),i(""+o,s,"0")})},parseDate:function(t){var e,i,n,r,o={};if(!(e=this._formatPattern.exec(t)))return null;for(i=1;e.length>i;i++)n=this._propertiesByIndex[i],n&&(r=e[i],/^\d+$/.test(r)&&(r=parseInt(r,10)),o[n]=r);return this._finishParsingDate(o)},_resetMaskPos:function(t){for(var e=t.val(),i=0;this._mask.length>i;i++){if(this._mask[i].end>e.length){this._maskPos=i;break}if(this._mask[i].end===e.length){this._maskPos=i+1;break}}},_finishParsingDate:function(t){var e,i,n,o,s,a,l;return e=t.UTCFullYear,t.UTCYear&&(e=2e3+t.UTCYear),e||(e=1970),i=t.UTCMonth?t.UTCMonth-1:0,n=t.UTCDate||1,o=t.UTCHours||0,s=t.UTCMinutes||0,a=t.UTCSeconds||0,l=t.UTCMilliseconds||0,t.Hours12&&(o=t.Hours12),t.Period12&&(/pm/i.test(t.Period12)?12!=o&&(o=(o+12)%24):o%=12),r(e,i,n,o,s,a,l)},_compileFormat:function(){for(var t,i,n=[],r=[],o=this.format,s={},a=0,c=0;t=h.exec(o);)i=t[0],i in l?(a++,s[a]=l[i].property,n.push("\\s*"+l[i].getPattern(this)+"\\s*"),r.push({pattern:RegExp(l[i].getPattern(this)),property:l[i].property,start:c,end:c+=i.length})):(n.push(e(i)),r.push({pattern:RegExp(e(i)),character:i,start:c,end:++c})),o=o.slice(i.length);this._mask=r,this._maskPos=0,this._formatPattern=RegExp("^\\s*"+n.join("")+"\\s*$"),this._propertiesByIndex=s},_attachDatePickerEvents:function(){var e=this;this.widget.on("click",".datepicker *",t.proxy(this.click,this)),this.widget.on("click","[data-action]",t.proxy(this.doAction,this)),this.widget.on("mousedown",t.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(i){i.stopPropagation();var n=t(this),r=n.closest("ul"),o=r.find(".collapse.in"),s=r.find(".collapse:not(.in)");if(o&&o.length){var a=o.data("collapse");if(a&&a.transitioning)return;o.collapse("hide"),s.collapse("show"),n.find("i").toggleClass(e.timeIcon+" "+e.dateIcon),e.$element.find(".add-on i").toggleClass(e.timeIcon+" "+e.dateIcon)}}),this.isInput?(this.$element.on({focus:t.proxy(this.show,this),change:t.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:t.proxy(this.keydown,this),keypress:t.proxy(this.keypress,this)})):(this.$element.on({change:t.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:t.proxy(this.keydown,this),keypress:t.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",t.proxy(this.show,this)):this.$element.on("click",t.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(){t(window).on("resize.datetimepicker"+this.id,t.proxy(this.place,this)),this.isInput||t(document).on("mousedown.datetimepicker"+this.id,t.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off({focus:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){t(window).off("resize.datetimepicker"+this.id),this.isInput||t(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var e=this.$element.parents(),i=!1,n=0;e.length>n;n++)if("fixed"==t(e[n]).css("position")){i=!0;break}return i}return!1}},t.fn.datetimepicker=function(e,i){return this.each(function(){var n=t(this),r=n.data("datetimepicker"),s="object"==typeof e&&e;r||n.data("datetimepicker",r=new o(this,t.extend({},t.fn.datetimepicker.defaults,s))),"string"==typeof e&&r[e](i)})},t.fn.datetimepicker.defaults={maskInput:!1,pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!0,startDate:-1/0,endDate:1/0,collapse:!0},t.fn.datetimepicker.Constructor=o;var s=0,a=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},l={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},c=[];for(var u in l)c.push(u);c[c.length-1]+="\\b",c.push(".");var h=RegExp(c.join("\\b|"));c.pop();var d=RegExp(c.join("\\b|"),"g"),f={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(t){return 0===t%4&&0!==t%100||0===t%400},getDaysInMonth:function(t,e){return[31,f.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};f.template='<div class="datepicker-days"><table class="table-condensed">'+f.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+"</table>"+"</div>";var p={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"></span>'};p.getTemplate=function(t,e){return'<div class="timepicker-picker"><table class="table-condensed"'+(t?' data-hour-format="12"':"")+">"+"<tr>"+'<td><a href="#" class="btn" data-action="incrementHours"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="incrementMinutes"><i class="icon-chevron-up"></i></a></td>'+(e?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="icon-chevron-up"></i></a></td>':"")+(t?'<td class="separator"></td>':"")+"</tr>"+"<tr>"+"<td>"+p.hourTemplate+"</td> "+'<td class="separator">:</td>'+"<td>"+p.minuteTemplate+"</td> "+(e?'<td class="separator">:</td><td>'+p.secondTemplate+"</td>":"")+(t?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+"</tr>"+"<tr>"+'<td><a href="#" class="btn" data-action="decrementHours"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" class="btn" data-action="decrementMinutes"><i class="icon-chevron-down"></i></a></td>'+(e?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="icon-chevron-down"></i></a></td>':"")+(t?'<td class="separator"></td>':"")+"</tr>"+"</table>"+"</div>"+'<div class="timepicker-hours" data-action="selectHour">'+'<table class="table-condensed">'+"</table>"+"</div>"+'<div class="timepicker-minutes" data-action="selectMinute">'+'<table class="table-condensed">'+"</table>"+"</div>"+(e?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")}}(window.jQuery);